<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <title>Spinnaker C++: AcquisitionMultipleCameraRecovery.cpp</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="ga.js"></script>
  <link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <div id="top"><!-- do not remove this div! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0.9em" width="100%">
      <tbody>
        <tr style="height: 56px;">
          <td id="projectlogo" style="padding-left: 0.9em;text-align: left;background: #ffffff;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><a href="https://www.flir.com/iis/machine-vision"><img alt="Logo" src="FLIR_Logo.png"/></a></td>
          <td style="padding-left: 0.5em;text-align: left;background: #002f86;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><div id="projectname">Spinnaker C++</div></td>
          <td style="padding-right: 0.9em;text-align: right;background: #002f86;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><div id="projectname"><span id="projectnumber">2.0.0.0</span></td>
        </tr>
      </tbody>
    </table>
  </div>
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">AcquisitionMultipleCameraRecovery.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p><a class="el" href="_acquisition_multiple_camera_recovery_8cpp.html">AcquisitionMultipleCameraRecovery.cpp</a> shows how to continously acquire images from multiple cameras using image events. It demonstrates the use of User Set Control to save persistent camera configurations, allowing for smooth camera recovery through interface events. This example relies on information provided in the ImageEvents, EnumerationEvents, ImageFormatControl, and Acquisition examples.</p>
<p>This example uses a global map to retain image information, including the number of images grabbed, the number of incomplete images and the number of removals for each camera over the duration of the example. Cameras may be added or removed after the example has started.</p>
<p>The example assumes each camera has a unique serial number and is capable of configuring User Set 1. Note that if a camera was configured and is disconnected before the example ends, it will not be reconfigured to use the default User Set.</p>
<div class="fragment"><div class="line"><span class="comment">//=============================================================================</span></div>
<div class="line"><span class="comment">// Copyright (c) 2001-2019 FLIR Systems, Inc. All Rights Reserved.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// This software is the confidential and proprietary information of FLIR</span></div>
<div class="line"><span class="comment">// Integrated Imaging Solutions, Inc. (&quot;Confidential Information&quot;). You</span></div>
<div class="line"><span class="comment">// shall not disclose such Confidential Information and shall use it only in</span></div>
<div class="line"><span class="comment">// accordance with the terms of the license agreement you entered into</span></div>
<div class="line"><span class="comment">// with FLIR Integrated Imaging Solutions, Inc. (FLIR).</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// FLIR MAKES NO REPRESENTATIONS OR WARRANTIES ABOUT THE SUITABILITY OF THE</span></div>
<div class="line"><span class="comment">// SOFTWARE, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE</span></div>
<div class="line"><span class="comment">// IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR</span></div>
<div class="line"><span class="comment">// PURPOSE, OR NON-INFRINGEMENT. FLIR SHALL NOT BE LIABLE FOR ANY DAMAGES</span></div>
<div class="line"><span class="comment">// SUFFERED BY LICENSEE AS A RESULT OF USING, MODIFYING OR DISTRIBUTING</span></div>
<div class="line"><span class="comment">// THIS SOFTWARE OR ITS DERIVATIVES.</span></div>
<div class="line"><span class="comment">//=============================================================================</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_spinnaker_8h.html">Spinnaker.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_spinnaker_gen_api_8h.html">SpinGenApi/SpinnakerGenApi.h</a>&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iomanip&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker;</div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker::GenApi;</div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker::GenICam;</div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"></div>
<div class="line"><span class="comment">// This class defines the properties and methods for image event handling; please see</span></div>
<div class="line"><span class="comment">// ImageEvents example for more in-depth comments on setting up image event handlers.</span></div>
<div class="line"><span class="keyword">class </span><a name="_a0"></a><a class="code" href="class_image_event_handler_impl.html">ImageEventHandlerImpl</a> : <span class="keyword">public</span> <a name="_a1"></a><a class="code" href="class_spinnaker_1_1_image_event_handler.html">ImageEventHandler</a></div>
<div class="line">{</div>
<div class="line">  <span class="keyword">public</span>:</div>
<div class="line">    <a class="code" href="class_image_event_handler_impl.html">ImageEventHandlerImpl</a>(<span class="keywordtype">string</span> deviceSerial)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// The device serial number is stored so the grab information can be updated</span></div>
<div class="line">        <span class="comment">// on each image event.</span></div>
<div class="line">        m_deviceSerialNumber = deviceSerial;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ~<a class="code" href="class_image_event_handler_impl.html">ImageEventHandlerImpl</a>()</div>
<div class="line">    {</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// *** NOTES ***</span></div>
<div class="line">    <span class="comment">// The implementation for OnImageEvent is defined later as it requires the implementation</span></div>
<div class="line">    <span class="comment">// of the GrabInfo struct below. GrabInfo relies on the implementation of the</span></div>
<div class="line">    <span class="comment">// ImageEventHandlerImpl constructor so it is defined first.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordtype">void</span> OnImageEvent(<a name="_a2"></a><a class="code" href="class_spinnaker_1_1_image_ptr.html">ImagePtr</a> image);</div>
<div class="line"></div>
<div class="line">  <span class="keyword">private</span>:</div>
<div class="line">    <span class="keywordtype">string</span> m_deviceSerialNumber;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">// This struct defines grab information for each unique device</span></div>
<div class="line"><span class="comment">// A Grab Info object is created each time a new device is configured and is updated on device</span></div>
<div class="line"><span class="comment">// arrival, device removal, and image events.</span></div>
<div class="line"><span class="keyword">struct </span><a name="_a3"></a><a class="code" href="struct_grab_info.html">GrabInfo</a></div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numImagesGrabbed;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numIncompleteImages;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numRemovals;</div>
<div class="line">    std::shared_ptr&lt;ImageEventHandlerImpl&gt; imageEventHandler;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="struct_grab_info.html">GrabInfo</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; deviceSerial) : numImagesGrabbed(0), numIncompleteImages(0), numRemovals(0)</div>
<div class="line">    {</div>
<div class="line">        imageEventHandler = make_shared&lt;ImageEventHandlerImpl&gt;(deviceSerial);</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">// This map stores the Grab Info for all cameras.</span></div>
<div class="line">std::map&lt;std::string, GrabInfo&gt; <a name="a4"></a><a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a0f30166281cdb7e0ad73cd3f513c80d5">cameraGrabInfoMap</a>;</div>
<div class="line"></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// This method belongs to the ImageEventHandlerImpl class and defines an image event.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// *** NOTES ***</span></div>
<div class="line"><span class="comment">// Since the example has the potential of grabbing a large number of images, printouts are</span></div>
<div class="line"><span class="comment">// limited to every 10th image grabbed. The final grab information is printed on example</span></div>
<div class="line"><span class="comment">// completion. Images are not saved for this exmaple.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">void</span> <a name="a5"></a><a class="code" href="class_image_event_handler_impl.html#abe30c90bff5016dbe977f53672b41e46">ImageEventHandlerImpl::OnImageEvent</a>(<a class="code" href="class_spinnaker_1_1_image_ptr.html">ImagePtr</a> image)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">auto</span> cameraGrabInfo = <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a0f30166281cdb7e0ad73cd3f513c80d5">cameraGrabInfoMap</a>.find(m_deviceSerialNumber);</div>
<div class="line">    <span class="keywordflow">if</span> (cameraGrabInfo == <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a0f30166281cdb7e0ad73cd3f513c80d5">cameraGrabInfoMap</a>.end())</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error OnImageEvent: camera &quot;</span> &lt;&lt; m_deviceSerialNumber &lt;&lt; <span class="stringliteral">&quot; not found in grab info map&quot;</span> &lt;&lt; endl;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Check image retrieval status</span></div>
<div class="line">    <span class="keywordflow">if</span> (image-&gt;IsIncomplete())</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Increment the number of incomplete images</span></div>
<div class="line">        cameraGrabInfo-&gt;second.numIncompleteImages++;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Retrieve and increment the total number of images grabbed</span></div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; numImagesGrabbed = cameraGrabInfo-&gt;second.numImagesGrabbed;</div>
<div class="line">        numImagesGrabbed++;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (numImagesGrabbed % 10 == 0)</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; numImagesGrabbed &lt;&lt; <span class="stringliteral">&quot; Images grabbed for &quot;</span> &lt;&lt; m_deviceSerialNumber &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// A global camera list is updated on camera arrival/removals to ensure old cameras can be</span></div>
<div class="line"><span class="comment">// cleaned up when appropriate.</span></div>
<div class="line"><a name="_a6"></a><a class="code" href="class_spinnaker_1_1_camera_list.html">CameraList</a> <a name="a7"></a><a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a29cbca22ddd06e7dc962ebacd49456fd">globalCamList</a>;</div>
<div class="line"></div>
<div class="line"><span class="comment">// This helper function allows the example to sleep in both Windows and Linux</span></div>
<div class="line"><span class="comment">// systems. Note that Windows sleep takes milliseconds as a parameter while</span></div>
<div class="line"><span class="comment">// Linux systems take microseconds as a parameter.</span></div>
<div class="line"><span class="keywordtype">void</span> <a name="a8"></a><a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#ac7edb77de4b99b4f8d3600e0151f9cae">SleepyWrapper</a>(<span class="keywordtype">int</span> milliseconds)</div>
<div class="line">{</div>
<div class="line"><span class="preprocessor">#if defined WIN32 || defined _WIN32 || defined WIN64 || defined _WIN64</span></div>
<div class="line"><span class="preprocessor"></span>    Sleep(milliseconds);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    usleep(1000 * milliseconds);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This helper function wraps GetCameras in a try catch. This ensures cleanup or setup</span></div>
<div class="line"><span class="comment">// continues even if the camera list failed to update.</span></div>
<div class="line"><span class="keywordtype">void</span> <a name="a9"></a><a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a7d9f7db696d6eedc80343d419e45c804">RefreshCameraList</a>(<a name="_a10"></a><a class="code" href="class_spinnaker_1_1_system_ptr.html">SystemPtr</a> system)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a29cbca22ddd06e7dc962ebacd49456fd">globalCamList</a> = system-&gt;GetCameras();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a name="_a11"></a><a class="code" href="class_spinnaker_1_1_exception.html">Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error refreshing camera list: &quot;</span> &lt;&lt; e.<a name="a12"></a><a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Provide the function signature for RunSingleCamera so it can be triggered on a</span></div>
<div class="line"><span class="comment">// device arrival.</span></div>
<div class="line"><span class="keywordtype">bool</span> <a name="a13"></a><a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a4a27dd351d8b202bef740580597364ac">ConfigureCamera</a>(<a name="_a14"></a><a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam);</div>
<div class="line"></div>
<div class="line"><span class="comment">// This class defines the properties and functions for device arrivals and removals</span></div>
<div class="line"><span class="comment">// on an interface; please see EnumerationEvents example for more in-depth comments</span></div>
<div class="line"><span class="comment">// on setting up interface event handlers.</span></div>
<div class="line"><span class="keyword">class </span><a name="_a15"></a><a class="code" href="class_interface_event_handler_impl.html">InterfaceEventHandlerImpl</a> : <span class="keyword">public</span> <a name="_a16"></a><a class="code" href="class_spinnaker_1_1_interface_event_handler.html">InterfaceEventHandler</a></div>
<div class="line">{</div>
<div class="line">  <span class="keyword">public</span>:</div>
<div class="line">    <a class="code" href="class_interface_event_handler_impl.html">InterfaceEventHandlerImpl</a>(<a class="code" href="class_spinnaker_1_1_system_ptr.html">SystemPtr</a> system) : m_system(system){};</div>
<div class="line"></div>
<div class="line">    ~<a class="code" href="class_interface_event_handler_impl.html">InterfaceEventHandlerImpl</a>(){};</div>
<div class="line"></div>
<div class="line">    <span class="comment">// This function defines the arrival event on an interface. It refreshes the</span></div>
<div class="line">    <span class="comment">// global camera list and starts a RunSingleCamera thread for the device.</span></div>
<div class="line">    <span class="keywordtype">void</span> OnDeviceArrival(uint64_t deviceSerialNumber)</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">const</span> std::string serialNum = to_string(deviceSerialNumber);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Refresh the global camera list</span></div>
<div class="line">        <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a7d9f7db696d6eedc80343d419e45c804">RefreshCameraList</a>(m_system);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Configure the camera and begin acquisition</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> cam = <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a29cbca22ddd06e7dc962ebacd49456fd">globalCamList</a>.<a name="a17"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#ae9615b9cddd0374466cfc7661256d752">GetBySerial</a>(serialNum);</div>
<div class="line">        <span class="keywordflow">if</span> (cam.<a name="a18"></a><a class="code" href="class_spinnaker_1_1_base_ptr.html#a1d57f75f79e9178bdd17e38a23720d56">IsValid</a>())</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a4a27dd351d8b202bef740580597364ac">ConfigureCamera</a>(cam))</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">try</span></div>
<div class="line">                {</div>
<div class="line">                    cam-&gt;BeginAcquisition();</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Exception</a>&amp; e)</div>
<div class="line">                {</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Error beginning acquisition: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Error OnDeviceArrival: configuration for device &quot;</span> &lt;&lt; serialNum &lt;&lt; <span class="stringliteral">&quot; failed.&quot;</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// This function defines removal events on an interface.</span></div>
<div class="line">    <span class="keywordtype">void</span> OnDeviceRemoval(uint64_t deviceSerialNumber)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Log the device removal</span></div>
<div class="line">        <span class="keywordtype">string</span> deviceSerial = to_string(deviceSerialNumber);</div>
<div class="line">        cout &lt;&lt; endl &lt;&lt; deviceSerial &lt;&lt; <span class="stringliteral">&quot; Device Removal Detected&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Refresh the global camera list</span></div>
<div class="line">        <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a7d9f7db696d6eedc80343d419e45c804">RefreshCameraList</a>(m_system);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Increment the number of removals for disconnected cameras</span></div>
<div class="line">        <span class="keyword">auto</span> cameraGrabInfo = <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a0f30166281cdb7e0ad73cd3f513c80d5">cameraGrabInfoMap</a>.find(deviceSerial);</div>
<div class="line">        <span class="keywordflow">if</span> (cameraGrabInfo != <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a0f30166281cdb7e0ad73cd3f513c80d5">cameraGrabInfoMap</a>.end())</div>
<div class="line">        {</div>
<div class="line">            cameraGrabInfo-&gt;second.numRemovals++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Error OnDeviceRemoval: camera &quot;</span> &lt;&lt; deviceSerial &lt;&lt; <span class="stringliteral">&quot; not found in grab info map&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">  <span class="keyword">private</span>:</div>
<div class="line">    <a class="code" href="class_spinnaker_1_1_system_ptr.html">SystemPtr</a> m_system;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function configures newly discovered cameras with desired settings, saves</span></div>
<div class="line"><span class="comment">// them to User Set 1 and sets this as the default. This way cameras will not need</span></div>
<div class="line"><span class="comment">// to be reconfigured if they are disconnected during the example. Note that this may</span></div>
<div class="line"><span class="comment">// overwrite current settings for User Set 1; please see ImageFormatControl example</span></div>
<div class="line"><span class="comment">// for more in-depth comments on camera configuration.</span></div>
<div class="line"><span class="keywordtype">bool</span> <a name="a19"></a><a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a7651c0e5a04a6ab93a38d22d95ceac1a">ConfigureUserSet1</a>(<a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Get the camera node map</span></div>
<div class="line">        <a name="a20"></a><a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap = pCam-&gt;GetNodeMap();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Get User Set 1 from the User Set Selector</span></div>
<div class="line">        <a name="_a21"></a><a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumerationPtr</a> ptrUserSetSelector = nodeMap.GetNode(<span class="stringliteral">&quot;UserSetSelector&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a name="a22"></a><a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrUserSetSelector))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set User Set Selector to User Set 1 (node retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrUserSet1 = ptrUserSetSelector-&gt;GetEntryByName(<span class="stringliteral">&quot;UserSet1&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a name="a23"></a><a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrUserSet1))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set User Set Selector to User Set 1 (enum entry retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keyword">const</span> int64_t userSet1 = ptrUserSet1-&gt;GetValue();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Set User Set Selector to User Set 1</span></div>
<div class="line">        ptrUserSetSelector-&gt;SetIntValue(userSet1);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Set User Set Default to User Set 1</span></div>
<div class="line">        <span class="comment">// This ensures the camera will re-enumerate using User Set 1, instead of the default user set.</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumerationPtr</a> ptrUserSetDefault = nodeMap.GetNode(<span class="stringliteral">&quot;UserSetDefault&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrUserSetDefault))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set User Set Default to User Set 1 (node retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        ptrUserSetDefault-&gt;SetIntValue(userSet1);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Set acquisition mode to continuous</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumerationPtr</a> ptrAcquisitionMode = nodeMap.GetNode(<span class="stringliteral">&quot;AcquisitionMode&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrAcquisitionMode))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set acquisition mode to continuous (node retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrAcquisitionModeContinuous = ptrAcquisitionMode-&gt;GetEntryByName(<span class="stringliteral">&quot;Continuous&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrAcquisitionModeContinuous))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set acquisition mode to continuous (enum entry retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keyword">const</span> int64_t acquisitionModeContinuous = ptrAcquisitionModeContinuous-&gt;GetValue();</div>
<div class="line"></div>
<div class="line">        ptrAcquisitionMode-&gt;SetIntValue(acquisitionModeContinuous);</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// Any additional settings should be changed before executing the user set save.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line"></div>
<div class="line">        <span class="comment">// Execute User Set Save to save User Set 1</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CCommandPtr</a> ptrUserSetSave = nodeMap.GetNode(<span class="stringliteral">&quot;UserSetSave&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!ptrUserSetSave.<a name="a24"></a><a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html#afa8720abaf6972d6dac22a8cd1a67225">IsValid</a>())</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to save Settings to User Set 1. Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        ptrUserSetSave-&gt;Execute();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error configuring user set 1: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function resets the cameras default User Set to the Default User Set.</span></div>
<div class="line"><span class="comment">// Note that User Set 1 will retain the settings set during ConfigureUserSet1.</span></div>
<div class="line"><span class="keywordtype">void</span> <a name="a25"></a><a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#aae4c6f78439f3a6d4d75693a0deb74b2">ResetCameraUserSetToDefault</a>(<a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Get the camera node map</span></div>
<div class="line">        <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap = pCam-&gt;GetNodeMap();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Get User Set Default from User Set Selector</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumerationPtr</a> ptrUserSetSelector = nodeMap.GetNode(<span class="stringliteral">&quot;UserSetSelector&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrUserSetSelector))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set User Set Selector to Default (node retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrUserSetDefaultEntry = ptrUserSetSelector-&gt;GetEntryByName(<span class="stringliteral">&quot;Default&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrUserSetDefaultEntry))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set User Set Selector to Default (enum entry retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keyword">const</span> int64_t userSetDefault = ptrUserSetDefaultEntry-&gt;GetValue();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Set User Set Selector back to User Set Default</span></div>
<div class="line">        ptrUserSetSelector-&gt;SetIntValue(userSetDefault);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Set User Set Default to User Set Default</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumerationPtr</a> ptrUserSetDefault = nodeMap.GetNode(<span class="stringliteral">&quot;UserSetDefault&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrUserSetDefault))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set User Set Default to User Set 1 (node retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        ptrUserSetDefault-&gt;SetIntValue(userSetDefault);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Execute User Set Load to load User Set Default</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CCommandPtr</a> ptrUserSetLoad = nodeMap.GetNode(<span class="stringliteral">&quot;UserSetLoad&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!ptrUserSetLoad.<a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html#afa8720abaf6972d6dac22a8cd1a67225">IsValid</a>())</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to load Settings from User Set Default. Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        ptrUserSetLoad-&gt;Execute();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error resetting camera to use default user set: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This helper function retrieves the device serial number from the cameras nodemap.</span></div>
<div class="line"><span class="keywordtype">string</span> <a name="a26"></a><a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#af43fcc16da2de580f7c7bd9c119601c8">GetDeviceSerial</a>(<a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap = pCam-&gt;GetTLDeviceNodeMap();</div>
<div class="line">    <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CStringPtr</a> ptrDeviceSerialNumber = nodeMap.GetNode(<span class="stringliteral">&quot;DeviceSerialNumber&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrDeviceSerialNumber))</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> string(ptrDeviceSerialNumber-&gt;GetValue());</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function configures new cameras to use camera settings from User Set 1 and</span></div>
<div class="line"><span class="comment">// registers an image event handler on new and rediscovered cameras.</span></div>
<div class="line"><span class="keywordtype">bool</span> <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a4a27dd351d8b202bef740580597364ac">ConfigureCamera</a>(<a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Initialize camera</span></div>
<div class="line">        pCam-&gt;Init();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Get the device serial number</span></div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">string</span> deviceSerialNumber = <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#af43fcc16da2de580f7c7bd9c119601c8">GetDeviceSerial</a>(pCam);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Check if the camera has been connected before</span></div>
<div class="line">        <span class="keyword">auto</span> camera = <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a0f30166281cdb7e0ad73cd3f513c80d5">cameraGrabInfoMap</a>.find(deviceSerialNumber);</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">bool</span> cameraFound = camera != <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a0f30166281cdb7e0ad73cd3f513c80d5">cameraGrabInfoMap</a>.end();</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; endl</div>
<div class="line">             &lt;&lt; endl</div>
<div class="line">             &lt;&lt; <span class="stringliteral">&quot;*** &quot;</span> &lt;&lt; (cameraFound ? <span class="stringliteral">&quot;RESUM&quot;</span> : <span class="stringliteral">&quot;START&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;ING RECOVERY EXAMPLE FOR &quot;</span> &lt;&lt; deviceSerialNumber</div>
<div class="line">             &lt;&lt; <span class="stringliteral">&quot; ***&quot;</span> &lt;&lt; endl</div>
<div class="line">             &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Configure newly discovered cameras to use User Set 1</span></div>
<div class="line">        <span class="keywordflow">if</span> (!cameraFound)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Add a new entry into the camera grab info map using the default GrabInfo constructor</span></div>
<div class="line">            <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a0f30166281cdb7e0ad73cd3f513c80d5">cameraGrabInfoMap</a>.insert(std::make_pair(deviceSerialNumber, <a class="code" href="struct_grab_info.html">GrabInfo</a>(deviceSerialNumber)));</div>
<div class="line"></div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Configuring device &quot;</span> &lt;&lt; deviceSerialNumber &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Configure the new camera to use User Set 1</span></div>
<div class="line">            <span class="comment">// Return if it is unsuccessful</span></div>
<div class="line">            <span class="keywordflow">if</span> (!<a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a7651c0e5a04a6ab93a38d22d95ceac1a">ConfigureUserSet1</a>(pCam))</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Register the imageEvent to the camera</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// An image event handler is created in the GrabInfo default constructor for every</span></div>
<div class="line">        <span class="comment">// new camera. The event handler can be reused for cameras that have been reconnected.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        pCam-&gt;RegisterEventHandler(*(<a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a0f30166281cdb7e0ad73cd3f513c80d5">cameraGrabInfoMap</a>.find(deviceSerialNumber)-&gt;second.imageEventHandler));</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error Running single camera: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This helper function prints the complete grab info results for each camera.</span></div>
<div class="line"><span class="keywordtype">void</span> <a name="a27"></a><a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a29a766cec5e4b32246f17324db3fe606">PrintExampleStatistics</a>()</div>
<div class="line">{</div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Printing Final Statistics &quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> printWidth = 20;</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; setw(printWidth) &lt;&lt; left &lt;&lt; <span class="stringliteral">&quot;Serial Number:&quot;</span> &lt;&lt; setw(printWidth) &lt;&lt; left</div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;Images Grabbed:&quot;</span> &lt;&lt; setw(printWidth) &lt;&lt; left &lt;&lt; <span class="stringliteral">&quot;Incomplete Images:&quot;</span> &lt;&lt; setw(printWidth) &lt;&lt; left</div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;Camera Removals:&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> camInfo = <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a0f30166281cdb7e0ad73cd3f513c80d5">cameraGrabInfoMap</a>.begin(); camInfo != <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a0f30166281cdb7e0ad73cd3f513c80d5">cameraGrabInfoMap</a>.end(); camInfo++)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; setw(printWidth) &lt;&lt; left &lt;&lt; camInfo-&gt;first &lt;&lt; setw(printWidth) &lt;&lt; left</div>
<div class="line">             &lt;&lt; camInfo-&gt;second.numImagesGrabbed &lt;&lt; setw(printWidth) &lt;&lt; left &lt;&lt; camInfo-&gt;second.numIncompleteImages</div>
<div class="line">             &lt;&lt; setw(printWidth) &lt;&lt; left &lt;&lt; camInfo-&gt;second.numRemovals &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Example entry point; please see EnumerationEvents example for more in-depth</span></div>
<div class="line"><span class="comment">// comments on preparing and cleaning up the system.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a28"></a><a class="code" href="_acquisition_8cpp.html#a2c3f6775325c30275d11c6abee2db6a0">main</a>(<span class="keywordtype">int</span> <span class="comment">/*argc*/</span>, <span class="keywordtype">char</span>** <span class="comment">/*argv*/</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Since this application saves images in the current folder</span></div>
<div class="line">    <span class="comment">// we must ensure that we have permission to write to this folder.</span></div>
<div class="line">    <span class="comment">// If we do not have permission, fail right away.</span></div>
<div class="line">    FILE* tempFile = fopen(<span class="stringliteral">&quot;test.txt&quot;</span>, <span class="stringliteral">&quot;w+&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (tempFile == <span class="keyword">nullptr</span>)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Failed to create file in current folder. Please check permissions.&quot;</span> &lt;&lt; endl;</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Press Enter to exit...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        getchar();</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    fclose(tempFile);</div>
<div class="line">    <span class="keyword">remove</span>(<span class="stringliteral">&quot;test.txt&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Print application build information</span></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Application build date: &quot;</span> &lt;&lt; __DATE__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; __TIME__ &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Retrieve singleton reference to system object</span></div>
<div class="line">    <a class="code" href="class_spinnaker_1_1_system_ptr.html">SystemPtr</a> system = <a name="a29"></a><a class="code" href="class_spinnaker_1_1_system.html#a45b5dbcde6e9fdfb05e0016af82969d0">System::GetInstance</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Print out current library version</span></div>
<div class="line">    <span class="keyword">const</span> <a name="_a30"></a><a class="code" href="struct_spinnaker_1_1_library_version.html">LibraryVersion</a> spinnakerLibraryVersion = system-&gt;GetLibraryVersion();</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Spinnaker library version: &quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a31"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#a435ca80707c851bea186e73a1be5d3b9">major</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a32"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#a41c0e171b65e16617977006e58fbbbc5">minor</a></div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a33"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#a4bfea42429249a1f65204f0c0f34704a">type</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a34"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#ad263db2963cb8e231c207328372e17bb">build</a> &lt;&lt; endl</div>
<div class="line">         &lt;&lt; endl</div>
<div class="line">         &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Retrieve list of cameras from the system</span></div>
<div class="line">    <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a29cbca22ddd06e7dc962ebacd49456fd">globalCamList</a> = system-&gt;GetCameras();</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Number of cameras detected: &quot;</span> &lt;&lt; <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a29cbca22ddd06e7dc962ebacd49456fd">globalCamList</a>.<a name="a35"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#a7d1646dc12416daf821f666c233d2be2">GetSize</a>() &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Configure each connected camera to use User Set 1 and register image events</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> camIndex = 0; camIndex &lt; <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a29cbca22ddd06e7dc962ebacd49456fd">globalCamList</a>.<a class="code" href="class_spinnaker_1_1_camera_list.html#a7d1646dc12416daf821f666c233d2be2">GetSize</a>(); camIndex++)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> cam = <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a29cbca22ddd06e7dc962ebacd49456fd">globalCamList</a>[camIndex];</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a4a27dd351d8b202bef740580597364ac">ConfigureCamera</a>(cam))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Camera configuration for device &quot;</span> &lt;&lt; <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#af43fcc16da2de580f7c7bd9c119601c8">GetDeviceSerial</a>(cam) &lt;&lt; <span class="stringliteral">&quot; unsuccessful, aborting...&quot;</span>;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create an interface event handler to handle all interface events on the system.</span></div>
<div class="line">    <span class="comment">// Please see EnumerationEvents example for more in-depth comments on setting up system and interface event</span></div>
<div class="line">    <span class="comment">// handlers.</span></div>
<div class="line">    <a class="code" href="class_interface_event_handler_impl.html">InterfaceEventHandlerImpl</a> interfaceEventHandler(system);</div>
<div class="line">    system-&gt;RegisterInterfaceEventHandler(interfaceEventHandler);</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl</div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;Cameras may be unplugged/plugged in after the example has started.&quot;</span> &lt;&lt; endl</div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;After the example begins, please press any key to end the example...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Press any key to begin...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">    getchar();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Begin Acquisition on all cameras</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> camIndex = 0; camIndex &lt; <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a29cbca22ddd06e7dc962ebacd49456fd">globalCamList</a>.<a class="code" href="class_spinnaker_1_1_camera_list.html#a7d1646dc12416daf821f666c233d2be2">GetSize</a>(); camIndex++)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a29cbca22ddd06e7dc962ebacd49456fd">globalCamList</a>[camIndex]-&gt;BeginAcquisition();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Exception</a>&amp; e)</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Error starting acquistion on camera at index &quot;</span> &lt;&lt; camIndex &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Wait for user to stop the example by pressing any key</span></div>
<div class="line">    getchar();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// End Acquisition on all cameras</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> camIndex = 0; camIndex &lt; <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a29cbca22ddd06e7dc962ebacd49456fd">globalCamList</a>.<a class="code" href="class_spinnaker_1_1_camera_list.html#a7d1646dc12416daf821f666c233d2be2">GetSize</a>(); camIndex++)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">try</span></div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a29cbca22ddd06e7dc962ebacd49456fd">globalCamList</a>[camIndex]-&gt;EndAcquisition();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Exception</a>&amp; e)</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Error ending acquistion on camera at index &quot;</span> &lt;&lt; camIndex &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Unregister the interface events from the system</span></div>
<div class="line">    system-&gt;UnregisterInterfaceEventHandler(interfaceEventHandler);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Reset camera user sets and deinitialize all cameras</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> camIndex = 0; camIndex &lt; <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a29cbca22ddd06e7dc962ebacd49456fd">globalCamList</a>.<a class="code" href="class_spinnaker_1_1_camera_list.html#a7d1646dc12416daf821f666c233d2be2">GetSize</a>(); ++camIndex)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> cam = <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a29cbca22ddd06e7dc962ebacd49456fd">globalCamList</a>[camIndex];</div>
<div class="line">        <span class="keywordflow">if</span> (cam.<a class="code" href="class_spinnaker_1_1_base_ptr.html#a1d57f75f79e9178bdd17e38a23720d56">IsValid</a>())</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Resetting configuration for device &quot;</span> &lt;&lt; <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#af43fcc16da2de580f7c7bd9c119601c8">GetDeviceSerial</a>(cam) &lt;&lt; endl;</div>
<div class="line">            <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#aae4c6f78439f3a6d4d75693a0deb74b2">ResetCameraUserSetToDefault</a>(cam);</div>
<div class="line">            cam-&gt;DeInit();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a29a766cec5e4b32246f17324db3fe606">PrintExampleStatistics</a>();</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Clear camera list before releasing system</span></div>
<div class="line">    <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#a29cbca22ddd06e7dc962ebacd49456fd">globalCamList</a>.<a name="a36"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Release system</span></div>
<div class="line">    system-&gt;ReleaseInstance();</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Done! Press any key to exit...&quot;</span> &lt;&lt; endl;</div>
<div class="line">    getchar();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->

  <table style="width: 100%;border-spacing: 0px 0px;border-left-style: solid;border-left-width: ;border-left-color: #8c8888;border-right-style: solid;border-right-width: ;border-right-color: #8c8888;border-top-style: solid;border-top-width: ;border-top-color: #8c8888;border-bottom-style: solid;border-bottom-width: ;border-bottom-color: #8c8888;margin-left: 0;margin-right: auto;padding: 0px">
    <col />
    <col />
    <col />
        <tbody>
            <tr>
                <td style="background-color: #8c8888;color: #ffffff;"><a class="footer" href="https://www.flir.com/support-center/rma/iis-support-request">Contact Support </a> </td>
                <td style="background-color: #8c8888;color: #ffffff;text-align: center;font-size: 16px;font-weight: bold">Spinnaker&#174; SDK Programmer's Guide and API Reference</td>
                <td style="background-color: #8c8888;color: #ffffff;text-align: right;"><address class="footer">
Wed Sep 30 2020 &#160; <a class="footer" href="https://www.flir.com/iis/machine-vision">FLIR Integrated Imaging Solutions Inc. All rights reserved.</a></address></td>
            </tr>
        </tbody>
  </table>
</body>
</html>
