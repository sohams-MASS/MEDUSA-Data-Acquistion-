<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <title>Spinnaker C++: Exposure.cpp</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="ga.js"></script>
  <link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <div id="top"><!-- do not remove this div! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0.9em" width="100%">
      <tbody>
        <tr style="height: 56px;">
          <td id="projectlogo" style="padding-left: 0.9em;text-align: left;background: #ffffff;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><a href="https://www.flir.com/iis/machine-vision"><img alt="Logo" src="FLIR_Logo.png"/></a></td>
          <td style="padding-left: 0.5em;text-align: left;background: #002f86;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><div id="projectname">Spinnaker C++</div></td>
          <td style="padding-right: 0.9em;text-align: right;background: #002f86;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><div id="projectname"><span id="projectnumber">2.0.0.0</span></td>
        </tr>
      </tbody>
    </table>
  </div>
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Exposure.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p><a class="el" href="_exposure_8cpp.html">Exposure.cpp</a> shows how to set a custom exposure time on a device. It relies on information provided in the Enumeration, Acquisition, and NodeMapInfo examples.</p>
<p>This example shows the processes of preparing the camera, setting a custom exposure time, and restoring the camera to its default state (without power cycling). Ensuring custom values do not fall out of range is also touched on.</p>
<p>Following this, we suggest familiarizing yourself with the ImageFormatControl example if you haven't already. ImageFormatControl is another example on camera customization that is shorter and simpler than many of the others. Once comfortable with Exposure and ImageFormatControl, we suggest checking out any of the longer, more complicated examples related to camera configuration: ChunkData, LookupTable, Sequencer, or Trigger.</p>
<div class="fragment"><div class="line"><span class="comment">//=============================================================================</span></div>
<div class="line"><span class="comment">// Copyright (c) 2001-2019 FLIR Systems, Inc. All Rights Reserved.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// This software is the confidential and proprietary information of FLIR</span></div>
<div class="line"><span class="comment">// Integrated Imaging Solutions, Inc. (&quot;Confidential Information&quot;). You</span></div>
<div class="line"><span class="comment">// shall not disclose such Confidential Information and shall use it only in</span></div>
<div class="line"><span class="comment">// accordance with the terms of the license agreement you entered into</span></div>
<div class="line"><span class="comment">// with FLIR Integrated Imaging Solutions, Inc. (FLIR).</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// FLIR MAKES NO REPRESENTATIONS OR WARRANTIES ABOUT THE SUITABILITY OF THE</span></div>
<div class="line"><span class="comment">// SOFTWARE, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE</span></div>
<div class="line"><span class="comment">// IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR</span></div>
<div class="line"><span class="comment">// PURPOSE, OR NON-INFRINGEMENT. FLIR SHALL NOT BE LIABLE FOR ANY DAMAGES</span></div>
<div class="line"><span class="comment">// SUFFERED BY LICENSEE AS A RESULT OF USING, MODIFYING OR DISTRIBUTING</span></div>
<div class="line"><span class="comment">// THIS SOFTWARE OR ITS DERIVATIVES.</span></div>
<div class="line"><span class="comment">//=============================================================================</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_spinnaker_8h.html">Spinnaker.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_spinnaker_gen_api_8h.html">SpinGenApi/SpinnakerGenApi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker;</div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker::GenApi;</div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker::GenICam;</div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function configures a custom exposure time. Automatic exposure is turned</span></div>
<div class="line"><span class="comment">// off in order to allow for the customization, and then the custom setting is</span></div>
<div class="line"><span class="comment">// applied.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a0"></a><a class="code" href="_exposure_8cpp.html#af21f8fd269accc786bbea214409e6f3a">ConfigureExposure</a>(<a name="a1"></a><a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;*** CONFIGURING EXPOSURE ***&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Turn off automatic exposure mode</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// Automatic exposure prevents the manual configuration of exposure</span></div>
<div class="line">        <span class="comment">// time and needs to be turned off.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** LATER ***</span></div>
<div class="line">        <span class="comment">// Exposure time can be set automatically or manually as needed. This</span></div>
<div class="line">        <span class="comment">// example turns automatic exposure off to set it manually and back</span></div>
<div class="line">        <span class="comment">// on in order to return the camera to its default state.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a name="_a2"></a><a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumerationPtr</a> ptrExposureAuto = nodeMap.GetNode(<span class="stringliteral">&quot;ExposureAuto&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a name="a3"></a><a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrExposureAuto) || !<a name="a4"></a><a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrExposureAuto))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to disable automatic exposure (node retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrExposureAutoOff = ptrExposureAuto-&gt;GetEntryByName(<span class="stringliteral">&quot;Off&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrExposureAutoOff) || !<a name="a5"></a><a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrExposureAutoOff))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to disable automatic exposure (enum entry retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        ptrExposureAuto-&gt;SetIntValue(ptrExposureAutoOff-&gt;GetValue());</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Automatic exposure disabled...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Set exposure time manually; exposure time recorded in microseconds</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// The node is checked for availability and writability prior to the</span></div>
<div class="line">        <span class="comment">// setting of the node. Further, it is ensured that the desired exposure</span></div>
<div class="line">        <span class="comment">// time does not exceed the maximum. Exposure time is counted in</span></div>
<div class="line">        <span class="comment">// microseconds. This information can be found out either by</span></div>
<div class="line">        <span class="comment">// retrieving the unit with the GetUnit() method or by checking SpinView.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a name="_a6"></a><a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_float_ptr.html">CFloatPtr</a> ptrExposureTime = nodeMap.GetNode(<span class="stringliteral">&quot;ExposureTime&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrExposureTime) || !<a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrExposureTime))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set exposure time. Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Ensure desired exposure time does not exceed the maximum</span></div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">double</span> exposureTimeMax = ptrExposureTime-&gt;GetMax();</div>
<div class="line">        <span class="keywordtype">double</span> exposureTimeToSet = 2000000.0;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (exposureTimeToSet &gt; exposureTimeMax)</div>
<div class="line">        {</div>
<div class="line">            exposureTimeToSet = exposureTimeMax;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        ptrExposureTime-&gt;SetValue(exposureTimeToSet);</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; std::fixed &lt;&lt; <span class="stringliteral">&quot;Exposure time set to &quot;</span> &lt;&lt; exposureTimeToSet &lt;&lt; <span class="stringliteral">&quot; us...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a name="_a7"></a><a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a name="a8"></a><a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function returns the camera to its default state by re-enabling automatic</span></div>
<div class="line"><span class="comment">// exposure.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a9"></a><a class="code" href="_exposure_8cpp.html#a766f1be021eab89e492d438246b9ea25">ResetExposure</a>(<a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Turn automatic exposure back on</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// Automatic exposure is turned on in order to return the camera to its</span></div>
<div class="line">        <span class="comment">// default state.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumerationPtr</a> ptrExposureAuto = nodeMap.GetNode(<span class="stringliteral">&quot;ExposureAuto&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrExposureAuto) || !<a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrExposureAuto))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to enable automatic exposure (node retrieval). Non-fatal error...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrExposureAutoContinuous = ptrExposureAuto-&gt;GetEntryByName(<span class="stringliteral">&quot;Continuous&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrExposureAutoContinuous) || !<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrExposureAutoContinuous))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to enable automatic exposure (enum entry retrieval). Non-fatal error...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        ptrExposureAuto-&gt;SetIntValue(ptrExposureAutoContinuous-&gt;GetValue());</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Automatic exposure enabled...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function prints the device information of the camera from the transport</span></div>
<div class="line"><span class="comment">// layer; please see NodeMapInfo example for more in-depth comments on printing</span></div>
<div class="line"><span class="comment">// device information from the nodemap.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a10"></a><a class="code" href="_acquisition_8cpp.html#a9a1864412533965fa228b758488637fd">PrintDeviceInfo</a>(<a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;*** DEVICE INFORMATION ***&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        FeatureList_t features;</div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CCategoryPtr</a> category = nodeMap.GetNode(<span class="stringliteral">&quot;DeviceInformation&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(category) &amp;&amp; <a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(category))</div>
<div class="line">        {</div>
<div class="line">            category-&gt;GetFeatures(features);</div>
<div class="line"></div>
<div class="line">            FeatureList_t::const_iterator it;</div>
<div class="line">            <span class="keywordflow">for</span> (it = features.begin(); it != features.end(); ++it)</div>
<div class="line">            {</div>
<div class="line">                <a name="_a11"></a><a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CNodePtr</a> pfeatureNode = *it;</div>
<div class="line">                cout &lt;&lt; pfeatureNode-&gt;GetName() &lt;&lt; <span class="stringliteral">&quot; : &quot;</span>;</div>
<div class="line">                <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CValuePtr</a> pValue = (<a name="a12"></a><a class="code" href="group___pointer__h.html#ga17eabe67b4e0d8b7e2d794239a9c2084">CValuePtr</a>)pfeatureNode;</div>
<div class="line">                cout &lt;&lt; (<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(pValue) ? pValue-&gt;ToString() : <span class="stringliteral">&quot;Node not readable&quot;</span>);</div>
<div class="line">                cout &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Device control information not available.&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function acquires and saves 10 images from a device; please see</span></div>
<div class="line"><span class="comment">// Acquisition example for more in-depth comments on acquiring images.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a13"></a><a class="code" href="_acquisition_8cpp.html#a2836a024d3f74c4699c84267163c70aa">AcquireImages</a>(<a name="_a14"></a><a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam, <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap, <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMapTLDevice)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;*** IMAGE ACQUISITION ***&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Set acquisition mode to continuous</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumerationPtr</a> ptrAcquisitionMode = nodeMap.GetNode(<span class="stringliteral">&quot;AcquisitionMode&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrAcquisitionMode) || !<a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrAcquisitionMode))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set acquisition mode to continuous (node retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrAcquisitionModeContinuous = ptrAcquisitionMode-&gt;GetEntryByName(<span class="stringliteral">&quot;Continuous&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrAcquisitionModeContinuous) || !<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrAcquisitionModeContinuous))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set acquisition mode to continuous (entry &#39;continuous&#39; retrieval). Aborting...&quot;</span> &lt;&lt; endl</div>
<div class="line">                 &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        int64_t acquisitionModeContinuous = ptrAcquisitionModeContinuous-&gt;GetValue();</div>
<div class="line"></div>
<div class="line">        ptrAcquisitionMode-&gt;SetIntValue(acquisitionModeContinuous);</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Acquisition mode set to continuous...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Begin acquiring images</span></div>
<div class="line">        pCam-&gt;BeginAcquisition();</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Acquiring images...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve device serial number for filename</span></div>
<div class="line">        <a name="_a15"></a><a class="code" href="class_spinnaker_1_1_gen_i_cam_1_1gcstring.html">gcstring</a> deviceSerialNumber(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CStringPtr</a> ptrStringSerial = nodeMapTLDevice.GetNode(<span class="stringliteral">&quot;DeviceSerialNumber&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrStringSerial) &amp;&amp; <a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrStringSerial))</div>
<div class="line">        {</div>
<div class="line">            deviceSerialNumber = ptrStringSerial-&gt;GetValue();</div>
<div class="line"></div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Device serial number retrieved as &quot;</span> &lt;&lt; deviceSerialNumber &lt;&lt; <span class="stringliteral">&quot;...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        cout &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Get the value of exposure time to set an appropriate timeout for GetNextImage</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_float_ptr.html">CFloatPtr</a> ptrExposureTime = nodeMap.GetNode(<span class="stringliteral">&quot;ExposureTime&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrExposureTime) || !<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrExposureTime))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to read exposure time. Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// The exposure time is retrieved in µs so it needs to be converted to ms to keep consistency with the unit</span></div>
<div class="line">        <span class="comment">// being used in GetNextImage</span></div>
<div class="line">        uint64_t timeout = <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(ptrExposureTime-&gt;GetValue() / 1000 + 1000);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve, convert, and save images</span></div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k_numImages = 5;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> imageCnt = 0; imageCnt &lt; k_numImages; imageCnt++)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">try</span></div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Retrieve next received image and ensure image completion</span></div>
<div class="line">                <span class="comment">// By default, GetNextImage will block indefinitely until an image arrives.</span></div>
<div class="line">                <span class="comment">// In this example, the timeout value is set to [exposure time + 1000]ms to ensure that an image has</span></div>
<div class="line">                <span class="comment">// enough time to arrive under normal conditions</span></div>
<div class="line">                <a name="_a16"></a><a class="code" href="class_spinnaker_1_1_image_ptr.html">ImagePtr</a> pResultImage = pCam-&gt;GetNextImage(timeout);</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (pResultImage-&gt;IsIncomplete())</div>
<div class="line">                {</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Image incomplete with image status &quot;</span> &lt;&lt; pResultImage-&gt;GetImageStatus() &lt;&lt; <span class="stringliteral">&quot;...&quot;</span> &lt;&lt; endl</div>
<div class="line">                         &lt;&lt; endl;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">// Print image information</span></div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Grabbed image &quot;</span> &lt;&lt; imageCnt &lt;&lt; <span class="stringliteral">&quot;, width = &quot;</span> &lt;&lt; pResultImage-&gt;GetWidth()</div>
<div class="line">                         &lt;&lt; <span class="stringliteral">&quot;, height = &quot;</span> &lt;&lt; pResultImage-&gt;GetHeight() &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Convert image to mono 8</span></div>
<div class="line">                    <a class="code" href="class_spinnaker_1_1_image_ptr.html">ImagePtr</a> convertedImage = pResultImage-&gt;Convert(<a name="a17"></a><a class="code" href="group___camera_defs__h.html#ggabd5af55aaa20bcb0644c46241c2cbad1aab73a79118b4db06f577b5e2563d7246">PixelFormat_Mono8</a>, <a name="a18"></a><a class="code" href="group___spinnaker_defs.html#ggab8d72f72c9674cab70d99975691eb54da6adb68dc4a36540a66f86addd3e70e90">HQ_LINEAR</a>);</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Create a unique filename</span></div>
<div class="line">                    ostringstream filename;</div>
<div class="line"></div>
<div class="line">                    filename &lt;&lt; <span class="stringliteral">&quot;Exposure-&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">if</span> (deviceSerialNumber != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line">                    {</div>
<div class="line">                        filename &lt;&lt; deviceSerialNumber.c_str() &lt;&lt; <span class="stringliteral">&quot;-&quot;</span>;</div>
<div class="line">                    }</div>
<div class="line">                    filename &lt;&lt; imageCnt &lt;&lt; <span class="stringliteral">&quot;.jpg&quot;</span>;</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Save image</span></div>
<div class="line">                    convertedImage-&gt;Save(filename.str().c_str());</div>
<div class="line"></div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Image saved at &quot;</span> &lt;&lt; filename.str() &lt;&lt; endl;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Release image</span></div>
<div class="line">                pResultImage-&gt;Release();</div>
<div class="line"></div>
<div class="line">                cout &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">                result = -1;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// End acquisition</span></div>
<div class="line">        pCam-&gt;EndAcquisition();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function acts as the body of the example; please see NodeMapInfo example</span></div>
<div class="line"><span class="comment">// for more in-depth comments on setting up cameras.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a19"></a><a class="code" href="_acquisition_8cpp.html#a86462e15d417b9982cead96d2e8a8616">RunSingleCamera</a>(<a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line">    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Retrieve TL device nodemap and print device information</span></div>
<div class="line">        <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMapTLDevice = pCam-&gt;GetTLDeviceNodeMap();</div>
<div class="line"></div>
<div class="line">        result = <a class="code" href="_acquisition_8cpp.html#a9a1864412533965fa228b758488637fd">PrintDeviceInfo</a>(nodeMapTLDevice);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Initialize camera</span></div>
<div class="line">        pCam-&gt;Init();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve GenICam nodemap</span></div>
<div class="line">        <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap = pCam-&gt;GetNodeMap();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Configure exposure</span></div>
<div class="line">        err = <a class="code" href="_exposure_8cpp.html#af21f8fd269accc786bbea214409e6f3a">ConfigureExposure</a>(nodeMap);</div>
<div class="line">        <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> err;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Acquire images</span></div>
<div class="line">        result = result | <a class="code" href="_acquisition_8cpp.html#a2836a024d3f74c4699c84267163c70aa">AcquireImages</a>(pCam, nodeMap, nodeMapTLDevice);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Reset exposure</span></div>
<div class="line">        result = result | <a class="code" href="_exposure_8cpp.html#a766f1be021eab89e492d438246b9ea25">ResetExposure</a>(nodeMap);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Deinitialize camera</span></div>
<div class="line">        pCam-&gt;DeInit();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Example entry point; please see Enumeration example for additional</span></div>
<div class="line"><span class="comment">// comments on the steps in this function.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a20"></a><a class="code" href="_acquisition_8cpp.html#a2c3f6775325c30275d11c6abee2db6a0">main</a>(<span class="keywordtype">int</span> <span class="comment">/*argc*/</span>, <span class="keywordtype">char</span>** <span class="comment">/*argv*/</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Since this application saves images in the current folder</span></div>
<div class="line">    <span class="comment">// we must ensure that we have permission to write to this folder.</span></div>
<div class="line">    <span class="comment">// If we do not have permission, fail right away.</span></div>
<div class="line">    FILE* tempFile = fopen(<span class="stringliteral">&quot;test.txt&quot;</span>, <span class="stringliteral">&quot;w+&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (tempFile == <span class="keyword">nullptr</span>)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Failed to create file in current folder.  Please check &quot;</span></div>
<div class="line">                <span class="stringliteral">&quot;permissions.&quot;</span></div>
<div class="line">             &lt;&lt; endl;</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Press Enter to exit...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        getchar();</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    fclose(tempFile);</div>
<div class="line">    <span class="keyword">remove</span>(<span class="stringliteral">&quot;test.txt&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Print application build information</span></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Application build date: &quot;</span> &lt;&lt; __DATE__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; __TIME__ &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Retrieve singleton reference to system object</span></div>
<div class="line">    <a name="_a21"></a><a class="code" href="class_spinnaker_1_1_system_ptr.html">SystemPtr</a> system = <a name="a22"></a><a class="code" href="class_spinnaker_1_1_system.html#a45b5dbcde6e9fdfb05e0016af82969d0">System::GetInstance</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Print out current library version</span></div>
<div class="line">    <span class="keyword">const</span> <a name="_a23"></a><a class="code" href="struct_spinnaker_1_1_library_version.html">LibraryVersion</a> spinnakerLibraryVersion = system-&gt;GetLibraryVersion();</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Spinnaker library version: &quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a24"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#a435ca80707c851bea186e73a1be5d3b9">major</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a25"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#a41c0e171b65e16617977006e58fbbbc5">minor</a></div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a26"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#a4bfea42429249a1f65204f0c0f34704a">type</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a27"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#ad263db2963cb8e231c207328372e17bb">build</a> &lt;&lt; endl</div>
<div class="line">         &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Retrieve list of cameras from the system</span></div>
<div class="line">    <a name="_a28"></a><a class="code" href="class_spinnaker_1_1_camera_list.html">CameraList</a> camList = system-&gt;GetCameras();</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numCameras = camList.<a name="a29"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#a7d1646dc12416daf821f666c233d2be2">GetSize</a>();</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Number of cameras detected: &quot;</span> &lt;&lt; numCameras &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Finish if there are no cameras</span></div>
<div class="line">    <span class="keywordflow">if</span> (numCameras == 0)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Clear camera list before releasing system</span></div>
<div class="line">        camList.<a name="a30"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Release system</span></div>
<div class="line">        system-&gt;ReleaseInstance();</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Not enough cameras!&quot;</span> &lt;&lt; endl;</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Done! Press Enter to exit...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        getchar();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Run example on each camera</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numCameras; i++)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Running example for camera &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        result = result | <a class="code" href="_acquisition_8cpp.html#a86462e15d417b9982cead96d2e8a8616">RunSingleCamera</a>(camList.<a name="a31"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#aa372308b62098bc12ad25ee02dd11a48">GetByIndex</a>(i));</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Camera &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; example complete...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Clear camera list before releasing system</span></div>
<div class="line">    camList.<a class="code" href="class_spinnaker_1_1_camera_list.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Release system</span></div>
<div class="line">    system-&gt;ReleaseInstance();</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Done! Press Enter to exit...&quot;</span> &lt;&lt; endl;</div>
<div class="line">    getchar();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->

  <table style="width: 100%;border-spacing: 0px 0px;border-left-style: solid;border-left-width: ;border-left-color: #8c8888;border-right-style: solid;border-right-width: ;border-right-color: #8c8888;border-top-style: solid;border-top-width: ;border-top-color: #8c8888;border-bottom-style: solid;border-bottom-width: ;border-bottom-color: #8c8888;margin-left: 0;margin-right: auto;padding: 0px">
    <col />
    <col />
    <col />
        <tbody>
            <tr>
                <td style="background-color: #8c8888;color: #ffffff;"><a class="footer" href="https://www.flir.com/support-center/rma/iis-support-request">Contact Support </a> </td>
                <td style="background-color: #8c8888;color: #ffffff;text-align: center;font-size: 16px;font-weight: bold">Spinnaker&#174; SDK Programmer's Guide and API Reference</td>
                <td style="background-color: #8c8888;color: #ffffff;text-align: right;"><address class="footer">
Wed Sep 30 2020 &#160;© <a class="footer" href="https://www.flir.com/iis/machine-vision">FLIR Integrated Imaging Solutions Inc. All rights reserved.</a></address></td>
            </tr>
        </tbody>
  </table>
</body>
</html>
