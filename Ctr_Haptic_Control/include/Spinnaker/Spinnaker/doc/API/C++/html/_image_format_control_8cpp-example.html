<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <title>Spinnaker C++: ImageFormatControl.cpp</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="ga.js"></script>
  <link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <div id="top"><!-- do not remove this div! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0.9em" width="100%">
      <tbody>
        <tr style="height: 56px;">
          <td id="projectlogo" style="padding-left: 0.9em;text-align: left;background: #ffffff;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><a href="https://www.flir.com/iis/machine-vision"><img alt="Logo" src="FLIR_Logo.png"/></a></td>
          <td style="padding-left: 0.5em;text-align: left;background: #002f86;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><div id="projectname">Spinnaker C++</div></td>
          <td style="padding-right: 0.9em;text-align: right;background: #002f86;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><div id="projectname"><span id="projectnumber">2.0.0.0</span></td>
        </tr>
      </tbody>
    </table>
  </div>
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ImageFormatControl.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p><a class="el" href="_image_format_control_8cpp.html">ImageFormatControl.cpp</a> shows how to apply custom image settings to the camera. It relies on information provided in the Enumeration, Acquisition, and NodeMapInfo examples.</p>
<p>This example demonstrates setting minimums to offsets, X and Y, and maximums to width and height. It also shows the setting of a new pixel format, which is an enumeration type node.</p>
<p>Following this, we suggest familiarizing yourself with the Exposure example if you haven't already. Exposure is another example on camera customization that is shorter and simpler than many of the others. Once comfortable with Exposure and ImageFormatControl, we suggest checking out any of the longer, more complicated examples related to camera configuration: ChunkData, LookupTable, Sequencer, or Trigger.</p>
<div class="fragment"><div class="line"><span class="comment">//=============================================================================</span></div>
<div class="line"><span class="comment">// Copyright (c) 2001-2019 FLIR Systems, Inc. All Rights Reserved.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// This software is the confidential and proprietary information of FLIR</span></div>
<div class="line"><span class="comment">// Integrated Imaging Solutions, Inc. (&quot;Confidential Information&quot;). You</span></div>
<div class="line"><span class="comment">// shall not disclose such Confidential Information and shall use it only in</span></div>
<div class="line"><span class="comment">// accordance with the terms of the license agreement you entered into</span></div>
<div class="line"><span class="comment">// with FLIR Integrated Imaging Solutions, Inc. (FLIR).</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// FLIR MAKES NO REPRESENTATIONS OR WARRANTIES ABOUT THE SUITABILITY OF THE</span></div>
<div class="line"><span class="comment">// SOFTWARE, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE</span></div>
<div class="line"><span class="comment">// IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR</span></div>
<div class="line"><span class="comment">// PURPOSE, OR NON-INFRINGEMENT. FLIR SHALL NOT BE LIABLE FOR ANY DAMAGES</span></div>
<div class="line"><span class="comment">// SUFFERED BY LICENSEE AS A RESULT OF USING, MODIFYING OR DISTRIBUTING</span></div>
<div class="line"><span class="comment">// THIS SOFTWARE OR ITS DERIVATIVES.</span></div>
<div class="line"><span class="comment">//=============================================================================</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_spinnaker_8h.html">Spinnaker.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_spinnaker_gen_api_8h.html">SpinGenApi/SpinnakerGenApi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker;</div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker::GenApi;</div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker::GenICam;</div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function configures a number of settings on the camera including offsets</span></div>
<div class="line"><span class="comment">// X and Y, width, height, and pixel format. These settings must be applied before</span></div>
<div class="line"><span class="comment">// BeginAcquisition() is called; otherwise, they will be read only. Also, it is</span></div>
<div class="line"><span class="comment">// important to note that settings are applied immediately. This means if you plan</span></div>
<div class="line"><span class="comment">// to reduce the width and move the x offset accordingly, you need to apply such</span></div>
<div class="line"><span class="comment">// changes in the appropriate order.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a0"></a><a class="code" href="_image_format_control_8cpp.html#a71d25b37ac93b9956d55c783277b0b68">ConfigureCustomImageSettings</a>(<a name="a1"></a><a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;*** CONFIGURING CUSTOM IMAGE SETTINGS ***&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Apply mono 8 pixel format</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// Enumeration nodes are slightly more complicated to set than other</span></div>
<div class="line">        <span class="comment">// nodes. This is because setting an enumeration node requires working</span></div>
<div class="line">        <span class="comment">// with two nodes instead of the usual one.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// As such, there are a number of steps to setting an enumeration node:</span></div>
<div class="line">        <span class="comment">// retrieve the enumeration node from the nodemap, retrieve the desired</span></div>
<div class="line">        <span class="comment">// entry node from the enumeration node, retrieve the integer value from</span></div>
<div class="line">        <span class="comment">// the entry node, and set the new value of the enumeration node with</span></div>
<div class="line">        <span class="comment">// the integer value from the entry node.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Retrieve the enumeration node from the nodemap</span></div>
<div class="line">        <a name="_a2"></a><a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumerationPtr</a> ptrPixelFormat = nodeMap.GetNode(<span class="stringliteral">&quot;PixelFormat&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a3"></a><a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrPixelFormat) &amp;&amp; <a name="a4"></a><a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrPixelFormat))</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Retrieve the desired entry node from the enumeration node</span></div>
<div class="line">            <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrPixelFormatMono8 = ptrPixelFormat-&gt;GetEntryByName(<span class="stringliteral">&quot;Mono8&quot;</span>);</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrPixelFormatMono8) &amp;&amp; <a name="a5"></a><a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrPixelFormatMono8))</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Retrieve the integer value from the entry node</span></div>
<div class="line">                int64_t pixelFormatMono8 = ptrPixelFormatMono8-&gt;GetValue();</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Set integer as new value for enumeration node</span></div>
<div class="line">                ptrPixelFormat-&gt;SetIntValue(pixelFormatMono8);</div>
<div class="line"></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Pixel format set to &quot;</span> &lt;&lt; ptrPixelFormat-&gt;GetCurrentEntry()-&gt;GetSymbolic() &lt;&lt; <span class="stringliteral">&quot;...&quot;</span> &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Pixel format mono 8 not available...&quot;</span> &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Pixel format not available...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Apply minimum to offset X</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// Numeric nodes have both a minimum and maximum. A minimum is retrieved</span></div>
<div class="line">        <span class="comment">// with the method GetMin(). Sometimes it can be important to check</span></div>
<div class="line">        <span class="comment">// minimums to ensure that your desired value is within range.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CIntegerPtr</a> ptrOffsetX = nodeMap.GetNode(<span class="stringliteral">&quot;OffsetX&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrOffsetX) &amp;&amp; <a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrOffsetX))</div>
<div class="line">        {</div>
<div class="line">            ptrOffsetX-&gt;SetValue(ptrOffsetX-&gt;GetMin());</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Offset X set to &quot;</span> &lt;&lt; ptrOffsetX-&gt;GetMin() &lt;&lt; <span class="stringliteral">&quot;...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Offset X not available...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Apply minimum to offset Y</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// It is often desirable to check the increment as well. The increment</span></div>
<div class="line">        <span class="comment">// is a number of which a desired value must be a multiple of. Certain</span></div>
<div class="line">        <span class="comment">// nodes, such as those corresponding to offsets X and Y, have an</span></div>
<div class="line">        <span class="comment">// increment of 1, which basically means that any value within range</span></div>
<div class="line">        <span class="comment">// is appropriate. The increment is retrieved with the method GetInc().</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CIntegerPtr</a> ptrOffsetY = nodeMap.GetNode(<span class="stringliteral">&quot;OffsetY&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrOffsetY) &amp;&amp; <a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrOffsetY))</div>
<div class="line">        {</div>
<div class="line">            ptrOffsetY-&gt;SetValue(ptrOffsetY-&gt;GetMin());</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Offset Y set to &quot;</span> &lt;&lt; ptrOffsetY-&gt;GetValue() &lt;&lt; <span class="stringliteral">&quot;...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Offset Y not available...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Set maximum width</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// Other nodes, such as those corresponding to image width and height,</span></div>
<div class="line">        <span class="comment">// might have an increment other than 1. In these cases, it can be</span></div>
<div class="line">        <span class="comment">// important to check that the desired value is a multiple of the</span></div>
<div class="line">        <span class="comment">// increment. However, as these values are being set to the maximum,</span></div>
<div class="line">        <span class="comment">// there is no reason to check against the increment.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CIntegerPtr</a> ptrWidth = nodeMap.GetNode(<span class="stringliteral">&quot;Width&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrWidth) &amp;&amp; <a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrWidth))</div>
<div class="line">        {</div>
<div class="line">            int64_t widthToSet = ptrWidth-&gt;GetMax();</div>
<div class="line"></div>
<div class="line">            ptrWidth-&gt;SetValue(widthToSet);</div>
<div class="line"></div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Width set to &quot;</span> &lt;&lt; ptrWidth-&gt;GetValue() &lt;&lt; <span class="stringliteral">&quot;...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Width not available...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Set maximum height</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// A maximum is retrieved with the method GetMax(). A node&#39;s minimum and</span></div>
<div class="line">        <span class="comment">// maximum should always be a multiple of its increment.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CIntegerPtr</a> ptrHeight = nodeMap.GetNode(<span class="stringliteral">&quot;Height&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrHeight) &amp;&amp; <a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrHeight))</div>
<div class="line">        {</div>
<div class="line">            int64_t heightToSet = ptrHeight-&gt;GetMax();</div>
<div class="line"></div>
<div class="line">            ptrHeight-&gt;SetValue(heightToSet);</div>
<div class="line"></div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Height set to &quot;</span> &lt;&lt; ptrHeight-&gt;GetValue() &lt;&lt; <span class="stringliteral">&quot;...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Height not available...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a name="_a6"></a><a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a name="a7"></a><a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function prints the device information of the camera from the transport</span></div>
<div class="line"><span class="comment">// layer; please see NodeMapInfo example for more in-depth comments on printing</span></div>
<div class="line"><span class="comment">// device information from the nodemap.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a8"></a><a class="code" href="_acquisition_8cpp.html#a9a1864412533965fa228b758488637fd">PrintDeviceInfo</a>(<a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;*** DEVICE INFORMATION ***&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        FeatureList_t features;</div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CCategoryPtr</a> category = nodeMap.GetNode(<span class="stringliteral">&quot;DeviceInformation&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(category) &amp;&amp; <a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(category))</div>
<div class="line">        {</div>
<div class="line">            category-&gt;GetFeatures(features);</div>
<div class="line"></div>
<div class="line">            FeatureList_t::const_iterator it;</div>
<div class="line">            <span class="keywordflow">for</span> (it = features.begin(); it != features.end(); ++it)</div>
<div class="line">            {</div>
<div class="line">                <a name="_a9"></a><a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CNodePtr</a> pfeatureNode = *it;</div>
<div class="line">                cout &lt;&lt; pfeatureNode-&gt;GetName() &lt;&lt; <span class="stringliteral">&quot; : &quot;</span>;</div>
<div class="line">                <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CValuePtr</a> pValue = (<a name="a10"></a><a class="code" href="group___pointer__h.html#ga17eabe67b4e0d8b7e2d794239a9c2084">CValuePtr</a>)pfeatureNode;</div>
<div class="line">                cout &lt;&lt; (<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(pValue) ? pValue-&gt;ToString() : <span class="stringliteral">&quot;Node not readable&quot;</span>);</div>
<div class="line">                cout &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Device control information not available.&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function acquires and saves 10 images from a device; please see</span></div>
<div class="line"><span class="comment">// Acquisition example for more in-depth comments on acquiring images.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a11"></a><a class="code" href="_acquisition_8cpp.html#a2836a024d3f74c4699c84267163c70aa">AcquireImages</a>(<a name="_a12"></a><a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam, <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap, <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMapTLDevice)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;*** IMAGE ACQUISITION ***&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Set acquisition mode to continuous</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumerationPtr</a> ptrAcquisitionMode = nodeMap.GetNode(<span class="stringliteral">&quot;AcquisitionMode&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrAcquisitionMode) || !<a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrAcquisitionMode))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set acquisition mode to continuous (node retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrAcquisitionModeContinuous = ptrAcquisitionMode-&gt;GetEntryByName(<span class="stringliteral">&quot;Continuous&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrAcquisitionModeContinuous) || !<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrAcquisitionModeContinuous))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set acquisition mode to continuous (entry &#39;continuous&#39; retrieval). Aborting...&quot;</span> &lt;&lt; endl</div>
<div class="line">                 &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        int64_t acquisitionModeContinuous = ptrAcquisitionModeContinuous-&gt;GetValue();</div>
<div class="line"></div>
<div class="line">        ptrAcquisitionMode-&gt;SetIntValue(acquisitionModeContinuous);</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Acquisition mode set to continuous...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Begin acquiring images</span></div>
<div class="line">        pCam-&gt;BeginAcquisition();</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Acquiring images...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve device serial number for filename</span></div>
<div class="line">        <a name="_a13"></a><a class="code" href="class_spinnaker_1_1_gen_i_cam_1_1gcstring.html">gcstring</a> deviceSerialNumber(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CStringPtr</a> ptrStringSerial = nodeMapTLDevice.GetNode(<span class="stringliteral">&quot;DeviceSerialNumber&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrStringSerial) &amp;&amp; <a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrStringSerial))</div>
<div class="line">        {</div>
<div class="line">            deviceSerialNumber = ptrStringSerial-&gt;GetValue();</div>
<div class="line"></div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Device serial number retrieved as &quot;</span> &lt;&lt; deviceSerialNumber &lt;&lt; <span class="stringliteral">&quot;...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        cout &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve, convert, and save images</span></div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k_numImages = 10;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> imageCnt = 0; imageCnt &lt; k_numImages; imageCnt++)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">try</span></div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Retrieve next received image and ensure image completion</span></div>
<div class="line">                <a name="_a14"></a><a class="code" href="class_spinnaker_1_1_image_ptr.html">ImagePtr</a> pResultImage = pCam-&gt;GetNextImage(1000);</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (pResultImage-&gt;IsIncomplete())</div>
<div class="line">                {</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Image incomplete with image status &quot;</span> &lt;&lt; pResultImage-&gt;GetImageStatus() &lt;&lt; <span class="stringliteral">&quot;...&quot;</span> &lt;&lt; endl</div>
<div class="line">                         &lt;&lt; endl;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">// Print image information</span></div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Grabbed image &quot;</span> &lt;&lt; imageCnt &lt;&lt; <span class="stringliteral">&quot;, width = &quot;</span> &lt;&lt; pResultImage-&gt;GetWidth()</div>
<div class="line">                         &lt;&lt; <span class="stringliteral">&quot;, height = &quot;</span> &lt;&lt; pResultImage-&gt;GetHeight() &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Convert image to mono 8</span></div>
<div class="line">                    <a class="code" href="class_spinnaker_1_1_image_ptr.html">ImagePtr</a> convertedImage = pResultImage-&gt;Convert(<a name="a15"></a><a class="code" href="group___camera_defs__h.html#ggabd5af55aaa20bcb0644c46241c2cbad1aab73a79118b4db06f577b5e2563d7246">PixelFormat_Mono8</a>, <a name="a16"></a><a class="code" href="group___spinnaker_defs.html#ggab8d72f72c9674cab70d99975691eb54da6adb68dc4a36540a66f86addd3e70e90">HQ_LINEAR</a>);</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Create a unique filename</span></div>
<div class="line">                    ostringstream filename;</div>
<div class="line"></div>
<div class="line">                    filename &lt;&lt; <span class="stringliteral">&quot;ImageFormatControl-&quot;</span>;</div>
<div class="line">                    <span class="keywordflow">if</span> (deviceSerialNumber != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line">                    {</div>
<div class="line">                        filename &lt;&lt; deviceSerialNumber.c_str() &lt;&lt; <span class="stringliteral">&quot;-&quot;</span>;</div>
<div class="line">                    }</div>
<div class="line">                    filename &lt;&lt; imageCnt &lt;&lt; <span class="stringliteral">&quot;.jpg&quot;</span>;</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Save image</span></div>
<div class="line">                    convertedImage-&gt;Save(filename.str().c_str());</div>
<div class="line"></div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Image saved at &quot;</span> &lt;&lt; filename.str() &lt;&lt; endl;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Release image</span></div>
<div class="line">                pResultImage-&gt;Release();</div>
<div class="line"></div>
<div class="line">                cout &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">                result = -1;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// End acquisition</span></div>
<div class="line">        pCam-&gt;EndAcquisition();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function acts as the body of the example; please see NodeMapInfo example</span></div>
<div class="line"><span class="comment">// for more in-depth comments on setting up cameras.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a17"></a><a class="code" href="_acquisition_8cpp.html#a86462e15d417b9982cead96d2e8a8616">RunSingleCamera</a>(<a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line">    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Retrieve TL device nodemap and print device information</span></div>
<div class="line">        <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMapTLDevice = pCam-&gt;GetTLDeviceNodeMap();</div>
<div class="line"></div>
<div class="line">        result = <a class="code" href="_acquisition_8cpp.html#a9a1864412533965fa228b758488637fd">PrintDeviceInfo</a>(nodeMapTLDevice);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Initialize camera</span></div>
<div class="line">        pCam-&gt;Init();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve GenICam nodemap</span></div>
<div class="line">        <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap = pCam-&gt;GetNodeMap();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Configure custom image settings</span></div>
<div class="line">        err = <a class="code" href="_image_format_control_8cpp.html#a71d25b37ac93b9956d55c783277b0b68">ConfigureCustomImageSettings</a>(nodeMap);</div>
<div class="line">        <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> err;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Acquire images</span></div>
<div class="line">        result = result | <a class="code" href="_acquisition_8cpp.html#a2836a024d3f74c4699c84267163c70aa">AcquireImages</a>(pCam, nodeMap, nodeMapTLDevice);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Deinitialize camera</span></div>
<div class="line">        pCam-&gt;DeInit();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Example entry point; please see Enumeration example for additional</span></div>
<div class="line"><span class="comment">// comments on the steps in this function.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a18"></a><a class="code" href="_acquisition_8cpp.html#a2c3f6775325c30275d11c6abee2db6a0">main</a>(<span class="keywordtype">int</span> <span class="comment">/*argc*/</span>, <span class="keywordtype">char</span>** <span class="comment">/*argv*/</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Since this application saves images in the current folder</span></div>
<div class="line">    <span class="comment">// we must ensure that we have permission to write to this folder.</span></div>
<div class="line">    <span class="comment">// If we do not have permission, fail right away.</span></div>
<div class="line">    FILE* tempFile = fopen(<span class="stringliteral">&quot;test.txt&quot;</span>, <span class="stringliteral">&quot;w+&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (tempFile == <span class="keyword">nullptr</span>)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Failed to create file in current folder.  Please check &quot;</span></div>
<div class="line">                <span class="stringliteral">&quot;permissions.&quot;</span></div>
<div class="line">             &lt;&lt; endl;</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Press Enter to exit...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        getchar();</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    fclose(tempFile);</div>
<div class="line">    <span class="keyword">remove</span>(<span class="stringliteral">&quot;test.txt&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Print Application Build Information</span></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Application build date: &quot;</span> &lt;&lt; __DATE__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; __TIME__ &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Retrieve singleton reference to system object</span></div>
<div class="line">    <a name="_a19"></a><a class="code" href="class_spinnaker_1_1_system_ptr.html">SystemPtr</a> system = <a name="a20"></a><a class="code" href="class_spinnaker_1_1_system.html#a45b5dbcde6e9fdfb05e0016af82969d0">System::GetInstance</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Print out current library version</span></div>
<div class="line">    <span class="keyword">const</span> <a name="_a21"></a><a class="code" href="struct_spinnaker_1_1_library_version.html">LibraryVersion</a> spinnakerLibraryVersion = system-&gt;GetLibraryVersion();</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Spinnaker library version: &quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a22"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#a435ca80707c851bea186e73a1be5d3b9">major</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a23"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#a41c0e171b65e16617977006e58fbbbc5">minor</a></div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a24"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#a4bfea42429249a1f65204f0c0f34704a">type</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a25"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#ad263db2963cb8e231c207328372e17bb">build</a> &lt;&lt; endl</div>
<div class="line">         &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Retrieve list of cameras from the system</span></div>
<div class="line">    <a name="_a26"></a><a class="code" href="class_spinnaker_1_1_camera_list.html">CameraList</a> camList = system-&gt;GetCameras();</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numCameras = camList.<a name="a27"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#a7d1646dc12416daf821f666c233d2be2">GetSize</a>();</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Number of cameras detected: &quot;</span> &lt;&lt; numCameras &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Finish if there are no cameras</span></div>
<div class="line">    <span class="keywordflow">if</span> (numCameras == 0)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Release camera list before releasing system</span></div>
<div class="line">        camList.<a name="a28"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Release system</span></div>
<div class="line">        system-&gt;ReleaseInstance();</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Not enough cameras!&quot;</span> &lt;&lt; endl;</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Done! Press Enter to exit...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        getchar();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Run example on each camera</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numCameras; i++)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Running example for camera &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        result = result | <a class="code" href="_acquisition_8cpp.html#a86462e15d417b9982cead96d2e8a8616">RunSingleCamera</a>(camList.<a name="a29"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#aa372308b62098bc12ad25ee02dd11a48">GetByIndex</a>(i));</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Camera &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; example complete...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Release camera list before releasing system</span></div>
<div class="line">    camList.<a class="code" href="class_spinnaker_1_1_camera_list.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Release system</span></div>
<div class="line">    system-&gt;ReleaseInstance();</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Done! Press Enter to exit...&quot;</span> &lt;&lt; endl;</div>
<div class="line">    getchar();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->

  <table style="width: 100%;border-spacing: 0px 0px;border-left-style: solid;border-left-width: ;border-left-color: #8c8888;border-right-style: solid;border-right-width: ;border-right-color: #8c8888;border-top-style: solid;border-top-width: ;border-top-color: #8c8888;border-bottom-style: solid;border-bottom-width: ;border-bottom-color: #8c8888;margin-left: 0;margin-right: auto;padding: 0px">
    <col />
    <col />
    <col />
        <tbody>
            <tr>
                <td style="background-color: #8c8888;color: #ffffff;"><a class="footer" href="https://www.flir.com/support-center/rma/iis-support-request">Contact Support </a> </td>
                <td style="background-color: #8c8888;color: #ffffff;text-align: center;font-size: 16px;font-weight: bold">Spinnaker&#174; SDK Programmer's Guide and API Reference</td>
                <td style="background-color: #8c8888;color: #ffffff;text-align: right;"><address class="footer">
Wed Sep 30 2020 &#160;© <a class="footer" href="https://www.flir.com/iis/machine-vision">FLIR Integrated Imaging Solutions Inc. All rights reserved.</a></address></td>
            </tr>
        </tbody>
  </table>
</body>
</html>
