<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <title>Spinnaker C++: EnumerationEvents.cpp</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="ga.js"></script>
  <link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <div id="top"><!-- do not remove this div! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0.9em" width="100%">
      <tbody>
        <tr style="height: 56px;">
          <td id="projectlogo" style="padding-left: 0.9em;text-align: left;background: #ffffff;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><a href="https://www.flir.com/iis/machine-vision"><img alt="Logo" src="FLIR_Logo.png"/></a></td>
          <td style="padding-left: 0.5em;text-align: left;background: #002f86;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><div id="projectname">Spinnaker C++</div></td>
          <td style="padding-right: 0.9em;text-align: right;background: #002f86;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><div id="projectname"><span id="projectnumber">2.0.0.0</span></td>
        </tr>
      </tbody>
    </table>
  </div>
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">EnumerationEvents.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p><a class="el" href="_enumeration_events_8cpp.html">EnumerationEvents.cpp</a> explores arrival and removal events on interfaces and the system. It relies on information provided in the Enumeration, Acquisition, and NodeMapInfo examples.</p>
<p>It can also be helpful to familiarize yourself with the NodeMapCallback example, as nodemap callbacks follow the same general procedure as events, but with a few less steps.</p>
<p>This example creates two user-defined classes: <a class="el" href="class_interface_event_handler_impl.html">InterfaceEventHandlerImpl</a> and <a class="el" href="class_system_event_handler_impl.html">SystemEventHandlerImpl</a>. These child classes allow the user to define properties, parameters, and the event itself while the parent classes - DeviceArrivalEventHandler, DeviceRemovalEventHandler, and InterfaceEventHandler - allow the child classes to interface with <a class="el" href="namespace_spinnaker.html">Spinnaker</a>.</p>
<div class="fragment"><div class="line"><span class="comment">//=============================================================================</span></div>
<div class="line"><span class="comment">// Copyright (c) 2001-2019 FLIR Systems, Inc. All Rights Reserved.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// This software is the confidential and proprietary information of FLIR</span></div>
<div class="line"><span class="comment">// Integrated Imaging Solutions, Inc. (&quot;Confidential Information&quot;). You</span></div>
<div class="line"><span class="comment">// shall not disclose such Confidential Information and shall use it only in</span></div>
<div class="line"><span class="comment">// accordance with the terms of the license agreement you entered into</span></div>
<div class="line"><span class="comment">// with FLIR Integrated Imaging Solutions, Inc. (FLIR).</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// FLIR MAKES NO REPRESENTATIONS OR WARRANTIES ABOUT THE SUITABILITY OF THE</span></div>
<div class="line"><span class="comment">// SOFTWARE, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE</span></div>
<div class="line"><span class="comment">// IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR</span></div>
<div class="line"><span class="comment">// PURPOSE, OR NON-INFRINGEMENT. FLIR SHALL NOT BE LIABLE FOR ANY DAMAGES</span></div>
<div class="line"><span class="comment">// SUFFERED BY LICENSEE AS A RESULT OF USING, MODIFYING OR DISTRIBUTING</span></div>
<div class="line"><span class="comment">// THIS SOFTWARE OR ITS DERIVATIVES.</span></div>
<div class="line"><span class="comment">//=============================================================================</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_spinnaker_8h.html">Spinnaker.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_spinnaker_gen_api_8h.html">SpinGenApi/SpinnakerGenApi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><span class="preprocessor">#if _MSC_VER != 1600</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#include &lt;mutex&gt;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker;</div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker::GenApi;</div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker::GenICam;</div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"></div>
<div class="line"><span class="comment">// This class defines the properties and functions for device arrivals and removals</span></div>
<div class="line"><span class="comment">// on an interface. Take special note of the signatures of the OnDeviceArrival()</span></div>
<div class="line"><span class="comment">// and OnDeviceRemoval() methods. Also, enumeration event handlers must inherit at least</span></div>
<div class="line"><span class="comment">// one of the three event types - DeviceArrivalEventHandler, DeviceRemovalEventHandler, and InterfaceEventHandler</span></div>
<div class="line"><span class="comment">// if they are to be registered to interfaces, the system, or both.</span></div>
<div class="line"><span class="keyword">class </span><a name="_a0"></a><a class="code" href="class_interface_event_handler_impl.html">InterfaceEventHandlerImpl</a> : <span class="keyword">public</span> <a name="_a1"></a><a class="code" href="class_spinnaker_1_1_interface_event_handler.html">InterfaceEventHandler</a></div>
<div class="line">{</div>
<div class="line">  <span class="keyword">public</span>:</div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Set the constructor and destructor</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// *** NOTES ***</span></div>
<div class="line">    <span class="comment">// When constructing a generic InterfaceEventHandler to be registered to the system,</span></div>
<div class="line">    <span class="comment">// the handler will not have knowledge of which interface triggered the event callbacks.</span></div>
<div class="line">    <span class="comment">// On the other hand, InterfaceEventHandlerImpl does not need knowledge about the system if we</span></div>
<div class="line">    <span class="comment">// are constructing it to be registered to a specific interface.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <a class="code" href="class_interface_event_handler_impl.html">InterfaceEventHandlerImpl</a>(<a name="_a2"></a><a class="code" href="class_spinnaker_1_1_system_ptr.html">SystemPtr</a> system)</div>
<div class="line">        : m_system(system), m_interface(<span class="keyword">nullptr</span>), m_interfaceID(<span class="stringliteral">&quot;&quot;</span>), m_registerToSystem(<span class="keyword">true</span>){};</div>
<div class="line"></div>
<div class="line">    <a class="code" href="class_interface_event_handler_impl.html">InterfaceEventHandlerImpl</a>(<a name="_a3"></a><a class="code" href="class_spinnaker_1_1_interface_ptr.html">InterfacePtr</a> iface, std::string interfaceID)</div>
<div class="line">        : m_system(<span class="keyword">nullptr</span>), m_interface(iface), m_interfaceID(interfaceID), m_registerToSystem(<span class="keyword">false</span>){};</div>
<div class="line"></div>
<div class="line">    ~<a class="code" href="class_interface_event_handler_impl.html">InterfaceEventHandlerImpl</a>(){};</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Helper function to print the number of devices on an interface event registered to the system.</span></div>
<div class="line">    <span class="comment">// Note: Using strings in event print statements prevents text from overlapping in the console output</span></div>
<div class="line">    <span class="keywordtype">void</span> PrintGenericHandlerMessage(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> deviceCount)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Generic interface event handler:\n&quot;</span>;</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">bool</span> singular = deviceCount == 1;</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">string</span> genericMsg = <span class="stringliteral">&quot;\tThere &quot;</span> + string(singular ? <span class="stringliteral">&quot;is &quot;</span> : <span class="stringliteral">&quot;are &quot;</span>) + to_string(deviceCount) +</div>
<div class="line">                                  string(singular ? <span class="stringliteral">&quot; device &quot;</span> : <span class="stringliteral">&quot; devices &quot;</span>) + <span class="stringliteral">&quot;on the system.\n&quot;</span>;</div>
<div class="line">        cout &lt;&lt; genericMsg &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// This function defines the arrival event handler on an interface. It prints out</span></div>
<div class="line">    <span class="comment">// the device serial number of the camera arriving and the interface</span></div>
<div class="line">    <span class="comment">// number. The argument is the serial number of the camera that triggered</span></div>
<div class="line">    <span class="comment">// the arrival event.</span></div>
<div class="line">    <span class="comment">// If the event handler was constructed to be registered to the system as a generic</span></div>
<div class="line">    <span class="comment">// InterfaceEventHandler, then we just retrieve the number of cameras</span></div>
<div class="line">    <span class="comment">// currently connected on the system and print it out.</span></div>
<div class="line">    <span class="keywordtype">void</span> OnDeviceArrival(uint64_t deviceSerialNumber)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (m_registerToSystem)</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> deviceCount = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span><span class="keyword">&gt;</span>(m_system-&gt;GetCameras().GetSize());</div>
<div class="line">            PrintGenericHandlerMessage(deviceCount);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Interface event handler:\n&quot;</span>;</div>
<div class="line">            <span class="keyword">const</span> std::string arrivalMsg = <span class="stringliteral">&quot;\tDevice &quot;</span> + std::to_string(deviceSerialNumber) +</div>
<div class="line">                                           <span class="stringliteral">&quot; has arrived on interface &#39;&quot;</span> + m_interfaceID + <span class="stringliteral">&quot;&#39;.\n&quot;</span>;</div>
<div class="line">            cout &lt;&lt; arrivalMsg &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// This function defines removal event handlers on an interface. It prints out the</span></div>
<div class="line">    <span class="comment">// device serial number of the camera being removed and the interface</span></div>
<div class="line">    <span class="comment">// number. The argument is the serial number of the camera that triggered</span></div>
<div class="line">    <span class="comment">// the removal event.</span></div>
<div class="line">    <span class="comment">// If the event handler was constructed to be registered to the system as a generic</span></div>
<div class="line">    <span class="comment">// InterfaceEventHandler, then we just retrieve the number of cameras</span></div>
<div class="line">    <span class="comment">// currently connected on the system and print it out.</span></div>
<div class="line">    <span class="keywordtype">void</span> OnDeviceRemoval(uint64_t deviceSerialNumber)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (m_registerToSystem)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">try</span></div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// At this point the interface that the camera is connected to</span></div>
<div class="line">                <span class="comment">// may have been removed as well, so we need to handle</span></div>
<div class="line">                <span class="comment">// potential exceptions when calling GetCameras().</span></div>
<div class="line">                <span class="keyword">const</span> <span class="keyword">auto</span> deviceCount = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span><span class="keyword">&gt;</span>(m_system-&gt;GetCameras().GetSize());</div>
<div class="line">                PrintGenericHandlerMessage(deviceCount);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">catch</span> (<a name="_a4"></a><a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Error updating cameras: &quot;</span> &lt;&lt; e.<a name="a5"></a><a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Interface event handler:\n&quot;</span>;</div>
<div class="line">            <span class="keyword">const</span> std::string removalMsg = <span class="stringliteral">&quot;\tDevice &quot;</span> + std::to_string(deviceSerialNumber) +</div>
<div class="line">                                           <span class="stringliteral">&quot; was removed from interface &#39;&quot;</span> + m_interfaceID + <span class="stringliteral">&quot;&#39;.\n&quot;</span>;</div>
<div class="line">            cout &lt;&lt; removalMsg &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// This function returns the interface ID that the interface event handler is bound to.</span></div>
<div class="line">    std::string GetInterfaceId()</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> m_interfaceID;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">  <span class="keyword">private</span>:</div>
<div class="line">    <a class="code" href="class_spinnaker_1_1_system_ptr.html">SystemPtr</a> m_system;</div>
<div class="line">    <a class="code" href="class_spinnaker_1_1_interface_ptr.html">InterfacePtr</a> m_interface;</div>
<div class="line">    std::string m_interfaceID;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">bool</span> m_registerToSystem;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">// This class defines the properties and methods for interface arrivals and removals</span></div>
<div class="line"><span class="comment">// on the system. Take special note of the signatures of the OnInterfaceArrival()</span></div>
<div class="line"><span class="comment">// and OnInterfaceRemoval() methods. Interface enumeration event handlers must inherit from</span></div>
<div class="line"><span class="comment">// SystemEventHandler.</span></div>
<div class="line"><span class="keyword">class </span><a name="_a6"></a><a class="code" href="class_system_event_handler_impl.html">SystemEventHandlerImpl</a> : <span class="keyword">public</span> <a name="_a7"></a><a class="code" href="class_spinnaker_1_1_system_event_handler.html">SystemEventHandler</a></div>
<div class="line">{</div>
<div class="line">  <span class="keyword">public</span>:</div>
<div class="line">    <a class="code" href="class_system_event_handler_impl.html">SystemEventHandlerImpl</a>(<a class="code" href="class_spinnaker_1_1_system_ptr.html">SystemPtr</a> system) : m_system(system)</div>
<div class="line">    {</div>
<div class="line"><span class="preprocessor">#if _MSC_VER == 1600</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="comment">// Initialize the mutex for Visual Studio 2010</span></div>
<div class="line">        eventHandlersMutex = CreateMutex(NULL, <span class="keyword">false</span>, NULL);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>    };</div>
<div class="line"></div>
<div class="line">    ~<a class="code" href="class_system_event_handler_impl.html">SystemEventHandlerImpl</a>(){};</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Helper function to lock the eventhandler mutex as std::mutex is not available for vs 2010</span></div>
<div class="line">    <span class="keywordtype">void</span> LockEventHandlerMutex()</div>
<div class="line">    {</div>
<div class="line"><span class="preprocessor">#if _MSC_VER == 1600</span></div>
<div class="line"><span class="preprocessor"></span>        WaitForSingleObject(eventHandlersMutex, INFINITE);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>        eventHandlersMutex.lock();</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Helper function to unlock the eventhandler mutex as std::mutex is not available for vs 2010</span></div>
<div class="line">    <span class="keywordtype">void</span> UnlockEventHandlerMutex()</div>
<div class="line">    {</div>
<div class="line"><span class="preprocessor">#if _MSC_VER == 1600</span></div>
<div class="line"><span class="preprocessor"></span>        ReleaseMutex(eventHandlersMutex);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>        eventHandlersMutex.unlock();</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// This method defines the interface arrival event on the system.</span></div>
<div class="line">    <span class="comment">// It first prints the ID of the arriving interface, then</span></div>
<div class="line">    <span class="comment">// registers the interface event on the newly arrived interface.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// *** NOTES ***</span></div>
<div class="line">    <span class="comment">// Only arrival events for GEV interfaces are currently supported.</span></div>
<div class="line">    <span class="keywordtype">void</span> OnInterfaceArrival(std::string interfaceID)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;System event handler:\n&quot;</span>;</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">string</span> arrivalMsg = <span class="stringliteral">&quot;\tInterface &#39;&quot;</span> + interfaceID + <span class="stringliteral">&quot;&#39; has arrived on the system.\n&quot;</span>;</div>
<div class="line">        cout &lt;&lt; arrivalMsg &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// UpdateInterfaceList() only updates newly arrived or newly removed interfaces.</span></div>
<div class="line">        <span class="comment">// In particular, after this call:</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// - Any pre-existing interfaces will still be valid.</span></div>
<div class="line">        <span class="comment">// - Any pointers to newly removed interfaces will be invalid.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// - Invalid pointers will be re-validated if the interface comes back (arrives) with the same interface ID.</span></div>
<div class="line">        <span class="comment">//   If the interface ID changes, you must get a new pointer from the updated interface list.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// - Interface indices used to access an interface with GetInterfaces() may change after updating the interface</span></div>
<div class="line">        <span class="comment">//   list. The interface at a particular index cannot be expected to remain at that index after calling</span></div>
<div class="line">        <span class="comment">//   UpdateInterfaceList().</span></div>
<div class="line">        m_system-&gt;UpdateInterfaceList();</div>
<div class="line"></div>
<div class="line">        <a name="_a8"></a><a class="code" href="class_spinnaker_1_1_interface_list.html">InterfaceList</a> interfaceList = m_system-&gt;GetInterfaces();</div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numInterfaces = interfaceList.<a name="a9"></a><a class="code" href="class_spinnaker_1_1_interface_list.html#a7d1646dc12416daf821f666c233d2be2">GetSize</a>();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Here we go through the new interface list to find the arrived interface</span></div>
<div class="line">        <span class="comment">// and display the cameras connected to the new interface.</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ifaceIdx = 0; ifaceIdx &lt; numInterfaces; ifaceIdx++)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Select interface</span></div>
<div class="line">            <a class="code" href="class_spinnaker_1_1_interface_ptr.html">InterfacePtr</a> pInterface = interfaceList.<a name="a10"></a><a class="code" href="class_spinnaker_1_1_interface_list.html#af9cb1b8a688004e783d03287c1d2a300">GetByIndex</a>(ifaceIdx);</div>
<div class="line">            <a name="a11"></a><a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap = pInterface-&gt;GetTLNodeMap();</div>
<div class="line"></div>
<div class="line">            <span class="keyword">const</span> <a name="_a12"></a><a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CStringPtr</a> interfaceIDNode = nodeMap.GetNode(<span class="stringliteral">&quot;InterfaceID&quot;</span>);</div>
<div class="line">            <span class="comment">// Ensure the node is valid</span></div>
<div class="line">            <span class="keywordflow">if</span> (!<a name="a13"></a><a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(interfaceIDNode) || !<a name="a14"></a><a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(interfaceIDNode))</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (strcmp(interfaceID.c_str(), interfaceIDNode-&gt;GetValue().c_str()) != 0)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <a name="_a15"></a><a class="code" href="class_spinnaker_1_1_camera_list.html">CameraList</a> cameraList = pInterface-&gt;GetCameras();</div>
<div class="line">            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numCameras = cameraList.<a name="a16"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#a7d1646dc12416daf821f666c233d2be2">GetSize</a>();</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> camIdx = 0; camIdx &lt; numCameras; camIdx++)</div>
<div class="line">            {</div>
<div class="line">                <a name="_a17"></a><a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam = cameraList.<a name="a18"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#aa372308b62098bc12ad25ee02dd11a48">GetByIndex</a>(camIdx);</div>
<div class="line">                <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMapTLDevice = pCam-&gt;GetTLDeviceNodeMap();</div>
<div class="line">                <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CStringPtr</a> ptrStringSerial = nodeMapTLDevice.GetNode(<span class="stringliteral">&quot;DeviceSerialNumber&quot;</span>);</div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrStringSerial) &amp;&amp; <a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrStringSerial))</div>
<div class="line">                {</div>
<div class="line">                    <a name="_a19"></a><a class="code" href="class_spinnaker_1_1_gen_i_cam_1_1gcstring.html">gcstring</a> deviceSerialNumber = ptrStringSerial-&gt;GetValue();</div>
<div class="line">                    <span class="keyword">const</span> <span class="keywordtype">string</span> deviceMsg = <span class="stringliteral">&quot;\tDevice &quot;</span> + string(deviceSerialNumber) + <span class="stringliteral">&quot; is connected to interface &#39;&quot;</span> +</div>
<div class="line">                                             interfaceID + <span class="stringliteral">&quot;&#39;.\n&quot;</span>;</div>
<div class="line">                    cout &lt;&lt; deviceMsg &lt;&lt; endl;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Create interface event</span></div>
<div class="line">            {</div>
<div class="line">                LockEventHandlerMutex();</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">try</span></div>
<div class="line">                {</div>
<div class="line">                    shared_ptr&lt;InterfaceEventHandlerImpl&gt; interfaceEventHandler =</div>
<div class="line">                        shared_ptr&lt;InterfaceEventHandlerImpl&gt;(<span class="keyword">new</span> <a class="code" href="class_interface_event_handler_impl.html">InterfaceEventHandlerImpl</a>(pInterface, interfaceID));</div>
<div class="line">                    m_interfaceEventHandlers.push_back(interfaceEventHandler);</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Register interface event</span></div>
<div class="line">                    pInterface-&gt;RegisterEventHandler(*interfaceEventHandler);</div>
<div class="line">                    <span class="keyword">const</span> <span class="keywordtype">string</span> registerMsg = <span class="stringliteral">&quot;Event handler registered to interface &#39;&quot;</span> + interfaceID + <span class="stringliteral">&quot;&#39;...\n&quot;</span>;</div>
<div class="line">                    cout &lt;&lt; registerMsg &lt;&lt; endl;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">catch</span> (exception&amp; e)</div>
<div class="line">                {</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Error registering interface event handler to &#39;&quot;</span> &lt;&lt; interfaceID &lt;&lt; <span class="stringliteral">&quot;&#39; :&quot;</span> &lt;&lt; e.what()</div>
<div class="line">                         &lt;&lt; endl;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                UnlockEventHandlerMutex();</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// This method defines the interface removal event on the system.</span></div>
<div class="line">    <span class="comment">// It prints the ID of the interface removed.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// *** NOTES ***</span></div>
<div class="line">    <span class="comment">// Only removal events for GEV interfaces are currently supported.</span></div>
<div class="line">    <span class="keywordtype">void</span> OnInterfaceRemoval(std::string interfaceID)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;System event handler:\n&quot;</span>;</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">string</span> removalMsg = <span class="stringliteral">&quot;\tInterface &#39;&quot;</span> + interfaceID + <span class="stringliteral">&quot;&#39; was removed from the system.\n&quot;</span>;</div>
<div class="line">        cout &lt;&lt; removalMsg &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Interface indices used to access an interface with GetInterfaces() may change after updating the interface</span></div>
<div class="line">        <span class="comment">// list. The interface at a particular index cannot be expected to remain at that index after calling</span></div>
<div class="line">        <span class="comment">// UpdateInterfaceList().</span></div>
<div class="line">        m_system-&gt;UpdateInterfaceList();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Find the event handler that was registered to the removed interface and delete it.</span></div>
<div class="line">        <span class="comment">// Interface events are automatically unregistered when the interface is removed so it is not necessary to</span></div>
<div class="line">        <span class="comment">// manually unregister them.</span></div>
<div class="line">        {</div>
<div class="line">            LockEventHandlerMutex();</div>
<div class="line">            <span class="keywordflow">try</span></div>
<div class="line">            {</div>
<div class="line">                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> handlerIdx = 0;</div>
<div class="line">                <span class="keywordflow">for</span> (handlerIdx = 0; handlerIdx &lt; m_interfaceEventHandlers.size(); handlerIdx++)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">if</span> (m_interfaceEventHandlers[handlerIdx]-&gt;GetInterfaceId() == interfaceID)</div>
<div class="line">                    {</div>
<div class="line">                        m_interfaceEventHandlers.erase(m_interfaceEventHandlers.begin() + handlerIdx);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">catch</span> (exception&amp; e)</div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Error erasing event hander from interface &#39;&quot;</span> &lt;&lt; interfaceID &lt;&lt; <span class="stringliteral">&quot;&#39; :&quot;</span> &lt;&lt; e.what() &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            UnlockEventHandlerMutex();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> RegisterInterfaceEventToSystem()</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (!m_interfaceEventHandlerOnSystem)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">//</span></div>
<div class="line">            <span class="comment">// Create interface event handler for the system</span></div>
<div class="line">            <span class="comment">//</span></div>
<div class="line">            <span class="comment">// *** NOTES ***</span></div>
<div class="line">            <span class="comment">// The InterfaceEventHandler has been constructed to accept a system object in</span></div>
<div class="line">            <span class="comment">// order to print the number of cameras on the system.</span></div>
<div class="line">            <span class="comment">//</span></div>
<div class="line">            m_interfaceEventHandlerOnSystem =</div>
<div class="line">                shared_ptr&lt;InterfaceEventHandlerImpl&gt;(<span class="keyword">new</span> <a class="code" href="class_interface_event_handler_impl.html">InterfaceEventHandlerImpl</a>(m_system));</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Register interface event handler for the system</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// Arrival, removal, and interface event handlers can all be registered to</span></div>
<div class="line">        <span class="comment">// interfaces or the system. Do not think that interface event handlers can only be</span></div>
<div class="line">        <span class="comment">// registered to an interface. An interface event is merely a combination</span></div>
<div class="line">        <span class="comment">// of an arrival and a removal event.</span></div>
<div class="line">        <span class="comment">// Only arrival and removal events for GEV interfaces are currently supported.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** LATER ***</span></div>
<div class="line">        <span class="comment">// Arrival, removal, and interface event handlers must all be unregistered manually.</span></div>
<div class="line">        <span class="comment">// This must be done prior to releasing the system and while they are still</span></div>
<div class="line">        <span class="comment">// in scope.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        m_system-&gt;RegisterInterfaceEventHandler(*m_interfaceEventHandlerOnSystem);</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Interface event handler registered on the system...&quot;</span> &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> UnregisterInterfaceEventFromSystem()</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Unregister interface event handler from system object</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// It is important to unregister all arrival, removal, and interface event handlers</span></div>
<div class="line">        <span class="comment">// registered to the system.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">if</span> (m_interfaceEventHandlerOnSystem)</div>
<div class="line">        {</div>
<div class="line">            m_system-&gt;UnregisterInterfaceEventHandler(*m_interfaceEventHandlerOnSystem);</div>
<div class="line"></div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Interface event handler unregistered from system...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">            m_interfaceEventHandlerOnSystem = shared_ptr&lt;InterfaceEventHandlerImpl&gt;();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> RegisterAllInterfaceEvents()</div>
<div class="line">    {</div>
<div class="line">        {</div>
<div class="line">            LockEventHandlerMutex();</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (!m_interfaceEventHandlers.empty())</div>
<div class="line">            {</div>
<div class="line">                m_interfaceEventHandlers.clear();</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            UnlockEventHandlerMutex();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_interface_list.html">InterfaceList</a> interfaceList = m_system-&gt;GetInterfaces();</div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numInterfaces = interfaceList.<a class="code" href="class_spinnaker_1_1_interface_list.html#a7d1646dc12416daf821f666c233d2be2">GetSize</a>();</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Create and register interface event handler to each interface</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// The process of event handler creation and registration on interfaces is similar</span></div>
<div class="line">        <span class="comment">// to the process of event handler creation and registration on the system. The</span></div>
<div class="line">        <span class="comment">// class for interfaces has been constructed to accept an interface and an</span></div>
<div class="line">        <span class="comment">// interface number (this is just to separate the interfaces).</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** LATER ***</span></div>
<div class="line">        <span class="comment">// Arrival, removal, and interface event handlers must all be unregistered manually.</span></div>
<div class="line">        <span class="comment">// This must be done prior to releasing the system and while they are still</span></div>
<div class="line">        <span class="comment">// in scope.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numInterfaces; i++)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Select interface</span></div>
<div class="line">            <a class="code" href="class_spinnaker_1_1_interface_ptr.html">InterfacePtr</a> pInterface = interfaceList.<a class="code" href="class_spinnaker_1_1_interface_list.html#af9cb1b8a688004e783d03287c1d2a300">GetByIndex</a>(i);</div>
<div class="line">            <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap = pInterface-&gt;GetTLNodeMap();</div>
<div class="line"></div>
<div class="line">            <span class="keyword">const</span> <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CStringPtr</a> interfaceIDNode = nodeMap.GetNode(<span class="stringliteral">&quot;InterfaceID&quot;</span>);</div>
<div class="line">            <span class="comment">// Ensure the node is valid</span></div>
<div class="line">            <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(interfaceIDNode) || !<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(interfaceIDNode))</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            std::string interfaceID = std::string(interfaceIDNode-&gt;GetValue().c_str());</div>
<div class="line"></div>
<div class="line">            {</div>
<div class="line">                LockEventHandlerMutex();</div>
<div class="line">                <span class="keywordflow">try</span></div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">// Create interface event handler</span></div>
<div class="line">                    shared_ptr&lt;InterfaceEventHandlerImpl&gt; interfaceEventHandler =</div>
<div class="line">                        shared_ptr&lt;InterfaceEventHandlerImpl&gt;(<span class="keyword">new</span> <a class="code" href="class_interface_event_handler_impl.html">InterfaceEventHandlerImpl</a>(pInterface, interfaceID));</div>
<div class="line">                    m_interfaceEventHandlers.push_back(interfaceEventHandler);</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Register interface event handler</span></div>
<div class="line">                    pInterface-&gt;RegisterEventHandler(*m_interfaceEventHandlers[i]);</div>
<div class="line"></div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Event handler registered to interface &#39;&quot;</span> &lt;&lt; interfaceID &lt;&lt; <span class="stringliteral">&quot;&#39;...&quot;</span> &lt;&lt; endl;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">catch</span> (exception&amp; e)</div>
<div class="line">                {</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Error registering event hander to interface &#39;&quot;</span> &lt;&lt; interfaceID &lt;&lt; <span class="stringliteral">&quot;&#39; :&quot;</span> &lt;&lt; e.what() &lt;&lt; endl;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                UnlockEventHandlerMutex();</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        cout &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> UnregisterAllInterfaceEvents()</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_interface_list.html">InterfaceList</a> interfaceList = m_system-&gt;GetInterfaces(<span class="keyword">false</span>);</div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numInterfaces = interfaceList.<a class="code" href="class_spinnaker_1_1_interface_list.html#a7d1646dc12416daf821f666c233d2be2">GetSize</a>();</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Unregister interface event handler from each interface</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// It is important to unregister all arrival, removal, and interface event handlers</span></div>
<div class="line">        <span class="comment">// from all interfaces that they may be registered to.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numInterfaces; i++)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Select interface</span></div>
<div class="line">            <a class="code" href="class_spinnaker_1_1_interface_ptr.html">InterfacePtr</a> pInterface = interfaceList.<a class="code" href="class_spinnaker_1_1_interface_list.html#af9cb1b8a688004e783d03287c1d2a300">GetByIndex</a>(i);</div>
<div class="line">            <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap = pInterface-&gt;GetTLNodeMap();</div>
<div class="line"></div>
<div class="line">            <span class="keyword">const</span> <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CStringPtr</a> interfaceIDNode = nodeMap.GetNode(<span class="stringliteral">&quot;InterfaceID&quot;</span>);</div>
<div class="line">            <span class="comment">// Ensure the node is valid</span></div>
<div class="line">            <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(interfaceIDNode) || !<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(interfaceIDNode))</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            std::string interfaceID = std::string(interfaceIDNode-&gt;GetValue().c_str());</div>
<div class="line"></div>
<div class="line">            {</div>
<div class="line">                LockEventHandlerMutex();</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">try</span></div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">// Ensure that that the event is unregistered from the matching interface</span></div>
<div class="line">                    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; m_interfaceEventHandlers.size(); j++)</div>
<div class="line">                    {</div>
<div class="line">                        <span class="keywordflow">if</span> (interfaceID == m_interfaceEventHandlers[j]-&gt;GetInterfaceId())</div>
<div class="line">                        {</div>
<div class="line">                            pInterface-&gt;UnregisterEventHandler(*m_interfaceEventHandlers[j]);</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">catch</span> (exception&amp; e)</div>
<div class="line">                {</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Error unreigstering event hander to interface &#39;&quot;</span> &lt;&lt; interfaceID &lt;&lt; <span class="stringliteral">&quot;&#39; :&quot;</span> &lt;&lt; e.what()</div>
<div class="line">                         &lt;&lt; endl;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                UnlockEventHandlerMutex();</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        {</div>
<div class="line">            LockEventHandlerMutex();</div>
<div class="line"></div>
<div class="line">            m_interfaceEventHandlers.clear();</div>
<div class="line"></div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Event handler unregistered from interfaces...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">            UnlockEventHandlerMutex();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">  <span class="keyword">private</span>:</div>
<div class="line">    <a class="code" href="class_spinnaker_1_1_system_ptr.html">SystemPtr</a> m_system;</div>
<div class="line">    shared_ptr&lt;InterfaceEventHandlerImpl&gt; m_interfaceEventHandlerOnSystem;</div>
<div class="line">    vector&lt;shared_ptr&lt;InterfaceEventHandlerImpl&gt;&gt; m_interfaceEventHandlers;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if _MSC_VER == 1600</span></div>
<div class="line"><span class="preprocessor"></span>    HANDLE eventHandlersMutex;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    std::mutex eventHandlersMutex;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>};</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function checks if GEV enumeration is enabled on the system.</span></div>
<div class="line"><span class="keywordtype">void</span> <a name="a20"></a><a class="code" href="_enumeration_events_8cpp.html#a83e3cc2bd192b98d25bf7d7293dbeacf">CheckGevEnabled</a>(<a class="code" href="class_spinnaker_1_1_system_ptr.html">SystemPtr</a>&amp; pSystem)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Retrieve the System TL Nodemap and EnumerateGEVInterfaces node</span></div>
<div class="line">    <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap = pSystem-&gt;GetTLNodeMap();</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CBooleanPtr</a> enumerateGevInterfacesNode = nodeMap.GetNode(<span class="stringliteral">&quot;EnumerateGEVInterfaces&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Ensure the node is valid</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(enumerateGevInterfacesNode) &amp;&amp; <a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(enumerateGevInterfacesNode))</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">bool</span> gevEnabled = enumerateGevInterfacesNode-&gt;GetValue();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Check if node is enabled</span></div>
<div class="line">        <span class="keywordflow">if</span> (!gevEnabled)</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; endl</div>
<div class="line">                 &lt;&lt; <span class="stringliteral">&quot;WARNING: GEV Enumeration is disabled.&quot;</span> &lt;&lt; endl</div>
<div class="line">                 &lt;&lt; <span class="stringliteral">&quot;If you intend to use GigE cameras please run the EnableGEVInterfaces shortcut&quot;</span> &lt;&lt; endl</div>
<div class="line">                 &lt;&lt; <span class="stringliteral">&quot;or set EnumerateGEVInterfaces to true and relaunch your application.&quot;</span> &lt;&lt; endl</div>
<div class="line">                 &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;EnumerateGEVInterfaces is enabled. Continuing..&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;EnumerateGEVInterfaces node is unavailable&quot;</span> &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Example entry point; this function sets up the example to act appropriately</span></div>
<div class="line"><span class="comment">// upon arrival and removal events; please see Enumeration example for more</span></div>
<div class="line"><span class="comment">// in-depth comments on preparing and cleaning up the system.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a21"></a><a class="code" href="_acquisition_8cpp.html#a2c3f6775325c30275d11c6abee2db6a0">main</a>(<span class="keywordtype">int</span> <span class="comment">/*argc*/</span>, <span class="keywordtype">char</span>** <span class="comment">/*argv*/</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Print application build information</span></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Application build date: &quot;</span> &lt;&lt; __DATE__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; __TIME__ &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Retrieve singleton reference to system object</span></div>
<div class="line">    <a class="code" href="class_spinnaker_1_1_system_ptr.html">SystemPtr</a> system = <a name="a22"></a><a class="code" href="class_spinnaker_1_1_system.html#a45b5dbcde6e9fdfb05e0016af82969d0">System::GetInstance</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Print out current library version</span></div>
<div class="line">    <span class="keyword">const</span> <a name="_a23"></a><a class="code" href="struct_spinnaker_1_1_library_version.html">LibraryVersion</a> spinnakerLibraryVersion = system-&gt;GetLibraryVersion();</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Spinnaker library version: &quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a24"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#a435ca80707c851bea186e73a1be5d3b9">major</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a25"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#a41c0e171b65e16617977006e58fbbbc5">minor</a></div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a26"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#a4bfea42429249a1f65204f0c0f34704a">type</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a27"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#ad263db2963cb8e231c207328372e17bb">build</a> &lt;&lt; endl</div>
<div class="line">         &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Check if GEV enumeration is enabled.</span></div>
<div class="line">    <a class="code" href="_enumeration_events_8cpp.html#a83e3cc2bd192b98d25bf7d7293dbeacf">CheckGevEnabled</a>(system);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Retrieve list of cameras from the system</span></div>
<div class="line">    <a class="code" href="class_spinnaker_1_1_camera_list.html">CameraList</a> camList = system-&gt;GetCameras();</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numCameras = camList.<a class="code" href="class_spinnaker_1_1_camera_list.html#a7d1646dc12416daf821f666c233d2be2">GetSize</a>();</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Number of cameras detected: &quot;</span> &lt;&lt; numCameras &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Retrieve list of interfaces from the system</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// *** NOTES ***</span></div>
<div class="line">    <span class="comment">// macOS interfaces are only registered if they are active.</span></div>
<div class="line">    <span class="comment">// This example will have varied outcomes depending on the order</span></div>
<div class="line">    <span class="comment">// in which we receive the interface and the device arrival events.</span></div>
<div class="line">    <span class="comment">// In most cases on macOS, since the interface and the device arrive</span></div>
<div class="line">    <span class="comment">// at the same time, we will see the interface arrival event and</span></div>
<div class="line">    <span class="comment">// the interface will already have one device connected to it.</span></div>
<div class="line">    <span class="comment">// This means we will not see another device arrival event.</span></div>
<div class="line">    <span class="comment">// Device removal events however, are guaranteed to be fired before</span></div>
<div class="line">    <span class="comment">// interface removal events.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <a class="code" href="class_spinnaker_1_1_interface_list.html">InterfaceList</a> interfaceList = system-&gt;GetInterfaces();</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numInterfaces = interfaceList.<a class="code" href="class_spinnaker_1_1_interface_list.html#a7d1646dc12416daf821f666c233d2be2">GetSize</a>();</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Number of interfaces detected: &quot;</span> &lt;&lt; numInterfaces &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;*** CONFIGURING ENUMERATION EVENTS ***&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Create system event handler</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// *** NOTES ***</span></div>
<div class="line">    <span class="comment">// The SystemEventHandlerImpl has been constructed to accept a system object in</span></div>
<div class="line">    <span class="comment">// order to register/unregister events to/from the system object</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <a class="code" href="class_system_event_handler_impl.html">SystemEventHandlerImpl</a> systemEventHandler(system);</div>
<div class="line"></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Register system event to the system</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// *** NOTES ***</span></div>
<div class="line">    <span class="comment">// A system event is merely a combination of an interface arrival and an</span></div>
<div class="line">    <span class="comment">// interface removal event.</span></div>
<div class="line">    <span class="comment">// This feature is currently only supported for GEV interface arrivals and removals.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// *** LATER ***</span></div>
<div class="line">    <span class="comment">// Interface arrival and removal events must all be unregistered manually.</span></div>
<div class="line">    <span class="comment">// This must be done prior to releasing the system and while they are still</span></div>
<div class="line">    <span class="comment">// in scope.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    system-&gt;RegisterEventHandler(systemEventHandler);</div>
<div class="line"></div>
<div class="line">    systemEventHandler.RegisterInterfaceEventToSystem();</div>
<div class="line">    systemEventHandler.RegisterAllInterfaceEvents();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Wait for user to plug in and/or remove camera devices</span></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Ready! Remove/Plug in cameras to test or press Enter to exit...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">    getchar();</div>
<div class="line"></div>
<div class="line">    systemEventHandler.UnregisterAllInterfaceEvents();</div>
<div class="line">    systemEventHandler.UnregisterInterfaceEventFromSystem();</div>
<div class="line"></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Unregister system event handler from system object</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// *** NOTES ***</span></div>
<div class="line">    <span class="comment">// It is important to unregister all interface arrival and removal event handlers</span></div>
<div class="line">    <span class="comment">// registered to the system.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    system-&gt;UnregisterEventHandler(systemEventHandler);</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;System event handler unregistered from system...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Clear camera list before releasing system</span></div>
<div class="line">    camList.<a name="a28"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Clear interface list before releasing system</span></div>
<div class="line">    interfaceList.<a name="a29"></a><a class="code" href="class_spinnaker_1_1_interface_list.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Release system</span></div>
<div class="line">    system-&gt;ReleaseInstance();</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Done! Press Enter to exit...&quot;</span> &lt;&lt; endl;</div>
<div class="line">    getchar();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->

  <table style="width: 100%;border-spacing: 0px 0px;border-left-style: solid;border-left-width: ;border-left-color: #8c8888;border-right-style: solid;border-right-width: ;border-right-color: #8c8888;border-top-style: solid;border-top-width: ;border-top-color: #8c8888;border-bottom-style: solid;border-bottom-width: ;border-bottom-color: #8c8888;margin-left: 0;margin-right: auto;padding: 0px">
    <col />
    <col />
    <col />
        <tbody>
            <tr>
                <td style="background-color: #8c8888;color: #ffffff;"><a class="footer" href="https://www.flir.com/support-center/rma/iis-support-request">Contact Support </a> </td>
                <td style="background-color: #8c8888;color: #ffffff;text-align: center;font-size: 16px;font-weight: bold">Spinnaker&#174; SDK Programmer's Guide and API Reference</td>
                <td style="background-color: #8c8888;color: #ffffff;text-align: right;"><address class="footer">
Wed Sep 30 2020 &#160; <a class="footer" href="https://www.flir.com/iis/machine-vision">FLIR Integrated Imaging Solutions Inc. All rights reserved.</a></address></td>
            </tr>
        </tbody>
  </table>
</body>
</html>
