<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <title>Spinnaker C++: BufferHandling.cpp</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="ga.js"></script>
  <link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <div id="top"><!-- do not remove this div! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0.9em" width="100%">
      <tbody>
        <tr style="height: 56px;">
          <td id="projectlogo" style="padding-left: 0.9em;text-align: left;background: #ffffff;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><a href="https://www.flir.com/iis/machine-vision"><img alt="Logo" src="FLIR_Logo.png"/></a></td>
          <td style="padding-left: 0.5em;text-align: left;background: #002f86;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><div id="projectname">Spinnaker C++</div></td>
          <td style="padding-right: 0.9em;text-align: right;background: #002f86;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><div id="projectname"><span id="projectnumber">2.0.0.0</span></td>
        </tr>
      </tbody>
    </table>
  </div>
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">BufferHandling.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p><a class="el" href="_buffer_handling_8cpp.html">BufferHandling.cpp</a> shows how the different buffer handling modes work.It relies on information provided in the Acquisition and Trigger examples.</p>
<p>Buffer handling determines the ordering in which images are retrieved, and what occurs when an image is transmitted while the buffer is full. There are four different buffer handling modes available; NewestFirst, NewestOnly, OldestFirst and OldestFirstOverwrite.</p>
<p>This example explores retrieving images in a set pattern; triggering the camera while not retrieving an image (letting the buffer fill up), and retrieving images while not triggering. We cycle through the different buffer handling modes to see which images are retrieved, confirming their identities via their Frame ID values.</p>
<div class="fragment"><div class="line"><span class="comment">//=============================================================================</span></div>
<div class="line"><span class="comment">// Copyright (c) 2001-2019 FLIR Systems, Inc. All Rights Reserved.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// This software is the confidential and proprietary information of FLIR</span></div>
<div class="line"><span class="comment">// Integrated Imaging Solutions, Inc. (&quot;Confidential Information&quot;). You</span></div>
<div class="line"><span class="comment">// shall not disclose such Confidential Information and shall use it only in</span></div>
<div class="line"><span class="comment">// accordance with the terms of the license agreement you entered into</span></div>
<div class="line"><span class="comment">// with FLIR Integrated Imaging Solutions, Inc. (FLIR).</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// FLIR MAKES NO REPRESENTATIONS OR WARRANTIES ABOUT THE SUITABILITY OF THE</span></div>
<div class="line"><span class="comment">// SOFTWARE, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE</span></div>
<div class="line"><span class="comment">// IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR</span></div>
<div class="line"><span class="comment">// PURPOSE, OR NON-INFRINGEMENT. FLIR SHALL NOT BE LIABLE FOR ANY DAMAGES</span></div>
<div class="line"><span class="comment">// SUFFERED BY LICENSEE AS A RESULT OF USING, MODIFYING OR DISTRIBUTING</span></div>
<div class="line"><span class="comment">// THIS SOFTWARE OR ITS DERIVATIVES.</span></div>
<div class="line"><span class="comment">//=============================================================================</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_spinnaker_8h.html">Spinnaker.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_spinnaker_gen_api_8h.html">SpinGenApi/SpinnakerGenApi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// Total number of buffers</span></div>
<div class="line"><span class="preprocessor">#define numBuffers 3</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">// Number of triggers</span></div>
<div class="line"><span class="preprocessor">#define z_numTriggers 6</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">// Total number of loops</span></div>
<div class="line"><span class="preprocessor">#define k_numLoops 9</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker;</div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker::GenApi;</div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker::GenICam;</div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"></div>
<div class="line"><span class="comment">// This helper function allows the example to sleep in both Windows and Linux</span></div>
<div class="line"><span class="comment">// systems. Note that Windows sleep takes milliseconds as a parameter while</span></div>
<div class="line"><span class="comment">// Linux systems take microseconds as a parameter.</span></div>
<div class="line"><span class="keywordtype">void</span> <a name="a0"></a><a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#ac7edb77de4b99b4f8d3600e0151f9cae">SleepyWrapper</a>(<span class="keywordtype">int</span> milliseconds)</div>
<div class="line">{</div>
<div class="line"><span class="preprocessor">#if defined WIN32 || defined _WIN32 || defined WIN64 || defined _WIN64</span></div>
<div class="line"><span class="preprocessor"></span>    Sleep(milliseconds);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>    usleep(1000 * milliseconds);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function configures the camera to use a trigger. First, trigger mode is</span></div>
<div class="line"><span class="comment">// set to off in order to select the trigger source. Once the trigger source</span></div>
<div class="line"><span class="comment">// has been selected, trigger mode is then enabled, which has the camera</span></div>
<div class="line"><span class="comment">// capture only a single image upon the execution of the trigger.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a1"></a><a class="code" href="_action_command_8cpp.html#a4075b98dbe11849b1fa7177da0580c38">ConfigureTrigger</a>(<a name="a2"></a><a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;*** CONFIGURING TRIGGER ***&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Ensure trigger mode off</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// The trigger must be disabled in order to configure the</span></div>
<div class="line">        <span class="comment">// trigger source.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a name="_a3"></a><a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumerationPtr</a> ptrTriggerMode = nodeMap.GetNode(<span class="stringliteral">&quot;TriggerMode&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a name="a4"></a><a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrTriggerMode) || !<a name="a5"></a><a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrTriggerMode))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to disable trigger mode (node retrieval). Aborting...&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrTriggerModeOff = ptrTriggerMode-&gt;GetEntryByName(<span class="stringliteral">&quot;Off&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrTriggerModeOff) || !<a name="a6"></a><a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrTriggerModeOff))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to disable trigger mode (enum entry retrieval). Aborting...&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        ptrTriggerMode-&gt;SetIntValue(ptrTriggerModeOff-&gt;GetValue());</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Trigger mode disabled...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Set trigger source to software</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumerationPtr</a> ptrTriggerSource = nodeMap.GetNode(<span class="stringliteral">&quot;TriggerSource&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrTriggerSource) || !<a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrTriggerSource))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set trigger mode (node retrieval). Aborting...&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrTriggerSourceSoftware = ptrTriggerSource-&gt;GetEntryByName(<span class="stringliteral">&quot;Software&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrTriggerSourceSoftware) || !<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrTriggerSourceSoftware))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set trigger mode (enum entry retrieval). Aborting...&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        ptrTriggerSource-&gt;SetIntValue(ptrTriggerSourceSoftware-&gt;GetValue());</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Trigger source set to software...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Turn trigger mode on</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrTriggerModeOn = ptrTriggerMode-&gt;GetEntryByName(<span class="stringliteral">&quot;On&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrTriggerModeOn) || !<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrTriggerModeOn))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to enable trigger mode (enum entry retrieval). Aborting...&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">        ptrTriggerMode-&gt;SetIntValue(ptrTriggerModeOn-&gt;GetValue());</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Trigger mode turned back on...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a name="_a7"></a><a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a name="a8"></a><a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function retrieves a single image using the trigger. In this example,</span></div>
<div class="line"><span class="comment">// only a single image is captured and made available for acquisition - as such,</span></div>
<div class="line"><span class="comment">// attempting to acquire two images for a single trigger execution would cause</span></div>
<div class="line"><span class="comment">// the example to hang. This is different from other examples, whereby a</span></div>
<div class="line"><span class="comment">// constant stream of images are being captured and made available for image</span></div>
<div class="line"><span class="comment">// acquisition.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a9"></a><a class="code" href="_buffer_handling_8cpp.html#a54f12eb67db905d8c82e2b1a562ac40f">GrabNextImageByTrigger</a>(<a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Execute software trigger</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CCommandPtr</a> ptrSoftwareTriggerCommand = nodeMap.GetNode(<span class="stringliteral">&quot;TriggerSoftware&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrSoftwareTriggerCommand) || !<a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrSoftwareTriggerCommand))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to execute trigger. Aborting...&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        ptrSoftwareTriggerCommand-&gt;Execute();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function returns the camera to a normal state by turning off trigger</span></div>
<div class="line"><span class="comment">// mode.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a10"></a><a class="code" href="_buffer_handling_8cpp.html#add9ab8455eaf9a63701eb5d99c61da23">ResetTrigger</a>(<a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Turn trigger mode back off</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// Once all images have been captured, turn trigger mode back off to</span></div>
<div class="line">        <span class="comment">// restore the camera to a clean state.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumerationPtr</a> ptrTriggerMode = nodeMap.GetNode(<span class="stringliteral">&quot;TriggerMode&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrTriggerMode) || !<a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrTriggerMode))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to disable trigger mode (node retrieval). Non-fatal error...&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrTriggerModeOff = ptrTriggerMode-&gt;GetEntryByName(<span class="stringliteral">&quot;Off&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrTriggerModeOff) || !<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrTriggerModeOff))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to disable trigger mode (enum entry retrieval). Non-fatal error...&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        ptrTriggerMode-&gt;SetIntValue(ptrTriggerModeOff-&gt;GetValue());</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; endl &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Trigger mode disabled...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function prints the device information of the camera from the transport</span></div>
<div class="line"><span class="comment">// layer; please see NodeMapInfo example for more in-depth comments on printing</span></div>
<div class="line"><span class="comment">// device information from the nodemap.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a11"></a><a class="code" href="_acquisition_8cpp.html#a9a1864412533965fa228b758488637fd">PrintDeviceInfo</a>(<a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;*** DEVICE INFORMATION ***&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Retrieve and display Device Information</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CCategoryPtr</a> category = nodeMap.GetNode(<span class="stringliteral">&quot;DeviceInformation&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(category) &amp;&amp; <a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(category))</div>
<div class="line">        {</div>
<div class="line">            FeatureList_t features;</div>
<div class="line">            category-&gt;GetFeatures(features);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">for</span> (FeatureList_t::const_iterator it = features.begin(); it != features.end(); ++it)</div>
<div class="line">            {</div>
<div class="line">                <a name="_a12"></a><a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CNodePtr</a> pfeatureNode = *it;</div>
<div class="line">                cout &lt;&lt; pfeatureNode-&gt;GetName() &lt;&lt; <span class="stringliteral">&quot; : &quot;</span>;</div>
<div class="line">                <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CValuePtr</a> pValue = (<a name="a13"></a><a class="code" href="group___pointer__h.html#ga17eabe67b4e0d8b7e2d794239a9c2084">CValuePtr</a>)pfeatureNode;</div>
<div class="line">                cout &lt;&lt; (<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(pValue) ? pValue-&gt;ToString() : <span class="stringliteral">&quot;Node not readable&quot;</span>);</div>
<div class="line">                cout &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Device control information not available.&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function cycles through the four different buffer handling modes.</span></div>
<div class="line"><span class="comment">// It saves three images for three of the buffer handling modes</span></div>
<div class="line"><span class="comment">// (NewestFirst, OldestFirst, and OldestFirstOverwrite).  For NewestOnly,</span></div>
<div class="line"><span class="comment">// it saves one image.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a14"></a><a class="code" href="_acquisition_8cpp.html#a2836a024d3f74c4699c84267163c70aa">AcquireImages</a>(<a name="_a15"></a><a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam, <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap, <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMapTLDevice)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;*** IMAGE ACQUISITION ***&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Set acquisition mode to continuous</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumerationPtr</a> ptrAcquisitionMode = nodeMap.GetNode(<span class="stringliteral">&quot;AcquisitionMode&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrAcquisitionMode) || !<a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrAcquisitionMode))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set acquisition mode to continuous (node retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrAcquisitionModeContinuous = ptrAcquisitionMode-&gt;GetEntryByName(<span class="stringliteral">&quot;Continuous&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrAcquisitionModeContinuous) || !<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrAcquisitionModeContinuous))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set acquisition mode to continuous (entry &#39;continuous&#39; retrieval). Aborting...&quot;</span> &lt;&lt; endl</div>
<div class="line">                 &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        ptrAcquisitionMode-&gt;SetIntValue(ptrAcquisitionModeContinuous-&gt;GetValue());</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Acquisition mode set to continuous...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve device serial number for filename</span></div>
<div class="line">        <a name="_a16"></a><a class="code" href="class_spinnaker_1_1_gen_i_cam_1_1gcstring.html">gcstring</a> deviceSerialNumber(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CStringPtr</a> ptrStringSerial = nodeMapTLDevice.GetNode(<span class="stringliteral">&quot;DeviceSerialNumber&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrStringSerial) &amp;&amp; <a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrStringSerial))</div>
<div class="line">        {</div>
<div class="line">            deviceSerialNumber = ptrStringSerial-&gt;GetValue();</div>
<div class="line"></div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Device serial number retrieved as &quot;</span> &lt;&lt; deviceSerialNumber &lt;&lt; <span class="stringliteral">&quot;...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve Stream Parameters device nodemap</span></div>
<div class="line">        <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">Spinnaker::GenApi::INodeMap</a>&amp; sNodeMap = pCam-&gt;GetTLStreamNodeMap();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve Buffer Handling Mode Information</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumerationPtr</a> ptrHandlingMode = sNodeMap.GetNode(<span class="stringliteral">&quot;StreamBufferHandlingMode&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrHandlingMode) || !<a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrHandlingMode))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set Buffer Handling mode (node retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrHandlingModeEntry = ptrHandlingMode-&gt;GetCurrentEntry();</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrHandlingModeEntry) || !<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrHandlingModeEntry))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set Buffer Handling mode (Entry retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Set stream buffer Count Mode to manual</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumerationPtr</a> ptrStreamBufferCountMode = sNodeMap.GetNode(<span class="stringliteral">&quot;StreamBufferCountMode&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrStreamBufferCountMode) || !<a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrStreamBufferCountMode))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set Buffer Count Mode (node retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrStreamBufferCountModeManual = ptrStreamBufferCountMode-&gt;GetEntryByName(<span class="stringliteral">&quot;Manual&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrStreamBufferCountModeManual) || !<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrStreamBufferCountModeManual))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set Buffer Count Mode entry (Entry retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        ptrStreamBufferCountMode-&gt;SetIntValue(ptrStreamBufferCountModeManual-&gt;GetValue());</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Stream Buffer Count Mode set to manual...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve and modify Stream Buffer Count</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CIntegerPtr</a> ptrBufferCount = sNodeMap.GetNode(<span class="stringliteral">&quot;StreamBufferCountManual&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrBufferCount) || !<a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrBufferCount))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set Buffer Count (Integer node retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Display Buffer Info</span></div>
<div class="line">        cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Default Buffer Handling Mode: &quot;</span> &lt;&lt; ptrHandlingModeEntry-&gt;GetDisplayName() &lt;&lt; endl;</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Default Buffer Count: &quot;</span> &lt;&lt; ptrBufferCount-&gt;GetValue() &lt;&lt; endl;</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Maximum Buffer Count: &quot;</span> &lt;&lt; ptrBufferCount-&gt;GetMax() &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        ptrBufferCount-&gt;SetValue(<a name="a17"></a><a class="code" href="_buffer_handling_8cpp.html#a143a110717ddc9db67f62f76a5f99c18">numBuffers</a>);</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Buffer count now set to: &quot;</span> &lt;&lt; ptrBufferCount-&gt;GetValue() &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; endl</div>
<div class="line">             &lt;&lt; <span class="stringliteral">&quot;Camera will be triggered &quot;</span> &lt;&lt; <a name="a18"></a><a class="code" href="_buffer_handling_8cpp.html#a3cbac846971e7558ca149e9e3f08e198">z_numTriggers</a> &lt;&lt; <span class="stringliteral">&quot; times in a row before &quot;</span> &lt;&lt; <a name="a19"></a><a class="code" href="_buffer_handling_8cpp.html#a671f8daf4fa3145dee2ee46ed13ca735">k_numLoops</a> - <a class="code" href="_buffer_handling_8cpp.html#a3cbac846971e7558ca149e9e3f08e198">z_numTriggers</a></div>
<div class="line">             &lt;&lt; <span class="stringliteral">&quot; images will be retrieved&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">switch</span> (i)</div>
<div class="line">            {</div>
<div class="line">            <span class="keywordflow">case</span> 0:</div>
<div class="line">                ptrHandlingModeEntry = ptrHandlingMode-&gt;GetEntryByName(<span class="stringliteral">&quot;NewestFirst&quot;</span>);</div>
<div class="line">                ptrHandlingMode-&gt;SetIntValue(ptrHandlingModeEntry-&gt;GetValue());</div>
<div class="line">                cout &lt;&lt; endl</div>
<div class="line">                     &lt;&lt; endl</div>
<div class="line">                     &lt;&lt; <span class="stringliteral">&quot;Buffer Handling Mode has been set to &quot;</span> &lt;&lt; ptrHandlingModeEntry-&gt;GetDisplayName() &lt;&lt; endl;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">case</span> 1:</div>
<div class="line">                ptrHandlingModeEntry = ptrHandlingMode-&gt;GetEntryByName(<span class="stringliteral">&quot;NewestOnly&quot;</span>);</div>
<div class="line">                ptrHandlingMode-&gt;SetIntValue(ptrHandlingModeEntry-&gt;GetValue());</div>
<div class="line">                cout &lt;&lt; endl</div>
<div class="line">                     &lt;&lt; endl</div>
<div class="line">                     &lt;&lt; <span class="stringliteral">&quot;Buffer Handling Mode has been set to &quot;</span> &lt;&lt; ptrHandlingModeEntry-&gt;GetDisplayName() &lt;&lt; endl;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">case</span> 2:</div>
<div class="line">                ptrHandlingModeEntry = ptrHandlingMode-&gt;GetEntryByName(<span class="stringliteral">&quot;OldestFirst&quot;</span>);</div>
<div class="line">                ptrHandlingMode-&gt;SetIntValue(ptrHandlingModeEntry-&gt;GetValue());</div>
<div class="line">                cout &lt;&lt; endl</div>
<div class="line">                     &lt;&lt; endl</div>
<div class="line">                     &lt;&lt; <span class="stringliteral">&quot;Buffer Handling Mode has been set to &quot;</span> &lt;&lt; ptrHandlingModeEntry-&gt;GetDisplayName() &lt;&lt; endl;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">case</span> 3:</div>
<div class="line">                ptrHandlingModeEntry = ptrHandlingMode-&gt;GetEntryByName(<span class="stringliteral">&quot;OldestFirstOverwrite&quot;</span>);</div>
<div class="line">                ptrHandlingMode-&gt;SetIntValue(ptrHandlingModeEntry-&gt;GetValue());</div>
<div class="line">                cout &lt;&lt; endl</div>
<div class="line">                     &lt;&lt; endl</div>
<div class="line">                     &lt;&lt; <span class="stringliteral">&quot;Buffer Handling Mode has been set to &quot;</span> &lt;&lt; ptrHandlingModeEntry-&gt;GetDisplayName() &lt;&lt; endl;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">default</span>:</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Begin capturing images</span></div>
<div class="line">            pCam-&gt;BeginAcquisition();</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Sleep for one second; only necessary when using non-BFS/ORX cameras on startup</span></div>
<div class="line">            <span class="keywordflow">if</span> (i == 0)</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#ac7edb77de4b99b4f8d3600e0151f9cae">SleepyWrapper</a>(1000);</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">try</span></div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Software Trigger the camera then  save images</span></div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> loopCnt = 0; loopCnt &lt; <a class="code" href="_buffer_handling_8cpp.html#a671f8daf4fa3145dee2ee46ed13ca735">k_numLoops</a>; loopCnt++)</div>
<div class="line">                {</div>
<div class="line">                    <a name="_a20"></a><a class="code" href="class_spinnaker_1_1_image_ptr.html">ImagePtr</a> pResultImage;</div>
<div class="line">                    <span class="keywordflow">if</span> (loopCnt &lt; <a class="code" href="_buffer_handling_8cpp.html#a3cbac846971e7558ca149e9e3f08e198">z_numTriggers</a>)</div>
<div class="line">                    {</div>
<div class="line">                        <span class="comment">// Retrieve the next image from the trigger</span></div>
<div class="line">                        result = result | <a class="code" href="_buffer_handling_8cpp.html#a54f12eb67db905d8c82e2b1a562ac40f">GrabNextImageByTrigger</a>(nodeMap);</div>
<div class="line">                        cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Camera triggered. No image grabbed&quot;</span> &lt;&lt; endl;</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">else</span></div>
<div class="line">                    {</div>
<div class="line">                        cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;No trigger. Grabbing image &quot;</span> &lt;&lt; loopCnt - <a class="code" href="_buffer_handling_8cpp.html#a3cbac846971e7558ca149e9e3f08e198">z_numTriggers</a> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">                        pResultImage = pCam-&gt;GetNextImage(500);</div>
<div class="line">                        <span class="keywordflow">if</span> (pResultImage-&gt;IsIncomplete())</div>
<div class="line">                        {</div>
<div class="line">                            cout &lt;&lt; <span class="stringliteral">&quot;Image incomplete with image status &quot;</span> &lt;&lt; pResultImage-&gt;GetImageStatus() &lt;&lt; <span class="stringliteral">&quot;...&quot;</span></div>
<div class="line">                                 &lt;&lt; endl</div>
<div class="line">                                 &lt;&lt; endl;</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span> (loopCnt &gt;= <a class="code" href="_buffer_handling_8cpp.html#a3cbac846971e7558ca149e9e3f08e198">z_numTriggers</a>)</div>
<div class="line">                    {</div>
<div class="line">                        <span class="comment">// Retrieve Frame ID</span></div>
<div class="line">                        cout &lt;&lt; <span class="stringliteral">&quot;Frame ID: &quot;</span> &lt;&lt; pResultImage-&gt;GetFrameID() &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">                        <span class="comment">// Create a unique filename</span></div>
<div class="line">                        ostringstream filename;</div>
<div class="line"></div>
<div class="line">                        filename &lt;&lt; ptrHandlingModeEntry-&gt;GetSymbolic() &lt;&lt; <span class="stringliteral">&quot;-&quot;</span>;</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">if</span> (!deviceSerialNumber.empty())</div>
<div class="line">                        {</div>
<div class="line">                            filename &lt;&lt; deviceSerialNumber.c_str() &lt;&lt; <span class="stringliteral">&quot;-&quot;</span>;</div>
<div class="line">                        }</div>
<div class="line"></div>
<div class="line">                        filename &lt;&lt; loopCnt - <a class="code" href="_buffer_handling_8cpp.html#a3cbac846971e7558ca149e9e3f08e198">z_numTriggers</a> &lt;&lt; <span class="stringliteral">&quot;.jpg&quot;</span>;</div>
<div class="line"></div>
<div class="line">                        <span class="comment">// Save image</span></div>
<div class="line">                        pResultImage-&gt;Save(filename.str().c_str());</div>
<div class="line">                        cout &lt;&lt; <span class="stringliteral">&quot;Image saved at &quot;</span> &lt;&lt; filename.str() &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">                        <span class="comment">// Release image</span></div>
<div class="line">                        pResultImage-&gt;Release();</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// To control the framerate, have the application pause for 250ms.</span></div>
<div class="line">                    <a class="code" href="_acquisition_multiple_camera_recovery_8cpp.html#ac7edb77de4b99b4f8d3600e0151f9cae">SleepyWrapper</a>(250);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (ptrHandlingModeEntry-&gt;GetSymbolic() == <span class="stringliteral">&quot;NewestOnly&quot;</span>)</div>
<div class="line">                {</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Error should occur when grabbing image 1 with handling mode set to NewestOnly&quot;</span> &lt;&lt; endl;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                result = -1;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">// End acquisition</span></div>
<div class="line">            pCam-&gt;EndAcquisition();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function acts as the body of the example; please see NodeMapInfo example</span></div>
<div class="line"><span class="comment">// for more in-depth comments on setting up cameras.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a21"></a><a class="code" href="_acquisition_8cpp.html#a86462e15d417b9982cead96d2e8a8616">RunSingleCamera</a>(<a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line">    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Retrieve TL device nodemap and print device information</span></div>
<div class="line">        <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMapTLDevice = pCam-&gt;GetTLDeviceNodeMap();</div>
<div class="line"></div>
<div class="line">        result = <a class="code" href="_acquisition_8cpp.html#a9a1864412533965fa228b758488637fd">PrintDeviceInfo</a>(nodeMapTLDevice);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Initialize camera</span></div>
<div class="line">        pCam-&gt;Init();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve GenICam nodemap</span></div>
<div class="line">        <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap = pCam-&gt;GetNodeMap();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Configure trigger</span></div>
<div class="line">        err = <a class="code" href="_action_command_8cpp.html#a4075b98dbe11849b1fa7177da0580c38">ConfigureTrigger</a>(nodeMap);</div>
<div class="line">        <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> err;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Acquire images</span></div>
<div class="line">        result = result | <a class="code" href="_acquisition_8cpp.html#a2836a024d3f74c4699c84267163c70aa">AcquireImages</a>(pCam, nodeMap, nodeMapTLDevice);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Reset trigger</span></div>
<div class="line">        result = result | <a class="code" href="_buffer_handling_8cpp.html#add9ab8455eaf9a63701eb5d99c61da23">ResetTrigger</a>(nodeMap);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Deinitialize camera</span></div>
<div class="line">        pCam-&gt;DeInit();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Example entry point; please see Enumeration example for more in-depth</span></div>
<div class="line"><span class="comment">// comments on preparing and cleaning up the system.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a22"></a><a class="code" href="_acquisition_8cpp.html#a2c3f6775325c30275d11c6abee2db6a0">main</a>(<span class="keywordtype">int</span> <span class="comment">/*argc*/</span>, <span class="keywordtype">char</span>** <span class="comment">/*argv*/</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Since this application saves images in the current folder</span></div>
<div class="line">    <span class="comment">// we must ensure that we have permission to write to this folder.</span></div>
<div class="line">    <span class="comment">// If we do not have permission, fail right away.</span></div>
<div class="line">    FILE* tempFile = fopen(<span class="stringliteral">&quot;test.txt&quot;</span>, <span class="stringliteral">&quot;w+&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (tempFile == <span class="keyword">nullptr</span>)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Failed to create file in current folder.  Please check &quot;</span></div>
<div class="line">                <span class="stringliteral">&quot;permissions.&quot;</span></div>
<div class="line">             &lt;&lt; endl;</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Press Enter to exit...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        getchar();</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    fclose(tempFile);</div>
<div class="line">    <span class="keyword">remove</span>(<span class="stringliteral">&quot;test.txt&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Print application build information</span></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Application build date: &quot;</span> &lt;&lt; __DATE__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; __TIME__ &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Retrieve singleton reference to system object</span></div>
<div class="line">    <a name="_a23"></a><a class="code" href="class_spinnaker_1_1_system_ptr.html">SystemPtr</a> system = <a name="a24"></a><a class="code" href="class_spinnaker_1_1_system.html#a45b5dbcde6e9fdfb05e0016af82969d0">System::GetInstance</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Retrieve list of cameras from the system</span></div>
<div class="line">    <a name="_a25"></a><a class="code" href="class_spinnaker_1_1_camera_list.html">CameraList</a> camList = system-&gt;GetCameras();</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numCameras = camList.<a name="a26"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#a7d1646dc12416daf821f666c233d2be2">GetSize</a>();</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Number of cameras detected: &quot;</span> &lt;&lt; numCameras &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Finish if there are no cameras</span></div>
<div class="line">    <span class="keywordflow">if</span> (numCameras == 0)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Clear camera list before releasing system</span></div>
<div class="line">        camList.<a name="a27"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Release system</span></div>
<div class="line">        system-&gt;ReleaseInstance();</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Not enough cameras!&quot;</span> &lt;&lt; endl;</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Done! Press Enter to exit...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        getchar();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Run example on each camera</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numCameras; i++)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Running example for camera &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        result = result | <a class="code" href="_acquisition_8cpp.html#a86462e15d417b9982cead96d2e8a8616">RunSingleCamera</a>(camList.<a name="a28"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#aa372308b62098bc12ad25ee02dd11a48">GetByIndex</a>(i));</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Camera &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; example complete...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Clear camera list before releasing system</span></div>
<div class="line">    camList.<a class="code" href="class_spinnaker_1_1_camera_list.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Release system</span></div>
<div class="line">    system-&gt;ReleaseInstance();</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Done! Press Enter to exit...&quot;</span> &lt;&lt; endl;</div>
<div class="line">    getchar();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->

  <table style="width: 100%;border-spacing: 0px 0px;border-left-style: solid;border-left-width: ;border-left-color: #8c8888;border-right-style: solid;border-right-width: ;border-right-color: #8c8888;border-top-style: solid;border-top-width: ;border-top-color: #8c8888;border-bottom-style: solid;border-bottom-width: ;border-bottom-color: #8c8888;margin-left: 0;margin-right: auto;padding: 0px">
    <col />
    <col />
    <col />
        <tbody>
            <tr>
                <td style="background-color: #8c8888;color: #ffffff;"><a class="footer" href="https://www.flir.com/support-center/rma/iis-support-request">Contact Support </a> </td>
                <td style="background-color: #8c8888;color: #ffffff;text-align: center;font-size: 16px;font-weight: bold">Spinnaker&#174; SDK Programmer's Guide and API Reference</td>
                <td style="background-color: #8c8888;color: #ffffff;text-align: right;"><address class="footer">
Wed Sep 30 2020 &#160; <a class="footer" href="https://www.flir.com/iis/machine-vision">FLIR Integrated Imaging Solutions Inc. All rights reserved.</a></address></td>
            </tr>
        </tbody>
  </table>
</body>
</html>
