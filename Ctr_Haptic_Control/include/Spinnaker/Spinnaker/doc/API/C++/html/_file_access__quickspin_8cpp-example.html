<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <title>Spinnaker C++: FileAccess_Quickspin.cpp</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="ga.js"></script>
  <link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <div id="top"><!-- do not remove this div! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0.9em" width="100%">
      <tbody>
        <tr style="height: 56px;">
          <td id="projectlogo" style="padding-left: 0.9em;text-align: left;background: #ffffff;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><a href="https://www.flir.com/iis/machine-vision"><img alt="Logo" src="FLIR_Logo.png"/></a></td>
          <td style="padding-left: 0.5em;text-align: left;background: #002f86;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><div id="projectname">Spinnaker C++</div></td>
          <td style="padding-right: 0.9em;text-align: right;background: #002f86;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><div id="projectname"><span id="projectnumber">2.0.0.0</span></td>
        </tr>
      </tbody>
    </table>
  </div>
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">FileAccess_Quickspin.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p><a class="el" href="_file_access___quick_spin_8cpp.html">FileAccess_Quickspin.cpp</a> shows how to read and write images using camera File Access function.This example uploads an image to the camera File Access storage and also download the image from the camera File Access storage and saves it to the disk. It also provides debug message when debug mode is turned on giving more detail status of the progress and error messages to the users.</p>
<p>It relies on information provided in the Enumeration, Acquisition, and NodeMapInfo examples.</p>
<div class="fragment"><div class="line"><span class="comment">//=============================================================================</span></div>
<div class="line"><span class="comment">// Copyright (c) 2001-2019 FLIR Systems, Inc. All Rights Reserved.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// This software is the confidential and proprietary information of FLIR</span></div>
<div class="line"><span class="comment">// Integrated Imaging Solutions, Inc. (&quot;Confidential Information&quot;). You</span></div>
<div class="line"><span class="comment">// shall not disclose such Confidential Information and shall use it only in</span></div>
<div class="line"><span class="comment">// accordance with the terms of the license agreement you entered into</span></div>
<div class="line"><span class="comment">// with FLIR Integrated Imaging Solutions, Inc. (FLIR).</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// FLIR MAKES NO REPRESENTATIONS OR WARRANTIES ABOUT THE SUITABILITY OF THE</span></div>
<div class="line"><span class="comment">// SOFTWARE, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE</span></div>
<div class="line"><span class="comment">// IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR</span></div>
<div class="line"><span class="comment">// PURPOSE, OR NON-INFRINGEMENT. FLIR SHALL NOT BE LIABLE FOR ANY DAMAGES</span></div>
<div class="line"><span class="comment">// SUFFERED BY LICENSEE AS A RESULT OF USING, MODIFYING OR DISTRIBUTING</span></div>
<div class="line"><span class="comment">// THIS SOFTWARE OR ITS DERIVATIVES.</span></div>
<div class="line"><span class="comment">//=============================================================================</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_spinnaker_8h.html">Spinnaker.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_spinnaker_gen_api_8h.html">SpinGenApi/SpinnakerGenApi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker;</div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker::GenApi;</div>
<div class="line"><span class="keyword">using namespace </span>Spinnaker::GenICam;</div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> <a name="a0"></a><a class="code" href="_file_access___quick_spin_8cpp.html#ab3e851b132f229f404313f732f876b2c">_enableDebug</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="keyword">static</span> <a name="_a1"></a><a class="code" href="class_spinnaker_1_1_gen_i_cam_1_1gcstring.html">gcstring</a> <a name="a2"></a><a class="code" href="_file_access___quick_spin_8cpp.html#abcaf9bb238f6ed76012b2d489ab29487">_fileSelector</a> = <span class="stringliteral">&quot;UserFile1&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Print out operation result message</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> <a name="a3"></a><a class="code" href="_file_access___quick_spin_8cpp.html#ad2f07de3ba8425c1a0dd8bb862a3df50">PrintResultMessage</a>(<span class="keywordtype">bool</span> result)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (result)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;\n*** OPERATION COMPLETE ***\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;\n*** OPERATION FAILED ***\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This function prints the device information of the camera from the transport</span></div>
<div class="line"><span class="comment">// layer; please see NodeMapInfo example for more in-depth comments on printing</span></div>
<div class="line"><span class="comment">// device information from the nodemap.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a4"></a><a class="code" href="_acquisition_8cpp.html#a9a1864412533965fa228b758488637fd">PrintDeviceInfo</a>(<a name="a5"></a><a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;*** DEVICE INFORMATION ***&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        FeatureList_t features;</div>
<div class="line">        <a name="_a6"></a><a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CCategoryPtr</a> category = nodeMap.GetNode(<span class="stringliteral">&quot;DeviceInformation&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a7"></a><a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(category) &amp;&amp; <a name="a8"></a><a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(category))</div>
<div class="line">        {</div>
<div class="line">            category-&gt;GetFeatures(features);</div>
<div class="line"></div>
<div class="line">            FeatureList_t::const_iterator it;</div>
<div class="line">            <span class="keywordflow">for</span> (it = features.begin(); it != features.end(); ++it)</div>
<div class="line">            {</div>
<div class="line">                <a name="_a9"></a><a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CNodePtr</a> pfeatureNode = *it;</div>
<div class="line">                cout &lt;&lt; pfeatureNode-&gt;GetName() &lt;&lt; <span class="stringliteral">&quot; : &quot;</span>;</div>
<div class="line">                <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CValuePtr</a> pValue = (<a name="a10"></a><a class="code" href="group___pointer__h.html#ga17eabe67b4e0d8b7e2d794239a9c2084">CValuePtr</a>)pfeatureNode;</div>
<div class="line">                cout &lt;&lt; (<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(pValue) ? pValue-&gt;ToString() : <span class="stringliteral">&quot;Node not readable&quot;</span>);</div>
<div class="line">                cout &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Device control information not available.&quot;</span> &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a name="_a11"></a><a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a name="a12"></a><a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = -1;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Intializes the system</span></div>
<div class="line"><span class="keywordtype">bool</span> <a name="a13"></a><a class="code" href="_file_access___quick_spin_8cpp.html#a18e1788e72a5f35ff468c484c6c3340f">InitializeSystem</a>(<a name="_a14"></a><a class="code" href="class_spinnaker_1_1_system_ptr.html">SystemPtr</a>&amp; system, <a name="_a15"></a><a class="code" href="class_spinnaker_1_1_camera_list.html">CameraList</a>&amp; camList, <a name="_a16"></a><a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a>&amp; pCam)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Retrieve singleton reference to system object</span></div>
<div class="line">    system = <a name="a17"></a><a class="code" href="class_spinnaker_1_1_system.html#a45b5dbcde6e9fdfb05e0016af82969d0">System::GetInstance</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Retrieve list of cameras from the system</span></div>
<div class="line">    camList = system-&gt;GetCameras();</div>
<div class="line"></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numCameras = camList.<a name="a18"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#a7d1646dc12416daf821f666c233d2be2">GetSize</a>();</div>
<div class="line"></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Number of cameras detected: &quot;</span> &lt;&lt; numCameras &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Stop if there are no cameras</span></div>
<div class="line">    <span class="keywordflow">if</span> (numCameras == 0)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Clear camera list before releasing system</span></div>
<div class="line">        camList.<a name="a19"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Release system</span></div>
<div class="line">        system-&gt;ReleaseInstance();</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Not enough cameras!&quot;</span> &lt;&lt; endl;</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Done! Press Enter to exit...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        getchar();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// It creates shared pointer to camera</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// *** NOTES ***</span></div>
<div class="line">    <span class="comment">// The CameraPtr object is a shared pointer, and will generally clean itself</span></div>
<div class="line">    <span class="comment">// up upon exiting its scope. However, if a shared pointer is created in the</span></div>
<div class="line">    <span class="comment">// same scope that a system object is explicitly released (i.e. this scope),</span></div>
<div class="line">    <span class="comment">// the reference to the shared point must be broken manually.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// *** LATER ***</span></div>
<div class="line">    <span class="comment">// Shared pointers can be terminated manually by assigning them to nullptr.</span></div>
<div class="line">    <span class="comment">// This keeps releasing the system from throwing an exception.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    pCam = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Run example on 1st camera</span></div>
<div class="line">    pCam = camList.<a name="a20"></a><a class="code" href="class_spinnaker_1_1_camera_list.html#aa372308b62098bc12ad25ee02dd11a48">GetByIndex</a>(0);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Print out debug message</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> <a name="a21"></a><a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="keywordtype">string</span> msg)</div>
<div class="line">{</div>
<div class="line"><span class="preprocessor">#if DEBUG</span></div>
<div class="line"><span class="preprocessor"></span>    <a class="code" href="_file_access___quick_spin_8cpp.html#ab3e851b132f229f404313f732f876b2c">_enableDebug</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="_file_access___quick_spin_8cpp.html#ab3e851b132f229f404313f732f876b2c">_enableDebug</a>)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; msg &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Acquire 5 images from a device.</span></div>
<div class="line"><span class="keywordtype">bool</span> <a name="a22"></a><a class="code" href="_acquisition_8cpp.html#a2836a024d3f74c4699c84267163c70aa">AcquireImages</a>(<a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam, <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap, <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMapTLDevice, <a name="_a23"></a><a class="code" href="class_spinnaker_1_1_image_ptr.html">ImagePtr</a> pReferenceImage)</div>
<div class="line">{</div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;*** IMAGE ACQUISITION ***&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Set acquisition mode to continuous</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// Because the example acquires and saves 5 images, setting acquisition</span></div>
<div class="line">        <span class="comment">// mode to continuous lets the example finish. If set to single frame</span></div>
<div class="line">        <span class="comment">// or multiframe (at a lower number of images), the example would just</span></div>
<div class="line">        <span class="comment">// hang. This would happen because the example has been written to</span></div>
<div class="line">        <span class="comment">// acquire 5 images while the camera would have been programmed to</span></div>
<div class="line">        <span class="comment">// retrieve less than that.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Setting the value of an enumeration node is slightly more complicated</span></div>
<div class="line">        <span class="comment">// than other node types. Two nodes must be retrieved: first, the</span></div>
<div class="line">        <span class="comment">// enumeration node is retrieved from the nodemap; and second, the entry</span></div>
<div class="line">        <span class="comment">// node is retrieved from the enumeration node. The integer value of the</span></div>
<div class="line">        <span class="comment">// entry node is then set as the new value of the enumeration node.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Notice that both the enumeration and the entry nodes are checked for</span></div>
<div class="line">        <span class="comment">// availability and readability/writability. Enumeration nodes are</span></div>
<div class="line">        <span class="comment">// generally readable and writable whereas their entry nodes are only</span></div>
<div class="line">        <span class="comment">// ever readable.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Retrieve enumeration node from nodemap</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumerationPtr</a> ptrAcquisitionMode = nodeMap.GetNode(<span class="stringliteral">&quot;AcquisitionMode&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrAcquisitionMode) || !<a name="a24"></a><a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrAcquisitionMode))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set acquisition mode to continuous (enum retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve entry node from enumeration node</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrAcquisitionModeContinuous = ptrAcquisitionMode-&gt;GetEntryByName(<span class="stringliteral">&quot;Continuous&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrAcquisitionModeContinuous) || !<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrAcquisitionModeContinuous))</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Unable to set acquisition mode to continuous (entry retrieval). Aborting...&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve integer value from entry node</span></div>
<div class="line">        <span class="keyword">const</span> int64_t acquisitionModeContinuous = ptrAcquisitionModeContinuous-&gt;GetValue();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Set integer value from entry node as new value of enumeration node</span></div>
<div class="line">        ptrAcquisitionMode-&gt;SetIntValue(acquisitionModeContinuous);</div>
<div class="line"></div>
<div class="line">        <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;Acquisition mode set to continuous...&quot;</span>);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Apply Small Pixel Format</span></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrPixelFormat = pCam-&gt;PixelFormat.GetEntry(<a name="a25"></a><a class="code" href="group___camera_defs__h.html#ggabd5af55aaa20bcb0644c46241c2cbad1aab73a79118b4db06f577b5e2563d7246">PixelFormat_Mono8</a>);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrPixelFormat) &amp;&amp; (<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrPixelFormat) || <a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrPixelFormat)))</div>
<div class="line">        {</div>
<div class="line">            pCam-&gt;PixelFormat.SetValue(<a class="code" href="group___camera_defs__h.html#ggabd5af55aaa20bcb0644c46241c2cbad1aab73a79118b4db06f577b5e2563d7246">PixelFormat_Mono8</a>);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Use Bayer8 if Mono8 is not available</span></div>
<div class="line">            pCam-&gt;PixelFormat.SetValue(<a name="a26"></a><a class="code" href="group___camera_defs__h.html#ggabd5af55aaa20bcb0644c46241c2cbad1a62ceece1790956569b6fd612561e5256">PixelFormat_BayerGB8</a>);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Begin acquiring images</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// What happens when the camera begins acquiring images depends on the</span></div>
<div class="line">        <span class="comment">// acquisition mode. Single frame captures only a single image, multi</span></div>
<div class="line">        <span class="comment">// frame catures a set number of images, and continuous captures a</span></div>
<div class="line">        <span class="comment">// continuous stream of images. Because the example calls for the</span></div>
<div class="line">        <span class="comment">// retrieval of 10 images, continuous mode has been set.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** LATER ***</span></div>
<div class="line">        <span class="comment">// Image acquisition must be ended when no more images are needed.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        pCam-&gt;BeginAcquisition();</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Acquiring images...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Retrieve device serial number for filename</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// The device serial number is retrieved in order to keep cameras from</span></div>
<div class="line">        <span class="comment">// overwriting one another. Grabbing image IDs could also accomplish</span></div>
<div class="line">        <span class="comment">// this.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordtype">string</span> deviceSerialNumber(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CStringPtr</a> ptrStringSerial = nodeMapTLDevice.GetNode(<span class="stringliteral">&quot;DeviceSerialNumber&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrStringSerial) &amp;&amp; <a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrStringSerial))</div>
<div class="line">        {</div>
<div class="line">            deviceSerialNumber = ptrStringSerial-&gt;GetValue();</div>
<div class="line"></div>
<div class="line">            <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;Device serial number retrieved as &quot;</span> + deviceSerialNumber + <span class="stringliteral">&quot;...&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">        cout &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve, convert, and save images</span></div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k_numImages = 5;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> imageCnt = 0; imageCnt &lt; k_numImages; imageCnt++)</div>
<div class="line">        {</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">try</span></div>
<div class="line">            {</div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// Retrieve next received image</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// *** NOTES ***</span></div>
<div class="line">                <span class="comment">// Capturing an image houses images on the camera buffer. Trying</span></div>
<div class="line">                <span class="comment">// to capture an image that does not exist will hang the camera.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// *** LATER ***</span></div>
<div class="line">                <span class="comment">// Once an image from the buffer is saved and/or no longer</span></div>
<div class="line">                <span class="comment">// needed, the image must be released in order to keep the</span></div>
<div class="line">                <span class="comment">// buffer from filling up.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <a class="code" href="class_spinnaker_1_1_image_ptr.html">ImagePtr</a> pResultImage = pCam-&gt;GetNextImage(1000);</div>
<div class="line"></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// Ensure image completion</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// *** NOTES ***</span></div>
<div class="line">                <span class="comment">// Images can easily be checked for completion. This should be</span></div>
<div class="line">                <span class="comment">// done whenever a complete image is expected or required.</span></div>
<div class="line">                <span class="comment">// Further, check image status for a little more insight into</span></div>
<div class="line">                <span class="comment">// why an image is incomplete.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="keywordflow">if</span> (pResultImage-&gt;IsIncomplete())</div>
<div class="line">                {</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Image incomplete with image status &quot;</span> &lt;&lt; pResultImage-&gt;GetImageStatus() &lt;&lt; <span class="stringliteral">&quot;...&quot;</span> &lt;&lt; endl</div>
<div class="line">                         &lt;&lt; endl;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">//</span></div>
<div class="line">                    <span class="comment">// Print image information; height and width recorded in pixels</span></div>
<div class="line">                    <span class="comment">//</span></div>
<div class="line">                    <span class="comment">// *** NOTES ***</span></div>
<div class="line">                    <span class="comment">// Images have quite a bit of available metadata including</span></div>
<div class="line">                    <span class="comment">// things such as CRC, image status, and offset values, to</span></div>
<div class="line">                    <span class="comment">// name a few.</span></div>
<div class="line">                    <span class="comment">//</span></div>
<div class="line">                    <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(</div>
<div class="line">                        <span class="stringliteral">&quot;Grabbed image &quot;</span> + to_string(static_cast&lt;long long&gt;(imageCnt)) +</div>
<div class="line">                        <span class="stringliteral">&quot;, width = &quot;</span> + to_string(static_cast&lt;long long&gt;(pResultImage-&gt;GetWidth())) +</div>
<div class="line">                        <span class="stringliteral">&quot;, height = &quot;</span> + to_string(static_cast&lt;long long&gt;(pResultImage-&gt;GetHeight())));</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// It deepcopies to ImagePtr to pass it on</span></div>
<div class="line">                    pReferenceImage-&gt;DeepCopy(pResultImage);</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// Release image</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// *** NOTES ***</span></div>
<div class="line">                <span class="comment">// Images retrieved directly from the camera (i.e. non-converted</span></div>
<div class="line">                <span class="comment">// images) need to be released in order to keep from filling the</span></div>
<div class="line">                <span class="comment">// buffer.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                pResultImage-&gt;Release();</div>
<div class="line"></div>
<div class="line">                cout &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">                result = <span class="keyword">false</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// End acquisition</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// Ending acquisition appropriately helps ensure that devices clean up</span></div>
<div class="line">        <span class="comment">// properly and do not need to be power-cycled to maintain integrity.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        pCam-&gt;EndAcquisition();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Execute delete operation</span></div>
<div class="line"><span class="keywordtype">bool</span> <a name="a27"></a><a class="code" href="_file_access___quick_spin_8cpp.html#a45d196ec5fba9606a216e43fdf41a7c8">ExecuteDeleteCommand</a>(<a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;Deleting file...&quot;</span>);</div>
<div class="line">    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        pCam-&gt;FileOperationSelector.SetValue(<a name="a28"></a><a class="code" href="group___camera_defs__h.html#gga3844c189979b0cf77817414e98647883a416a6b87c97edf08d5d47010d392c44b">FileOperationSelector_Delete</a>);</div>
<div class="line">        pCam-&gt;FileOperationExecute.Execute();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (pCam-&gt;FileOperationStatus.GetValue() != <a name="a29"></a><a class="code" href="group___camera_defs__h.html#gga3362f3fe5e3e43a5f4ccef1b7af9b719af906380ded5b14c8f002068c484c02cf">FileOperationStatus_Success</a>)</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Failed to delete file!&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Unexpected exception : &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Open camera file for writing</span></div>
<div class="line"><span class="keywordtype">bool</span> <a name="a30"></a><a class="code" href="_file_access___quick_spin_8cpp.html#ad5e222f5cd641b9a0eb10ae7d6ec2683">OpenFileToWrite</a>(<a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;Opening file for writing...&quot;</span>);</div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        pCam-&gt;FileOperationSelector.SetValue(<a name="a31"></a><a class="code" href="group___camera_defs__h.html#gga3844c189979b0cf77817414e98647883aa65f7e9986c172be8d09e31d67412436">FileOperationSelector_Open</a>);</div>
<div class="line">        pCam-&gt;FileOpenMode.SetValue(<a name="a32"></a><a class="code" href="group___camera_defs__h.html#gga4535d353abdc0d4dbc45f1a9ff3bca76a8e69f920a0e0a740b88bbcdc24bbaadd">FileOpenMode_Write</a>);</div>
<div class="line">        pCam-&gt;FileOperationExecute.Execute();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (pCam-&gt;FileOperationStatus.GetValue() != <a class="code" href="group___camera_defs__h.html#gga3362f3fe5e3e43a5f4ccef1b7af9b719af906380ded5b14c8f002068c484c02cf">FileOperationStatus_Success</a>)</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Failed to open file for writing!&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Unexpected exception : &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>();</div>
<div class="line">        result = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Execute write operation</span></div>
<div class="line"><span class="keywordtype">bool</span> <a name="a33"></a><a class="code" href="_file_access___quick_spin_8cpp.html#a22e4884c5f4cf8689ff0a544881c5c17">ExecuteWriteCommand</a>(<a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        pCam-&gt;FileOperationSelector.SetValue(<a name="a34"></a><a class="code" href="group___camera_defs__h.html#gga3844c189979b0cf77817414e98647883acd10c5545d12aeae3f7af617e878ab08">FileOperationSelector_Write</a>);</div>
<div class="line">        pCam-&gt;FileOperationExecute.Execute();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (pCam-&gt;FileOperationStatus.GetValue() != <a class="code" href="group___camera_defs__h.html#gga3362f3fe5e3e43a5f4ccef1b7af9b719af906380ded5b14c8f002068c484c02cf">FileOperationStatus_Success</a>)</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Failed to write to file!&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Unexpected exception : &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>();</div>
<div class="line">        result = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Close the file</span></div>
<div class="line"><span class="keywordtype">bool</span> <a name="a35"></a><a class="code" href="_file_access___quick_spin_8cpp.html#a5c8d5a17c8c4d1e8c3b41c717d726ce7">CloseFile</a>(<a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line">    <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;Closing file...&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        pCam-&gt;FileOperationSelector.SetValue(<a name="a36"></a><a class="code" href="group___camera_defs__h.html#gga3844c189979b0cf77817414e98647883aaa55be20cb367493d0f153ed37d24bf4">FileOperationSelector_Close</a>);</div>
<div class="line">        pCam-&gt;FileOperationExecute.Execute();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (pCam-&gt;FileOperationStatus.GetValue() != <a class="code" href="group___camera_defs__h.html#gga3362f3fe5e3e43a5f4ccef1b7af9b719af906380ded5b14c8f002068c484c02cf">FileOperationStatus_Success</a>)</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Failed to close file!&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Unexpected exception : &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>();</div>
<div class="line">        result = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Upload the image to the camera file</span></div>
<div class="line"><span class="keywordtype">bool</span> <a name="a37"></a><a class="code" href="_file_access___quick_spin_8cpp.html#aac0578ac41ce3fcf03852c818ccf23e0">UploadImage</a>()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="class_spinnaker_1_1_system_ptr.html">SystemPtr</a> system;</div>
<div class="line">    <a class="code" href="class_spinnaker_1_1_camera_list.html">CameraList</a> camList;</div>
<div class="line">    <a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam;</div>
<div class="line">    <a class="code" href="class_spinnaker_1_1_image_ptr.html">ImagePtr</a> pReferenceImage;</div>
<div class="line">    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Initialize System</span></div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="_file_access___quick_spin_8cpp.html#a18e1788e72a5f35ff468c484c6c3340f">InitializeSystem</a>(system, camList, pCam))</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="_file_access___quick_spin_8cpp.html#ad2f07de3ba8425c1a0dd8bb862a3df50">PrintResultMessage</a>(<span class="keyword">false</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Retrieve TL device nodemap and print device information</span></div>
<div class="line">        <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMapTLDevice = pCam-&gt;GetTLDeviceNodeMap();</div>
<div class="line">        <a class="code" href="_acquisition_8cpp.html#a9a1864412533965fa228b758488637fd">PrintDeviceInfo</a>(nodeMapTLDevice);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Initialize camera</span></div>
<div class="line">        pCam-&gt;Init();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve GenICam nodemap</span></div>
<div class="line">        <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMap = pCam-&gt;GetNodeMap();</div>
<div class="line"></div>
<div class="line">        <a class="code" href="class_spinnaker_1_1_image_ptr.html">ImagePtr</a> pReferenceImage = <a name="a38"></a><a class="code" href="class_spinnaker_1_1_image.html#a700d6006f31f2201b75d5868e4c9ff67">Image::Create</a>();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Acquire images</span></div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="_acquisition_8cpp.html#a2836a024d3f74c4699c84267163c70aa">AcquireImages</a>(pCam, nodeMap, nodeMapTLDevice, pReferenceImage))</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="_file_access___quick_spin_8cpp.html#ad2f07de3ba8425c1a0dd8bb862a3df50">PrintResultMessage</a>(<span class="keyword">false</span>);</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Save a raw image for debugging purpose</span></div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="_file_access___quick_spin_8cpp.html#ab3e851b132f229f404313f732f876b2c">_enableDebug</a>)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">try</span></div>
<div class="line">            {</div>
<div class="line">                uint8_t* pData = <span class="keyword">new</span> uint8_t();</div>
<div class="line"></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;\nSaving raw image to disk for debugging purpose...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Form file path</span></div>
<div class="line">                ostringstream filename;</div>
<div class="line">                filename &lt;&lt; <span class="stringliteral">&quot;rawImage.png&quot;</span>;</div>
<div class="line"></div>
<div class="line">                <a class="code" href="class_spinnaker_1_1_image_ptr.html">ImagePtr</a> pImage = <a class="code" href="class_spinnaker_1_1_image.html#a700d6006f31f2201b75d5868e4c9ff67">Image::Create</a>(640, 480, 0, 0, <a class="code" href="group___camera_defs__h.html#ggabd5af55aaa20bcb0644c46241c2cbad1aab73a79118b4db06f577b5e2563d7246">PixelFormat_Mono8</a>, pData);</div>
<div class="line">                pImage-&gt;Save(filename.str().c_str());</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Image saved at &quot;</span> &lt;&lt; filename.str() &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Unable to save an image file : &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>();</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;*** UPLOADING IMAGE ***&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;Fetching \&quot;UserFile1\&quot; Entry from FileSelectorNode...&quot;</span>);</div>
<div class="line">        <span class="comment">// Check file selector support</span></div>
<div class="line">        <span class="keywordflow">if</span> (pCam-&gt;FileSelector == NULL)</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;File selector not supported on device!&quot;</span>;</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="group___spinnaker_gen_api_interfaces.html#ga860f0cd4b01d15fdc7851da09d141bc9">NodeList_t</a> selectorList;</div>
<div class="line">        pCam-&gt;FileSelector.GetEntries(selectorList);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; selectorList.size(); i++)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Get current enum entry node</span></div>
<div class="line">            <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> node = selectorList.at(i);</div>
<div class="line"></div>
<div class="line">            <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;Setting value to FileSelectorNode...&quot;</span>);</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Check file selector entry support</span></div>
<div class="line">            <span class="keywordflow">if</span> (!node || !<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(node))</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Go to next entry node</span></div>
<div class="line">                cout &lt;&lt; node-&gt;GetSymbolic() &lt;&lt; <span class="stringliteral">&quot; not supported!&quot;</span> &lt;&lt; endl;</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (node-&gt;GetSymbolic().compare(<a class="code" href="_file_access___quick_spin_8cpp.html#abcaf9bb238f6ed76012b2d489ab29487">_fileSelector</a>) == 0)</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;Setting value to FileSelectorNode...&quot;</span>);</div>
<div class="line">                <span class="comment">// Set file selector</span></div>
<div class="line">                pCam-&gt;FileSelector.SetIntValue((int64_t)node-&gt;GetNumericValue());</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Delete file on camera before writing in case camera runs out of space</span></div>
<div class="line">                <span class="keywordflow">if</span> (pCam-&gt;FileSize.GetValue() &gt; 0)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">if</span> (<a class="code" href="_file_access___quick_spin_8cpp.html#a45d196ec5fba9606a216e43fdf41a7c8">ExecuteDeleteCommand</a>(pCam) != <span class="keyword">true</span>)</div>
<div class="line">                    {</div>
<div class="line">                        cout &lt;&lt; <span class="stringliteral">&quot;Failed to delete file!&quot;</span> &lt;&lt; endl;</div>
<div class="line">                        <span class="keywordflow">continue</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Open file on camera for write</span></div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="_file_access___quick_spin_8cpp.html#ad5e222f5cd641b9a0eb10ae7d6ec2683">OpenFileToWrite</a>(pCam) != <span class="keyword">true</span>)</div>
<div class="line">                {</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Failed to open file!&quot;</span> &lt;&lt; endl;</div>
<div class="line">                    <span class="comment">// may be file was not closed properly last time.</span></div>
<div class="line">                    <span class="comment">// Close and re-open again</span></div>
<div class="line">                    <span class="keywordflow">if</span> (!<a class="code" href="_file_access___quick_spin_8cpp.html#a5c8d5a17c8c4d1e8c3b41c717d726ce7">CloseFile</a>(pCam))</div>
<div class="line">                    {</div>
<div class="line">                        <span class="comment">// It fails to close the file. Abort!</span></div>
<div class="line">                        cout &lt;&lt; <span class="stringliteral">&quot;Problem opening file node.&quot;</span> &lt;&lt; endl;</div>
<div class="line">                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// File was closed. Open again.</span></div>
<div class="line">                    <span class="keywordflow">if</span> (!<a class="code" href="_file_access___quick_spin_8cpp.html#ad5e222f5cd641b9a0eb10ae7d6ec2683">OpenFileToWrite</a>(pCam))</div>
<div class="line">                    {</div>
<div class="line">                        <span class="comment">// Fails again. Abort!</span></div>
<div class="line">                        cout &lt;&lt; <span class="stringliteral">&quot;Problem opening file node.&quot;</span> &lt;&lt; endl;</div>
<div class="line">                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Attempt to set FileAccessLength to FileAccessBufferNode length to speed up the write</span></div>
<div class="line">                <span class="keywordflow">if</span> (pCam-&gt;FileAccessLength.GetValue() &lt; pCam-&gt;FileAccessBuffer.GetLength())</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">try</span></div>
<div class="line">                    {</div>
<div class="line">                        pCam-&gt;FileAccessLength.SetValue(pCam-&gt;FileAccessBuffer.GetLength());</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">                    {</div>
<div class="line">                        cout &lt;&lt; <span class="stringliteral">&quot;Unable to set FileAccessLength to FileAccessBuffer length : &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>();</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Set File Access Offset to zero if its not</span></div>
<div class="line">                pCam-&gt;FileAccessOffset.SetValue(0);</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Compute number of write operations required</span></div>
<div class="line">                int64_t totalBytesToWrite = pReferenceImage-&gt;GetBufferSize();</div>
<div class="line">                int64_t intermediateBufferSize = pCam-&gt;FileAccessLength.GetValue();</div>
<div class="line">                int64_t writeIterations = (totalBytesToWrite / intermediateBufferSize) +</div>
<div class="line">                                          (totalBytesToWrite % intermediateBufferSize == 0 ? 0 : 1);</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (totalBytesToWrite == 0)</div>
<div class="line">                {</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Empty Image. No data will be written to camera.&quot;</span> &lt;&lt; endl;</div>
<div class="line">                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;Start saving image on camera...&quot;</span>);</div>
<div class="line"></div>
<div class="line">                <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;Total Bytes to write : &quot;</span> + to_string(static_cast&lt;long long&gt;(totalBytesToWrite)));</div>
<div class="line">                <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;FileAccessLength : &quot;</span> + to_string(static_cast&lt;long long&gt;(intermediateBufferSize)));</div>
<div class="line">                <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;Write Iterations : &quot;</span> + to_string(static_cast&lt;long long&gt;(writeIterations)));</div>
<div class="line"></div>
<div class="line">                int64_t index = 0;</div>
<div class="line">                int64_t bytesLeftToWrite = totalBytesToWrite;</div>
<div class="line">                int64_t totalBytesWritten = 0;</div>
<div class="line">                <span class="keywordtype">bool</span> paddingRequired = <span class="keyword">false</span>;</div>
<div class="line">                <span class="keywordtype">int</span> numPaddings = 0;</div>
<div class="line"></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Writing data to device&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">                <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pImageData = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(pReferenceImage-&gt;GetData());</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; writeIterations; i++)</div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">// Check whether padding is required</span></div>
<div class="line">                    <span class="keywordflow">if</span> (intermediateBufferSize &gt; bytesLeftToWrite)</div>
<div class="line">                    {</div>
<div class="line">                        <span class="comment">// Check for multiple of 4 bytes</span></div>
<div class="line">                        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> remainder = bytesLeftToWrite % 4;</div>
<div class="line">                        <span class="keywordflow">if</span> (remainder != 0)</div>
<div class="line">                        {</div>
<div class="line">                            paddingRequired = <span class="keyword">true</span>;</div>
<div class="line">                            numPaddings = 4 - remainder;</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Setup data to write</span></div>
<div class="line">                    int64_t tmpBufferSize = intermediateBufferSize &lt;= bytesLeftToWrite</div>
<div class="line">                                                ? intermediateBufferSize</div>
<div class="line">                                                : (bytesLeftToWrite + numPaddings);</div>
<div class="line">                    std::unique_ptr&lt;unsigned char&gt; tmpBuffer(<span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[tmpBufferSize]);</div>
<div class="line">                    memcpy(</div>
<div class="line">                        tmpBuffer.get(),</div>
<div class="line">                        &amp;pImageData[index],</div>
<div class="line">                        ((intermediateBufferSize &lt;= bytesLeftToWrite) ? intermediateBufferSize : bytesLeftToWrite));</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span> (paddingRequired)</div>
<div class="line">                    {</div>
<div class="line">                        <span class="comment">// Fill padded bytes</span></div>
<div class="line">                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; numPaddings; j++)</div>
<div class="line">                        {</div>
<div class="line">                            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pTmpBuffer = tmpBuffer.get();</div>
<div class="line">                            pTmpBuffer[bytesLeftToWrite + j] = 255;</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Update index for next write iteration</span></div>
<div class="line">                    index = index +</div>
<div class="line">                            (intermediateBufferSize &lt;= bytesLeftToWrite ? intermediateBufferSize : bytesLeftToWrite);</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Write to FileAccessBufferNode</span></div>
<div class="line">                    pCam-&gt;FileAccessBuffer.Set(tmpBuffer.get(), tmpBufferSize);</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span> (intermediateBufferSize &gt; bytesLeftToWrite)</div>
<div class="line">                    {</div>
<div class="line">                        <span class="comment">// Update FileAccessLength node appropriately to prevent garbage data outside the range of</span></div>
<div class="line">                        <span class="comment">// the uploaded file to be written to the camera</span></div>
<div class="line">                        pCam-&gt;FileAccessLength.SetValue(bytesLeftToWrite);</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Perform Write command</span></div>
<div class="line">                    <span class="keywordflow">if</span> (!<a class="code" href="_file_access___quick_spin_8cpp.html#a22e4884c5f4cf8689ff0a544881c5c17">ExecuteWriteCommand</a>(pCam))</div>
<div class="line">                    {</div>
<div class="line">                        cout &lt;&lt; <span class="stringliteral">&quot;Writing to stream failed!&quot;</span> &lt;&lt; endl;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Verify size of bytes written</span></div>
<div class="line">                    int64_t sizeWritten = pCam-&gt;FileOperationResult.GetValue();</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Log current file access offset</span></div>
<div class="line">                    <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;File Access Offset: &quot;</span> + to_string(pCam-&gt;FileAccessOffset.GetValue()));</div>
<div class="line">                    <span class="comment">// Keep track of total bytes written</span></div>
<div class="line">                    totalBytesWritten += sizeWritten;</div>
<div class="line">                    <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(</div>
<div class="line">                        <span class="stringliteral">&quot;Bytes written: &quot;</span> + to_string(static_cast&lt;long long&gt;(totalBytesWritten)) + <span class="stringliteral">&quot; of &quot;</span> +</div>
<div class="line">                        to_string(static_cast&lt;long long&gt;(totalBytesToWrite)));</div>
<div class="line">                    <span class="comment">// Keep track of bytes left to write</span></div>
<div class="line">                    bytesLeftToWrite = totalBytesToWrite - totalBytesWritten;</div>
<div class="line">                    <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;Bytes left: &quot;</span> + to_string(static_cast&lt;long long&gt;(bytesLeftToWrite)));</div>
<div class="line"></div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Progress : &quot;</span> &lt;&lt; (i * 100 / writeIterations) &lt;&lt; <span class="stringliteral">&quot; %&quot;</span> &lt;&lt; endl;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Writing complete&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (!<a class="code" href="_file_access___quick_spin_8cpp.html#a5c8d5a17c8c4d1e8c3b41c717d726ce7">CloseFile</a>(pCam))</div>
<div class="line">                {</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Failed to close file!&quot;</span> &lt;&lt; endl;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Release reference to the camera</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// Had the CameraPtr object been created within the for-loop, it would not</span></div>
<div class="line">        <span class="comment">// be necessary to manually break the reference because the shared pointer</span></div>
<div class="line">        <span class="comment">// would have automatically cleaned itself up upon exiting the loop.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        pCam-&gt;DeInit();</div>
<div class="line">        pCam = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Clear camera list before releasing system</span></div>
<div class="line">        camList.<a class="code" href="class_spinnaker_1_1_camera_list.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Release system</span></div>
<div class="line">        system-&gt;ReleaseInstance();</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Done! Press Enter to exit...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        getchar();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Unexpected exception : &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>();</div>
<div class="line">        result = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Open camera file to read</span></div>
<div class="line"><span class="keywordtype">bool</span> <a name="a39"></a><a class="code" href="_file_access___quick_spin_8cpp.html#aa9a3169ab5ffec7b923dc135383aaeab">OpenFileToRead</a>(<a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCamera)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Opening file for reading...&quot;</span> &lt;&lt; endl;</div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        pCamera-&gt;FileOperationSelector.SetValue(<a class="code" href="group___camera_defs__h.html#gga3844c189979b0cf77817414e98647883aa65f7e9986c172be8d09e31d67412436">FileOperationSelector_Open</a>);</div>
<div class="line">        pCamera-&gt;FileOpenMode.SetValue(<a name="a40"></a><a class="code" href="group___camera_defs__h.html#gga4535d353abdc0d4dbc45f1a9ff3bca76a557d205b58ec0ecc8a1cb4302754bd44">FileOpenMode_Read</a>);</div>
<div class="line">        pCamera-&gt;FileOperationExecute.Execute();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (pCamera-&gt;FileOperationStatus.GetValue() != <a class="code" href="group___camera_defs__h.html#gga3362f3fe5e3e43a5f4ccef1b7af9b719af906380ded5b14c8f002068c484c02cf">FileOperationStatus_Success</a>)</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Failed to open file for reading!&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Unexpected exception : &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Execute read operation</span></div>
<div class="line"><span class="keywordtype">bool</span> <a name="a41"></a><a class="code" href="_file_access___quick_spin_8cpp.html#ae09ec01021ec07f96cbbb648cb6688f5">ExecuteReadCommand</a>(<a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCamera)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        pCamera-&gt;FileOperationSelector.SetValue(<a name="a42"></a><a class="code" href="group___camera_defs__h.html#gga3844c189979b0cf77817414e98647883a4e35e0398c346f917337b034c53736cc">FileOperationSelector_Read</a>);</div>
<div class="line">        pCamera-&gt;FileOperationExecute.Execute();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (pCamera-&gt;FileOperationStatus.GetValue() != <a class="code" href="group___camera_defs__h.html#gga3362f3fe5e3e43a5f4ccef1b7af9b719af906380ded5b14c8f002068c484c02cf">FileOperationStatus_Success</a>)</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Failed to read file!&quot;</span> &lt;&lt; endl;</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Unexpected exception : &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Download the image to the disk from camera file</span></div>
<div class="line"><span class="keywordtype">bool</span> <a name="a43"></a><a class="code" href="_file_access___quick_spin_8cpp.html#afe235545a4f6ab776a93de3aaa633a7b">DownloadImage</a>()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="class_spinnaker_1_1_system_ptr.html">SystemPtr</a> system;</div>
<div class="line">    <a class="code" href="class_spinnaker_1_1_camera_list.html">CameraList</a> camList;</div>
<div class="line">    <a class="code" href="class_spinnaker_1_1_camera_ptr.html">CameraPtr</a> pCam;</div>
<div class="line">    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Initialize System</span></div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="_file_access___quick_spin_8cpp.html#a18e1788e72a5f35ff468c484c6c3340f">InitializeSystem</a>(system, camList, pCam))</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="_file_access___quick_spin_8cpp.html#ad2f07de3ba8425c1a0dd8bb862a3df50">PrintResultMessage</a>(<span class="keyword">false</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Print out current library version</span></div>
<div class="line">    <span class="keyword">const</span> <a name="_a44"></a><a class="code" href="struct_spinnaker_1_1_library_version.html">LibraryVersion</a> spinnakerLibraryVersion = system-&gt;GetLibraryVersion();</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Spinnaker library version: &quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a45"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#a435ca80707c851bea186e73a1be5d3b9">major</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a46"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#a41c0e171b65e16617977006e58fbbbc5">minor</a></div>
<div class="line">         &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a47"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#a4bfea42429249a1f65204f0c0f34704a">type</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; spinnakerLibraryVersion.<a name="a48"></a><a class="code" href="struct_spinnaker_1_1_library_version.html#ad263db2963cb8e231c207328372e17bb">build</a> &lt;&lt; endl</div>
<div class="line">         &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Retrieve TL device nodemap and print device information</span></div>
<div class="line">        <a class="code" href="group___i_node_map__h.html#ga3e4a9df80b7da602af317c71c6541c71">INodeMap</a>&amp; nodeMapTLDevice = pCam-&gt;GetTLDeviceNodeMap();</div>
<div class="line">        <a class="code" href="_acquisition_8cpp.html#a9a1864412533965fa228b758488637fd">PrintDeviceInfo</a>(nodeMapTLDevice);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Initialize camera</span></div>
<div class="line">        pCam-&gt;Init();</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;*** DOWNLOADING IMAGE ***&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Check file selector support</span></div>
<div class="line">        <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;Fetching \&quot;UserFile1\&quot; Entry from FileSelectorNode...&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (pCam-&gt;FileSelector == NULL)</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;File selector not supported on device!&quot;</span>;</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="group___spinnaker_gen_api_interfaces.html#ga860f0cd4b01d15fdc7851da09d141bc9">NodeList_t</a> selectorList;</div>
<div class="line">        pCam-&gt;FileSelector.GetEntries(selectorList);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; selectorList.size(); i++)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Get current enum entry node</span></div>
<div class="line">            <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> node = selectorList.at(i);</div>
<div class="line"></div>
<div class="line">            <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;Setting value to FileSelectorNode...&quot;</span>);</div>
<div class="line">            <span class="comment">// Check file selector entry support</span></div>
<div class="line">            <span class="keywordflow">if</span> (!node || !<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(node))</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Go to next entry node</span></div>
<div class="line">                cout &lt;&lt; node-&gt;GetSymbolic() &lt;&lt; <span class="stringliteral">&quot; not supported!&quot;</span> &lt;&lt; endl;</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (node-&gt;GetSymbolic().compare(<a class="code" href="_file_access___quick_spin_8cpp.html#abcaf9bb238f6ed76012b2d489ab29487">_fileSelector</a>) == 0)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Set file selector</span></div>
<div class="line">                pCam-&gt;FileSelector.SetIntValue((int64_t)node-&gt;GetNumericValue());</div>
<div class="line"></div>
<div class="line">                int64_t bytesToRead = pCam-&gt;FileSize.GetValue();</div>
<div class="line">                <span class="keywordflow">if</span> (bytesToRead == 0)</div>
<div class="line">                {</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;No data available to read!&quot;</span> &lt;&lt; endl;</div>
<div class="line">                    <span class="keywordflow">continue</span>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;Total data to download : &quot;</span> + to_string(static_cast&lt;long long&gt;(bytesToRead)));</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Open file on camera for reading</span></div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="_file_access___quick_spin_8cpp.html#aa9a3169ab5ffec7b923dc135383aaeab">OpenFileToRead</a>(pCam) != <span class="keyword">true</span>)</div>
<div class="line">                {</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Failed to open file!&quot;</span> &lt;&lt; endl;</div>
<div class="line">                    <span class="keywordflow">continue</span>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Attempt to set FileAccessLength to FileAccessBufferNode length to speed up the write</span></div>
<div class="line">                <span class="keywordflow">if</span> (pCam-&gt;FileAccessLength.GetValue() &lt; pCam-&gt;FileAccessBuffer.GetLength())</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">try</span></div>
<div class="line">                    {</div>
<div class="line">                        pCam-&gt;FileAccessLength.SetValue(pCam-&gt;FileAccessBuffer.GetLength());</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">                    {</div>
<div class="line">                        cout &lt;&lt; <span class="stringliteral">&quot;Unable to set FileAccessLength to FileAccessBuffer length : &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Set File Access Offset to zero if its not</span></div>
<div class="line">                pCam-&gt;FileAccessOffset.SetValue(0);</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Compute number of read operations required</span></div>
<div class="line">                int64_t intermediateBufferSize = pCam-&gt;FileAccessLength.GetValue();</div>
<div class="line">                int64_t iterations =</div>
<div class="line">                    (bytesToRead / intermediateBufferSize) + (bytesToRead % intermediateBufferSize == 0 ? 0 : 1);</div>
<div class="line"></div>
<div class="line">                <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;Fetching image from camera.&quot;</span>);</div>
<div class="line"></div>
<div class="line">                int64_t index = 0;</div>
<div class="line">                int64_t totalSizeRead = 0;</div>
<div class="line">                std::unique_ptr&lt;unsigned char&gt; dataBuffer(<span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[bytesToRead]);</div>
<div class="line">                uint8_t* pData = dataBuffer.get();</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; iterations; i++)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">if</span> (!<a class="code" href="_file_access___quick_spin_8cpp.html#ae09ec01021ec07f96cbbb648cb6688f5">ExecuteReadCommand</a>(pCam))</div>
<div class="line">                    {</div>
<div class="line">                        cout &lt;&lt; <span class="stringliteral">&quot;Reading stream failed!&quot;</span> &lt;&lt; endl;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Verify size of bytes read</span></div>
<div class="line">                    int64_t sizeRead = pCam-&gt;FileOperationResult.GetValue();</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Read from buffer Node</span></div>
<div class="line">                    pCam-&gt;FileAccessBuffer.Get(&amp;pData[index], sizeRead);</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Update index for next read iteration</span></div>
<div class="line">                    index = index + sizeRead;</div>
<div class="line"></div>
<div class="line">                    <span class="comment">// Keep track of total bytes read</span></div>
<div class="line">                    totalSizeRead += sizeRead;</div>
<div class="line">                    <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(</div>
<div class="line">                        <span class="stringliteral">&quot;Bytes read: &quot;</span> + to_string(static_cast&lt;long long&gt;(totalSizeRead)) + <span class="stringliteral">&quot; of &quot;</span> +</div>
<div class="line">                        to_string(static_cast&lt;long long&gt;(bytesToRead)));</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Progress : &quot;</span> &lt;&lt; (i * 100 / iterations) &lt;&lt; <span class="stringliteral">&quot; %&quot;</span> &lt;&lt; endl;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <a class="code" href="_file_access___quick_spin_8cpp.html#a9f2ab60db0d1d77bd32fbb69070c1d07">PrintDebugMessage</a>(<span class="stringliteral">&quot;Reading complete&quot;</span>);</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (!<a class="code" href="_file_access___quick_spin_8cpp.html#a5c8d5a17c8c4d1e8c3b41c717d726ce7">CloseFile</a>(pCam))</div>
<div class="line">                {</div>
<div class="line">                    cout &lt;&lt; <span class="stringliteral">&quot;Failed to close file!&quot;</span> &lt;&lt; endl;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                cout &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Form file path</span></div>
<div class="line">                ostringstream filename;</div>
<div class="line">                filename &lt;&lt; <span class="stringliteral">&quot;DeviceStreamRead-&quot;</span>;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (pCam-&gt;DeviceSerialNumber != NULL)</div>
<div class="line">                {</div>
<div class="line">                    filename &lt;&lt; pCam-&gt;DeviceSerialNumber.GetValue().c_str() &lt;&lt; <span class="stringliteral">&quot;-&quot;</span>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                filename &lt;&lt; <span class="stringliteral">&quot;.bmp&quot;</span>;</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Image should be captured with Mono8 or Bayer8, it sets camera to correct pixel format</span></div>
<div class="line">                <span class="comment">// in order to grab image ROI</span></div>
<div class="line">                <a class="code" href="class_spinnaker_1_1_gen_api_1_1_c_pointer.html">CEnumEntryPtr</a> ptrPixelFormat = pCam-&gt;PixelFormat.GetEntry(<a class="code" href="group___camera_defs__h.html#ggabd5af55aaa20bcb0644c46241c2cbad1aab73a79118b4db06f577b5e2563d7246">PixelFormat_Mono8</a>);</div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="group___i_node__h.html#gaebc2f6f9dea95ce16a4d8f30ccfe0646">IsAvailable</a>(ptrPixelFormat) &amp;&amp; (<a class="code" href="group___i_node__h.html#gacb8a89e72218331cdb53e0a530a6a566">IsReadable</a>(ptrPixelFormat) || <a class="code" href="group___i_node__h.html#ga2f718ca036fb1f237422cd1766a0de83">IsWritable</a>(ptrPixelFormat)))</div>
<div class="line">                {</div>
<div class="line">                    pCam-&gt;PixelFormat.SetValue(<a class="code" href="group___camera_defs__h.html#ggabd5af55aaa20bcb0644c46241c2cbad1aab73a79118b4db06f577b5e2563d7246">PixelFormat_Mono8</a>);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">// Use Bayer8 if Mono8 is not available</span></div>
<div class="line">                    pCam-&gt;PixelFormat.SetValue(<a class="code" href="group___camera_defs__h.html#ggabd5af55aaa20bcb0644c46241c2cbad1a62ceece1790956569b6fd612561e5256">PixelFormat_BayerGB8</a>);</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keyword">const</span> int64_t width = pCam-&gt;Width.GetValue();</div>
<div class="line">                <span class="keyword">const</span> int64_t height = pCam-&gt;Height.GetValue();</div>
<div class="line">                <span class="keyword">const</span> int64_t offSetX = pCam-&gt;OffsetX.GetValue();</div>
<div class="line">                <span class="keyword">const</span> int64_t offSetY = pCam-&gt;OffsetX.GetValue();</div>
<div class="line">                <a class="code" href="group___camera_defs__h.html#gabd5af55aaa20bcb0644c46241c2cbad1">PixelFormatEnums</a> pixelFormat = pCam-&gt;PixelFormat.GetValue();</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Form image and save image</span></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Width : &quot;</span> &lt;&lt; width &lt;&lt; endl;</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Height : &quot;</span> &lt;&lt; height &lt;&lt; endl;</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;OffSetX : &quot;</span> &lt;&lt; offSetX &lt;&lt; endl;</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;OffSetY : &quot;</span> &lt;&lt; offSetY &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">                <a class="code" href="class_spinnaker_1_1_image_ptr.html">ImagePtr</a> pImage = <a class="code" href="class_spinnaker_1_1_image.html#a700d6006f31f2201b75d5868e4c9ff67">Image::Create</a>(width, height, offSetX, offSetY, pixelFormat, pData);</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="_file_access___quick_spin_8cpp.html#ab3e851b132f229f404313f732f876b2c">_enableDebug</a>)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">try</span></div>
<div class="line">                    {</div>
<div class="line">                        cout &lt;&lt; <span class="stringliteral">&quot;\nSaving raw image to disk for debugging purpose...&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">                        <span class="comment">// Form file path</span></div>
<div class="line">                        ostringstream filename;</div>
<div class="line">                        filename &lt;&lt; <span class="stringliteral">&quot;downloaded_output.bmp&quot;</span>;</div>
<div class="line"></div>
<div class="line">                        pImage-&gt;Save(filename.str().c_str());</div>
<div class="line">                        cout &lt;&lt; <span class="stringliteral">&quot;Image saved at &quot;</span> &lt;&lt; filename.str() &lt;&lt; endl;</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">                    {</div>
<div class="line">                        cout &lt;&lt; <span class="stringliteral">&quot;Unable to write image data to the PC : &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                pImage-&gt;Save(filename.str().c_str());</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Image saved at &quot;</span> &lt;&lt; filename.str() &lt;&lt; endl;</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;\n*** SAVING IMAGE ***\n&quot;</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// Release reference to the camera</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// *** NOTES ***</span></div>
<div class="line">        <span class="comment">// Had the CameraPtr object been created within the for-loop, it would not</span></div>
<div class="line">        <span class="comment">// be necessary to manually break the reference because the shared pointer</span></div>
<div class="line">        <span class="comment">// would have automatically cleaned itself up upon exiting the loop.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        pCam-&gt;DeInit();</div>
<div class="line">        pCam = <span class="keyword">nullptr</span>;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Clear camera list before releasing system</span></div>
<div class="line">        camList.<a class="code" href="class_spinnaker_1_1_camera_list.html#aa71d36872f416feaa853788a7a7a7ef8">Clear</a>();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Release system</span></div>
<div class="line">        system-&gt;ReleaseInstance();</div>
<div class="line"></div>
<div class="line">        cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Done! Press Enter to exit...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        getchar();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="class_spinnaker_1_1_exception.html">Spinnaker::Exception</a>&amp; e)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Unexpected exception : &quot;</span> &lt;&lt; e.<a class="code" href="class_spinnaker_1_1_exception.html#aff06f49065b54a8a86e02e9a2441a8ba">what</a>() &lt;&lt; endl;</div>
<div class="line">        result = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Print out usage of the application</span></div>
<div class="line"><span class="keywordtype">void</span> <a name="a49"></a><a class="code" href="_file_access___quick_spin_8cpp.html#a64d28f49232d9fada3edd46309ab6830">PrintUsage</a>()</div>
<div class="line">{</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Usage: FileAcess &lt;/u | /d&gt;&quot;</span> &lt;&lt; endl;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Options:&quot;</span> &lt;&lt; endl;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;/u : Grab an image and store it on camera.&quot;</span> &lt;&lt; endl;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;/d : Download saved image from camera and store it on desktop.&quot;</span> &lt;&lt; endl;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;/v : Enable verbose output.&quot;</span> &lt;&lt; endl;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;/? : Print usage informaion.&quot;</span> &lt;&lt; endl;</div>
<div class="line">    cout &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Example entry point; please see Enumeration example for more in-depth</span></div>
<div class="line"><span class="comment">// comments on preparing and cleaning up the system.</span></div>
<div class="line"><span class="keywordtype">int</span> <a name="a50"></a><a class="code" href="_acquisition_8cpp.html#a2c3f6775325c30275d11c6abee2db6a0">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Since this application saves images in the current folder</span></div>
<div class="line">    <span class="comment">// we must ensure that we have permission to write to this folder.</span></div>
<div class="line">    <span class="comment">// If we do not have permission, fail right away.</span></div>
<div class="line">    FILE* tempFile = fopen(<span class="stringliteral">&quot;test.txt&quot;</span>, <span class="stringliteral">&quot;w+&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (tempFile == <span class="keyword">nullptr</span>)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Failed to create file in current folder.  Please check &quot;</span></div>
<div class="line">                <span class="stringliteral">&quot;permissions.&quot;</span></div>
<div class="line">             &lt;&lt; endl;</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Press Enter to exit...&quot;</span> &lt;&lt; endl;</div>
<div class="line">        getchar();</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    fclose(tempFile);</div>
<div class="line">    <span class="keyword">remove</span>(<span class="stringliteral">&quot;test.txt&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Print application build information</span></div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Application build date: &quot;</span> &lt;&lt; __DATE__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; __TIME__ &lt;&lt; endl &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Change arguments to string for easy read</span></div>
<div class="line">    std::vector&lt;std::string&gt; args(argv, argv + argc);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Check verbose output flag first</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 1; i &lt; args.size(); ++i)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (args[i] == <span class="stringliteral">&quot;/v&quot;</span> || args[i] == <span class="stringliteral">&quot;/V&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="_file_access___quick_spin_8cpp.html#ab3e851b132f229f404313f732f876b2c">_enableDebug</a> = <span class="keyword">true</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (args[i] == <span class="stringliteral">&quot;?&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="_file_access___quick_spin_8cpp.html#a64d28f49232d9fada3edd46309ab6830">PrintUsage</a>();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (args[i] == <span class="stringliteral">&quot;/u&quot;</span> || args[i] == <span class="stringliteral">&quot;/U&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (!<a class="code" href="_file_access___quick_spin_8cpp.html#aac0578ac41ce3fcf03852c818ccf23e0">UploadImage</a>())</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="_file_access___quick_spin_8cpp.html#ad2f07de3ba8425c1a0dd8bb862a3df50">PrintResultMessage</a>(<span class="keyword">false</span>);</div>
<div class="line">                result = -1;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> result;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (args[i] == <span class="stringliteral">&quot;/d&quot;</span> || args[i] == <span class="stringliteral">&quot;/D&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (!<a class="code" href="_file_access___quick_spin_8cpp.html#afe235545a4f6ab776a93de3aaa633a7b">DownloadImage</a>())</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="_file_access___quick_spin_8cpp.html#ad2f07de3ba8425c1a0dd8bb862a3df50">PrintResultMessage</a>(<span class="keyword">false</span>);</div>
<div class="line">                result = -1;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> result;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->

  <table style="width: 100%;border-spacing: 0px 0px;border-left-style: solid;border-left-width: ;border-left-color: #8c8888;border-right-style: solid;border-right-width: ;border-right-color: #8c8888;border-top-style: solid;border-top-width: ;border-top-color: #8c8888;border-bottom-style: solid;border-bottom-width: ;border-bottom-color: #8c8888;margin-left: 0;margin-right: auto;padding: 0px">
    <col />
    <col />
    <col />
        <tbody>
            <tr>
                <td style="background-color: #8c8888;color: #ffffff;"><a class="footer" href="https://www.flir.com/support-center/rma/iis-support-request">Contact Support </a> </td>
                <td style="background-color: #8c8888;color: #ffffff;text-align: center;font-size: 16px;font-weight: bold">Spinnaker&#174; SDK Programmer's Guide and API Reference</td>
                <td style="background-color: #8c8888;color: #ffffff;text-align: right;"><address class="footer">
Wed Sep 30 2020 &#160;© <a class="footer" href="https://www.flir.com/iis/machine-vision">FLIR Integrated Imaging Solutions Inc. All rights reserved.</a></address></td>
            </tr>
        </tbody>
  </table>
</body>
</html>
