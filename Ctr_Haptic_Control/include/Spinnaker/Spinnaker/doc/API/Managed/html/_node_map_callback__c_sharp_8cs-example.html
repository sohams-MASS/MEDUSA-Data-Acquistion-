<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <title>Spinnaker Managed: NodeMapCallback_CSharp.cs</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="ga.js"></script>
  <link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <div id="top"><!-- do not remove this div! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0.9em" width="100%">
      <tbody>
        <tr style="height: 56px;">
          <td id="projectlogo" style="padding-left: 0.9em;text-align: left;background: #ffffff;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><a href="https://www.flir.com/iis/machine-vision"><img alt="Logo" src="FLIR_Logo.png"/></a></td>
          <td style="padding-left: 0.5em;text-align: left;background: #002f86;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><div id="projectname">Spinnaker Managed</div></td>
          <td style="padding-right: 0.9em;text-align: right;background: #002f86;background: linear-gradient(#002f86, #ffffff);color: #ffffff;" width="30%"><div id="projectname"><span id="projectnumber">2.0.0.0</span></td>
        </tr>
      </tbody>
    </table>
  </div>
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">NodeMapCallback_CSharp.cs</div>  </div>
</div><!--header-->
<div class="contents">
<p>NodeMapCallback_CSharp.cs shows how to use GenICam-defined callbacks.It relies on information provided in the <a class="el" href="namespace_enumeration___c_sharp.html">Enumeration_CSharp</a>, <a class="el" href="namespace_acquisition___c_sharp.html">Acquisition_CSharp</a>, and <a class="el" href="namespace_node_map_info___c_sharp.html">NodeMapInfo_CSharp</a> examples. As callbacks are very similar to events, it may be a good idea to explore this example prior to tackling the events examples.</p>
<p>This example focuses on creating, registering, using, and unregistering callbacks. A callback requires a function signature, which allows it to be registered to and access a node. Events, while slightly more complex, follow this same pattern.</p>
<p>Once comfortable with <a class="el" href="namespace_node_map_callback___c_sharp.html">NodeMapCallback_CSharp</a>, we suggest checking out any of the events examples: <a class="el" href="namespace_device_events___c_sharp.html">DeviceEvents_CSharp</a>, <a class="el" href="namespace_enumeration_events___c_sharp.html">EnumerationEvents_CSharp</a>, <a class="el" href="namespace_image_events___c_sharp.html">ImageEvents_CSharp</a>, or <a class="el" href="namespace_logging___c_sharp.html">Logging_CSharp</a>.</p>
<div class="fragment"><div class="line"><span class="comment">//=============================================================================</span></div>
<div class="line"><span class="comment">// Copyright (c) 2001-2019 FLIR Systems, Inc. All Rights Reserved.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// This software is the confidential and proprietary information of FLIR</span></div>
<div class="line"><span class="comment">// Integrated Imaging Solutions, Inc. (&quot;Confidential Information&quot;). You</span></div>
<div class="line"><span class="comment">// shall not disclose such Confidential Information and shall use it only in</span></div>
<div class="line"><span class="comment">// accordance with the terms of the license agreement you entered into</span></div>
<div class="line"><span class="comment">// with FLIR Integrated Imaging Solutions, Inc. (FLIR).</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// FLIR MAKES NO REPRESENTATIONS OR WARRANTIES ABOUT THE SUITABILITY OF THE</span></div>
<div class="line"><span class="comment">// SOFTWARE, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE</span></div>
<div class="line"><span class="comment">// IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR</span></div>
<div class="line"><span class="comment">// PURPOSE, OR NON-INFRINGEMENT. FLIR SHALL NOT BE LIABLE FOR ANY DAMAGES</span></div>
<div class="line"><span class="comment">// SUFFERED BY LICENSEE AS A RESULT OF USING, MODIFYING OR DISTRIBUTING</span></div>
<div class="line"><span class="comment">// THIS SOFTWARE OR ITS DERIVATIVES.</span></div>
<div class="line"><span class="comment">//=============================================================================</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using</span> System;</div>
<div class="line"><span class="keyword">using</span> System.Collections.Generic;</div>
<div class="line"><span class="keyword">using</span> SpinnakerNET;</div>
<div class="line"><span class="keyword">using</span> SpinnakerNET.GenApi;</div>
<div class="line"></div>
<div class="line"><span class="keyword">namespace </span>NodeMapCallback_CSharp</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">class </span>Program</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// This is the first of two callback functions. Notice the function</span></div>
<div class="line">        <span class="comment">// signature. This callback function will be registered to the height</span></div>
<div class="line">        <span class="comment">// node.</span></div>
<div class="line">        <span class="keywordtype">void</span> OnHeightNodeUpdate(INode node)</div>
<div class="line">        {</div>
<div class="line">            IInteger iHeight = (IInteger) node;</div>
<div class="line"></div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;Height callback message:&quot;</span>);</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;\tHeight changed to {0}...\n&quot;</span>, iHeight.Value);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// This is the second of two callback functions. Notice that despite</span></div>
<div class="line">        <span class="comment">// different names, everything else is exactly the same as the first.</span></div>
<div class="line">        <span class="comment">// This callback function will be registered to the gain node.</span></div>
<div class="line">        <span class="keywordtype">void</span> OnGainNodeUpdate(INode node)</div>
<div class="line">        {</div>
<div class="line">            IFloat iGain = (IFloat) node;</div>
<div class="line"></div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;Gain callback message:&quot;</span>);</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;\tGain changed to {0}...\n&quot;</span>, iGain.Value);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// This function prepares the example by disabling automatic gain,</span></div>
<div class="line">        <span class="comment">// creating the callbacks, and registering them to their respective</span></div>
<div class="line">        <span class="comment">// nodes.</span></div>
<div class="line">        <span class="keywordtype">int</span> ConfigureCallbacks(INodeMap nodeMap)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;\n*** CONFIGURING CALLBACKS ***\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">try</span></div>
<div class="line">            {</div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// Turn off automatic gain</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// *** NOTES ***</span></div>
<div class="line">                <span class="comment">// Automatic gain prevents the manual configuration of gain</span></div>
<div class="line">                <span class="comment">// times and needs to be turned off for this example.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// *** LATER ***</span></div>
<div class="line">                <span class="comment">// Automatic gain is turned off at the end of the example in</span></div>
<div class="line">                <span class="comment">// order to restore the camera to its default state.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                IEnum iGainAuto = nodeMap.GetNode&lt;IEnum&gt;(<span class="stringliteral">&quot;GainAuto&quot;</span>);</div>
<div class="line">                <span class="keywordflow">if</span> (iGainAuto == null || !iGainAuto.IsWritable)</div>
<div class="line">                {</div>
<div class="line">                    Console.WriteLine(<span class="stringliteral">&quot;Unable to disable automatic gain (enum retrieval). Aborting...\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> -1;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                IEnumEntry iGainAutoOff = iGainAuto.GetEntryByName(<span class="stringliteral">&quot;Off&quot;</span>);</div>
<div class="line">                <span class="keywordflow">if</span> (iGainAutoOff == null || !iGainAutoOff.IsReadable)</div>
<div class="line">                {</div>
<div class="line">                    Console.WriteLine(<span class="stringliteral">&quot;Unable to disable automatic gain (entry retrieval). Aborting...\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> -1;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                iGainAuto.Value = iGainAutoOff.Value;</div>
<div class="line"></div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Automatic gain disabled...&quot;</span>);</div>
<div class="line"></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// Register callback to height node</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// *** NOTES ***</span></div>
<div class="line">                <span class="comment">// Callbacks need to be registered to nodes, which should be</span></div>
<div class="line">                <span class="comment">// writable if the callback is to ever be triggered. Notice</span></div>
<div class="line">                <span class="comment">// that callback registration returns an integer - this integer</span></div>
<div class="line">                <span class="comment">// is important at the end of the example for deregistration.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// *** LATER ***</span></div>
<div class="line">                <span class="comment">// Each callback needs to be unregistered individually before</span></div>
<div class="line">                <span class="comment">// releasing the system or an exception will be thrown.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                IInteger iHeight = nodeMap.GetNode&lt;IInteger&gt;(<span class="stringliteral">&quot;Height&quot;</span>);</div>
<div class="line">                <span class="keywordflow">if</span> (iHeight == null || !iHeight.IsWritable)</div>
<div class="line">                {</div>
<div class="line">                    Console.WriteLine(<span class="stringliteral">&quot;Unable to register height callback. Aborting...\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> -1;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                iHeight.Updated += <span class="keyword">new</span> NodeEventHandler(OnHeightNodeUpdate);</div>
<div class="line"></div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Height callback registered...&quot;</span>);</div>
<div class="line"></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// Register callback to gain node</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// *** NOTES ***</span></div>
<div class="line">                <span class="comment">// Depending on the specific goal of the function, it can be</span></div>
<div class="line">                <span class="comment">// important to notice the node type that a callback is</span></div>
<div class="line">                <span class="comment">// registered to. Notice in the callback functions above that</span></div>
<div class="line">                <span class="comment">// the callback registered to height casts its node as an</span></div>
<div class="line">                <span class="comment">// integer whereas the callback registered to gain casts as a</span></div>
<div class="line">                <span class="comment">// float.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// *** LATER ***</span></div>
<div class="line">                <span class="comment">// Each callback needs to be unregistered individually before</span></div>
<div class="line">                <span class="comment">// releasing the system or an exception will be thrown.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                IFloat iGain = nodeMap.GetNode&lt;IFloat&gt;(<span class="stringliteral">&quot;Gain&quot;</span>);</div>
<div class="line">                <span class="keywordflow">if</span> (iGain == null || !iGain.IsWritable)</div>
<div class="line">                {</div>
<div class="line">                    Console.WriteLine(<span class="stringliteral">&quot;Unable to register gain callback. Aborting...\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> -1;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                iGain.Updated += <span class="keyword">new</span> NodeEventHandler(OnGainNodeUpdate);</div>
<div class="line"></div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Gain callback registered...\n&quot;</span>);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">catch</span> (SpinnakerException ex)</div>
<div class="line">            {</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Error: {0}&quot;</span>, ex.Message);</div>
<div class="line">                result = -1;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">return</span> result;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// This function demonstrates the triggering of the nodemap callbacks.</span></div>
<div class="line">        <span class="comment">// First it changes height, which executes the callback registered to</span></div>
<div class="line">        <span class="comment">// the height node, and then it changes gain, which executes the</span></div>
<div class="line">        <span class="comment">// callback registered to the gain node.</span></div>
<div class="line">        <span class="keywordtype">int</span> ChangeHeightAndGain(INodeMap nodeMap)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;\n*** CHANGE HEIGHT &amp; GAIN ***\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">try</span></div>
<div class="line">            {</div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// Change height to trigger height callback</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// *** NOTES ***</span></div>
<div class="line">                <span class="comment">// Notice that changing the height only triggers the callback</span></div>
<div class="line">                <span class="comment">// function registered to the height node.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                IInteger iHeight = nodeMap.GetNode&lt;IInteger&gt;(<span class="stringliteral">&quot;Height&quot;</span>);</div>
<div class="line">                <span class="keywordflow">if</span> (iHeight == null || !iHeight.IsWritable)</div>
<div class="line">                {</div>
<div class="line">                    Console.WriteLine(<span class="stringliteral">&quot;Unable to retrieve height. Aborting...\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> -1;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Regular function message:&quot;</span>);</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;\tHeight about to be changed to {0}...\n&quot;</span>, iHeight.Max);</div>
<div class="line"></div>
<div class="line">                iHeight.Value = iHeight.Max;</div>
<div class="line"></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// Change gain to trigger gain callback</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// *** NOTES ***</span></div>
<div class="line">                <span class="comment">// The same is true of changing the gain node; changing a node</span></div>
<div class="line">                <span class="comment">// will only ever trigger the callback function (or functions)</span></div>
<div class="line">                <span class="comment">// currently registered to it.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                IFloat iGain = nodeMap.GetNode&lt;IFloat&gt;(<span class="stringliteral">&quot;Gain&quot;</span>);</div>
<div class="line">                <span class="keywordflow">if</span> (iGain == null || !iGain.IsWritable)</div>
<div class="line">                {</div>
<div class="line">                    Console.WriteLine(<span class="stringliteral">&quot;Unable to retrieve gain. Aborting...\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> -1;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Regular function message:&quot;</span>);</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;\tGain about to be changed to {0}...\n&quot;</span>, iGain.Max / 2.0);</div>
<div class="line"></div>
<div class="line">                iGain.Value = iGain.Max / 2;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">catch</span> (SpinnakerException ex)</div>
<div class="line">            {</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Error: {0}&quot;</span>, ex.Message);</div>
<div class="line">                result = -1;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">return</span> result;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// This function cleans up the example by deregistering the callbacks</span></div>
<div class="line">        <span class="comment">// and turning automatic gain back on.</span></div>
<div class="line">        <span class="keywordtype">int</span> ResetCallbacks(INodeMap nodeMap)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">try</span></div>
<div class="line">            {</div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// Deregister callbacks</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// *** NOTES ***</span></div>
<div class="line">                <span class="comment">// It is important to deregister each callback function from</span></div>
<div class="line">                <span class="comment">// each node that it is registered to.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                IInteger iHeight = nodeMap.GetNode&lt;IInteger&gt;(<span class="stringliteral">&quot;Height&quot;</span>);</div>
<div class="line">                <span class="keywordflow">if</span> (iHeight == null || !iHeight.IsWritable)</div>
<div class="line">                {</div>
<div class="line">                    Console.WriteLine(<span class="stringliteral">&quot;Unable to unregister height callback. Aborting...\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> -1;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                iHeight.Updated -= <span class="keyword">new</span> NodeEventHandler(OnHeightNodeUpdate);</div>
<div class="line"></div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Height callback unregistered...&quot;</span>);</div>
<div class="line"></div>
<div class="line">                IFloat iGain = nodeMap.GetNode&lt;IFloat&gt;(<span class="stringliteral">&quot;Gain&quot;</span>);</div>
<div class="line">                <span class="keywordflow">if</span> (iGain == null || !iGain.IsWritable)</div>
<div class="line">                {</div>
<div class="line">                    Console.WriteLine(<span class="stringliteral">&quot;Unable to unregister gain callback. Aborting...\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> -1;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                iGain.Updated -= <span class="keyword">new</span> NodeEventHandler(OnGainNodeUpdate);</div>
<div class="line"></div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Gain callback unregistered...&quot;</span>);</div>
<div class="line"></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// Turn automatic gain back on</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// *** NOTES ***</span></div>
<div class="line">                <span class="comment">// Automatic gain is turned on in order to return the camera to</span></div>
<div class="line">                <span class="comment">// its default state.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                IEnum iGainAuto = nodeMap.GetNode&lt;IEnum&gt;(<span class="stringliteral">&quot;GainAuto&quot;</span>);</div>
<div class="line">                <span class="keywordflow">if</span> (iGainAuto == null || !iGainAuto.IsWritable)</div>
<div class="line">                {</div>
<div class="line">                    Console.WriteLine(<span class="stringliteral">&quot;Unable to enable automatic gain (enum retrieval). Aborting...\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> -1;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                IEnumEntry iGainAutoContinuous = iGainAuto.GetEntryByName(<span class="stringliteral">&quot;Continuous&quot;</span>);</div>
<div class="line">                <span class="keywordflow">if</span> (iGainAutoContinuous == null || !iGainAutoContinuous.IsReadable)</div>
<div class="line">                {</div>
<div class="line">                    Console.WriteLine(<span class="stringliteral">&quot;Unable to enable automatic gain (entry retrieval). Aborting...\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> -1;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                iGainAuto.Value = iGainAutoContinuous.Value;</div>
<div class="line"></div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Automatic gain enabled...\n&quot;</span>);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">catch</span> (SpinnakerException ex)</div>
<div class="line">            {</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Error: {0}&quot;</span>, ex.Message);</div>
<div class="line">                result = -1;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">return</span> result;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// This function prints the device information of the camera from the</span></div>
<div class="line">        <span class="comment">// transport layer; please see NodeMapInfo_CSharp example for more</span></div>
<div class="line">        <span class="comment">// in-depth comments on printing device information from the nodemap.</span></div>
<div class="line">        <span class="keyword">static</span> <span class="keywordtype">int</span> PrintDeviceInfo(INodeMap nodeMap)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">try</span></div>
<div class="line">            {</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;\n*** DEVICE INFORMATION ***\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">                ICategory category = nodeMap.GetNode&lt;ICategory&gt;(<span class="stringliteral">&quot;DeviceInformation&quot;</span>);</div>
<div class="line">                <span class="keywordflow">if</span> (category != null &amp;&amp; category.IsReadable)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; category.Children.Length; i++)</div>
<div class="line">                    {</div>
<div class="line">                        Console.WriteLine(</div>
<div class="line">                            <span class="stringliteral">&quot;{0}: {1}&quot;</span>,</div>
<div class="line">                            category.Children[i].Name,</div>
<div class="line">                            (category.Children[i].IsReadable ? category.Children[i].ToString()</div>
<div class="line">                             : <span class="stringliteral">&quot;Node not available&quot;</span>));</div>
<div class="line">                    }</div>
<div class="line">                    Console.WriteLine();</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    Console.WriteLine(<span class="stringliteral">&quot;Device control information not available.&quot;</span>);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">catch</span> (SpinnakerException ex)</div>
<div class="line">            {</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Error: {0}&quot;</span>, ex.Message);</div>
<div class="line">                result = -1;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">return</span> result;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// This function acts as the body of the example; please see</span></div>
<div class="line">        <span class="comment">// NodeMapInfo_CSharp example for more in-depth comments on setting up</span></div>
<div class="line">        <span class="comment">// cameras.</span></div>
<div class="line">        <span class="keywordtype">int</span> RunSingleCamera(IManagedCamera cam)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">int</span> result = 0;</div>
<div class="line">            <span class="keywordtype">int</span> err = 0;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">try</span></div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Retrieve TL device nodemap and print device information</span></div>
<div class="line">                INodeMap nodeMapTLDevice = cam.GetTLDeviceNodeMap();</div>
<div class="line"></div>
<div class="line">                result = PrintDeviceInfo(nodeMapTLDevice);</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Initialize camera</span></div>
<div class="line">                cam.Init();</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Retrieve GenICam nodemap</span></div>
<div class="line">                INodeMap nodeMap = cam.GetNodeMap();</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Configure callbacks</span></div>
<div class="line">                err = ConfigureCallbacks(nodeMap);</div>
<div class="line">                <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">return</span> err;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Acquire images</span></div>
<div class="line">                result = result | ChangeHeightAndGain(nodeMap);</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Reset callbacks</span></div>
<div class="line">                result = result | ResetCallbacks(nodeMap);</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Deinitialize camera</span></div>
<div class="line">                cam.DeInit();</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">catch</span> (SpinnakerException ex)</div>
<div class="line">            {</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Error: {0}&quot;</span>, ex.Message);</div>
<div class="line">                result = -1;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">return</span> result;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Example entry point; please see Enumeration_CSharp example for more</span></div>
<div class="line">        <span class="comment">// in-depth comments on preparing and cleaning up the system.</span></div>
<div class="line">        <span class="keyword">static</span> <span class="keywordtype">int</span> Main(<span class="keywordtype">string</span>[] args)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">int</span> result = 0;</div>
<div class="line"></div>
<div class="line">            Program program = <span class="keyword">new</span> Program();</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Retrieve singleton reference to system object</span></div>
<div class="line">            ManagedSystem system = <span class="keyword">new</span> ManagedSystem();</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Print out current library version</span></div>
<div class="line">            LibraryVersion spinVersion = system.GetLibraryVersion();</div>
<div class="line">            Console.WriteLine(</div>
<div class="line">                <span class="stringliteral">&quot;Spinnaker library version: {0}.{1}.{2}.{3}\n\n&quot;</span>,</div>
<div class="line">                spinVersion.major,</div>
<div class="line">                spinVersion.minor,</div>
<div class="line">                spinVersion.type,</div>
<div class="line">                spinVersion.build);</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Retrieve list of cameras from the system</span></div>
<div class="line">            ManagedCameraList camList = system.GetCameras();</div>
<div class="line"></div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;Number of cameras detected: {0}\n\n&quot;</span>, camList.Count);</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Finish if there are no cameras</span></div>
<div class="line">            <span class="keywordflow">if</span> (camList.Count == 0)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Clear camera list before releasing system</span></div>
<div class="line">                camList.Clear();</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Release system</span></div>
<div class="line">                system.Dispose();</div>
<div class="line"></div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Not enough cameras!&quot;</span>);</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Done! Press Enter to exit...&quot;</span>);</div>
<div class="line">                Console.ReadLine();</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Run example on each camera</span></div>
<div class="line">            <span class="keywordtype">int</span> index = 0;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">foreach</span>(IManagedCamera managedCamera <span class="keywordflow">in</span> camList) <span class="keyword">using</span>(managedCamera)</div>
<div class="line">            {</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Running example for camera {0}...&quot;</span>, index);</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">try</span></div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">// Run example</span></div>
<div class="line">                    result = result | program.RunSingleCamera(managedCamera);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">catch</span> (SpinnakerException ex)</div>
<div class="line">                {</div>
<div class="line">                    Console.WriteLine(<span class="stringliteral">&quot;Error: {0}&quot;</span>, ex.Message);</div>
<div class="line">                    result = -1;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Camera {0} example complete...\n&quot;</span>, index++);</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Clear camera list before releasing system</span></div>
<div class="line">            camList.Clear();</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Release system</span></div>
<div class="line">            system.Dispose();</div>
<div class="line"></div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;\nDone! Press Enter to exit...&quot;</span>);</div>
<div class="line">            Console.ReadLine();</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">return</span> result;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->

  <table style="width: 100%;border-spacing: 0px 0px;border-left-style: solid;border-left-width: ;border-left-color: #8c8888;border-right-style: solid;border-right-width: ;border-right-color: #8c8888;border-top-style: solid;border-top-width: ;border-top-color: #8c8888;border-bottom-style: solid;border-bottom-width: ;border-bottom-color: #8c8888;margin-left: 0;margin-right: auto;padding: 0px">
    <col />
    <col />
    <col />
        <tbody>
            <tr>
                <td style="background-color: #8c8888;color: #ffffff;"><a class="footer" href="https://www.flir.com/support-center/rma/iis-support-request">Contact Support </a> </td>
                <td style="background-color: #8c8888;color: #ffffff;text-align: center;font-size: 16px;font-weight: bold">Spinnaker&#174; SDK Programmer's Guide and API Reference</td>
                <td style="background-color: #8c8888;color: #ffffff;text-align: right;"><address class="footer">
Wed Sep 30 2020 &#160;© <a class="footer" href="https://www.flir.com/iis/machine-vision">FLIR Integrated Imaging Solutions Inc. All rights reserved.</a></address></td>
            </tr>
        </tbody>
  </table>
</body>
</html>
